{
  "dockerhub": {
    "web_url": "https://hub.docker.com/r/whatwedo/mariadb",
    "repository_url": "https://hub.docker.com/v2/repositories/whatwedo/mariadb",
    "tags_url": "https://hub.docker.com/v2/repositories/whatwedo/mariadb/tags",
    "dockerfile_url": "https://hub.docker.com/v2/repositories/whatwedo/mariadb/dockerfile",
    "autobuild_url": "https://hub.docker.com/v2/repositories/whatwedo/mariadb/autobuild",
    "user": "whatwedo",
    "name": "mariadb",
    "namespace": "whatwedo",
    "status": 1,
    "is_private": false,
    "is_automated": true,
    "star_count": 0,
    "pull_count": 143436,
    "last_updated": "2016-09-16T23:14:03.586180Z",
    "permissions": {
      "read": true,
      "write": false,
      "admin": false
    },
    "tags": [
      {
        "name": "latest",
        "full_size": 243064547,
        "id": 198333,
        "repository": 166055,
        "creator": 245350,
        "last_updater": 245350,
        "last_updated": "2016-09-16T22:52:24.554619Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "develop",
        "full_size": 243064432,
        "id": 1369502,
        "repository": 166055,
        "creator": 129116,
        "last_updater": 245350,
        "last_updated": "2016-09-16T22:49:10.362426Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "feature_supervisord",
        "full_size": 206443967,
        "id": 1587417,
        "repository": 166055,
        "creator": 129116,
        "last_updater": 129116,
        "last_updated": "2015-12-18T16:43:36.933338Z",
        "image_id": null,
        "v2": true,
        "platforms": []
      }
    ],
    "build_name": "whatwedo/docker-base-images"
  },
  "name": "whatwedo/mariadb Docker container",
  "description": "",
  "readme": "# whatwedo base image - MariaDB\n\nIn this image is a basic MariaDB server installation available.\n\n## Usage\n\n```\ndocker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=mysecretpassword whatwedo/mariadb\n```\n\nor with DB\n\n```\ndocker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=mysecretpassword -e MYSQL_DATABASE=gitlab mariadb\n```\n\n## Environment Variables\n\n* `MYSQL_ROOT_PASSWORD` - This is the one environment variable that is required. This environment variable should be what you want to set the password for the root user to be. In the above example, it is being set to \"mysecretpassword\".\n* `MYSQL_DATABASE` - This environment variable is optional. if given, docker creates a database at the first run\n* `CONTAINER_TIMEZONE` - timezone which should be used, default: `Europe/Zurich` ([see Wikipedia](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones))\n\n## Volumes\n\n* /var/lib/mysql\n* /etc/firstboot\n\n## Exposed Ports\n\n* 3306\n\n## Built\n\nBecause we are using several base images with recurring tasks in the Dockerfile, we are using a script to include commands. This script is available under [https://github.com/whatwedo/docker-base-images/blob/master/docker-builder.sh](https://github.com/whatwedo/docker-base-images/blob/master/docker-builder.sh)\n\n## Bugs and Issues\n\nIf you have any problems with this image, feel free to open a new issue in our issue tracker [https://github.com/whatwedo/docker-base-images/issues](https://github.com/whatwedo/docker-base-images/issues)\n\n## License\n\nThis image is licensed under the MIT License. The full license text is available under [https://github.com/whatwedo/docker-base-images/blob/master/LICENSE](https://github.com/whatwedo/docker-base-images/blob/master/LICENSE).\n\n## Further information\n\nThere are a number of images we are using at [https://whatwedo.ch/](whatwedo). Feel free to use them. More information about the other images are available in [our Github repo](https://github.com/whatwedo/docker-base-images).",
  "dockerfile": "\n##################################################\n#                                                #\n# DO NOT EDIT THIS FILE MANUALLY                 #\n# AUTOMATICALLY CREATED WITH docker-builder.sh   #\n#                                                #\n##################################################\n  \n\nFROM whatwedo/base:latest\nRUN apt-get update -y && \\\napt-key adv --recv-keys --keyserver hkp://keyserver.ubuntu.com:80 0xcbcb082a1bb943db && \\\nadd-apt-repository 'deb http://nyc2.mirrors.digitalocean.com/mariadb/repo/10.0/ubuntu trusty main' && \\\napt-get update && \\\napt-get install -y mariadb-server && \\\nsed -i 's/^\\(bind-address\\s.*\\)/# \\1/' /etc/mysql/my.cnf && \\\nsed -i 's/log_bin/#log_bin/g' /etc/mysql/my.cnf && \\\nsed -i 's/expire_logs_days/#expire_logs_days/g' /etc/mysql/my.cnf && \\\nsed -i 's/max_binlog_size/#max_binlog_size/g' /etc/mysql/my.cnf && \\\nsed -i 's/#innodb_log_file_size.*/innodb_log_file_size\\=256M/g' /etc/mysql/my.cnf\nRUN echo \"mkdir -p /var/lib/mysql\" >> /bin/firstboot && \\\necho \"chown -R mysql:mysql /var/lib/mysql\" >> /bin/firstboot && \\\necho \"mysql_install_db --user=mysql --datadir=/var/lib/mysql --rpm\" >> /bin/firstboot && \\\necho \"mysqld_safe & mysqladmin --silent --wait=30 ping || exit 1\" >> /bin/firstboot && \\\necho 'echo \"DELETE FROM mysql.user;\" >> /root/mysql-first-time.sql' >> /bin/firstboot && \\\necho 'echo \"CREATE USER \\\"root\\\"@\\\"%\\\" IDENTIFIED BY \\\"${MYSQL_ROOT_PASSWORD}\\\" ;\" >> /root/mysql-first-time.sql' >> /bin/firstboot && \\\necho 'echo \"GRANT ALL PRIVILEGES ON *.* TO \\\"root\\\"@\\\"%\\\" WITH GRANT OPTION;\" >> /root/mysql-first-time.sql' >> /bin/firstboot && \\\necho 'echo \"FLUSH PRIVILEGES;\" >> /root/mysql-first-time.sql' >> /bin/firstboot && \\\necho 'echo \"DROP DATABASE IF EXISTS test;\" >> /root/mysql-first-time.sql' >> /bin/firstboot && \\\necho 'if [ ! -z \"${MYSQL_DATABASE}\" ]; then echo \"CREATE DATABASE IF NOT EXISTS ${MYSQL_DATABASE};\" >> /root/mysql-first-time.sql; fi' >> /bin/firstboot && \\\necho 'mysql < /root/mysql-first-time.sql' >> /bin/firstboot && \\\necho 'rm /root/mysql-first-time.sql' >> /bin/firstboot && \\\necho 'mysqladmin shutdown -uroot -p${MYSQL_ROOT_PASSWORD}' >> /bin/firstboot\nCOPY files/supervisord/mariadb.conf /etc/supervisor/conf.d/mariadb.conf\nRUN apt-get autoremove -y && \\\napt-get clean -y && \\\nrm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\nVOLUME [\"/var/lib/mysql\"]\nEXPOSE 3306\nLABEL ch.whatwedo.image.base=\"whatwedo/mariadb\"\n",
  "dockerfile_json": {
    "add": [],
    "expose": [
      3306
    ],
    "volume": [
      "[\"/var/lib/mysql\"]"
    ],
    "run": [
      "apt-get update -y && apt-key adv --recv-keys --keyserver hkp://keyserver.ubuntu.com:80 0xcbcb082a1bb943db && add-apt-repository 'deb http://nyc2.mirrors.digitalocean.com/mariadb/repo/10.0/ubuntu trusty main' && apt-get update && apt-get install -y mariadb-server && sed -i 's/^\\(bind-address\\s.*\\)/# \\1/' /etc/mysql/my.cnf && sed -i 's/log_bin/#log_bin/g' /etc/mysql/my.cnf && sed -i 's/expire_logs_days/#expire_logs_days/g' /etc/mysql/my.cnf && sed -i 's/max_binlog_size/#max_binlog_size/g' /etc/mysql/my.cnf && sed -i 's/#innodb_log_file_size.*/innodb_log_file_size\\=256M/g' /etc/mysql/my.cnf",
      "echo \"mkdir -p /var/lib/mysql\" >> /bin/firstboot && echo \"chown -R mysql:mysql /var/lib/mysql\" >> /bin/firstboot && echo \"mysql_install_db --user=mysql --datadir=/var/lib/mysql --rpm\" >> /bin/firstboot && echo \"mysqld_safe & mysqladmin --silent --wait=30 ping || exit 1\" >> /bin/firstboot && echo 'echo \"DELETE FROM mysql.user;\" >> /root/mysql-first-time.sql' >> /bin/firstboot && echo 'echo \"CREATE USER \\\"root\\\"@\\\"%\\\" IDENTIFIED BY \\\"${MYSQL_ROOT_PASSWORD}\\\" ;\" >> /root/mysql-first-time.sql' >> /bin/firstboot && echo 'echo \"GRANT ALL PRIVILEGES ON *.* TO \\\"root\\\"@\\\"%\\\" WITH GRANT OPTION;\" >> /root/mysql-first-time.sql' >> /bin/firstboot && echo 'echo \"FLUSH PRIVILEGES;\" >> /root/mysql-first-time.sql' >> /bin/firstboot && echo 'echo \"DROP DATABASE IF EXISTS test;\" >> /root/mysql-first-time.sql' >> /bin/firstboot && echo 'if [ ! -z \"${MYSQL_DATABASE}\" ]; then echo \"CREATE DATABASE IF NOT EXISTS ${MYSQL_DATABASE};\" >> /root/mysql-first-time.sql; fi' >> /bin/firstboot && echo 'mysql < /root/mysql-first-time.sql' >> /bin/firstboot && echo 'rm /root/mysql-first-time.sql' >> /bin/firstboot && echo 'mysqladmin shutdown -uroot -p${MYSQL_ROOT_PASSWORD}' >> /bin/firstboot",
      "apt-get autoremove -y && apt-get clean -y && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*"
    ],
    "workdir": [],
    "from": "whatwedo/base:latest",
    "copy": "files/supervisord/mariadb.conf /etc/supervisor/conf.d/mariadb.conf",
    "label": "ch.whatwedo.image.base=\"whatwedo/mariadb\""
  },
  "source_repository_url": "https://github.com/whatwedo/docker-base-images.git",
  "source_repository_type": "git",
  "source_repository_provider": "github",
  "source_repository_web_url": "https://github.com/whatwedo/docker-base-images",
  "docker_repository": "whatwedo/mariadb",
  "docker_image": "whatwedo/mariadb",
  "parameters_schema": {
    "exposed_ports": {
      "default": [
        3306
      ],
      "type": "json_array"
    }
  },
  "type": "docker",
  "docker_name": "whatwedo/mariadb",
  "revision": "latest",
  "uris": [
    "https://hub.docker.com/r/whatwedo/mariadb",
    "https://hub.docker.com/v2/repositories/whatwedo/mariadb",
    "https://github.com/whatwedo/docker-base-images.git"
  ],
  "labels": [
    "Docker",
    "Type/Middleware/Data Store/Relational/MariaDB"
  ],
  "info_url": "https://hub.docker.com/r/whatwedo/mariadb",
  "requires": [
    {
      "kind": "host",
      "label": "Docker Engine"
    }
  ],
  "latest": true,
  "gatherbase_origin": "docker-hub"
}