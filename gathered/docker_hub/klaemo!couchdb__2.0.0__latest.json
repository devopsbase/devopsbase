{
  "dockerhub": {
    "web_url": "https://hub.docker.com/r/klaemo/couchdb",
    "repository_url": "https://hub.docker.com/v2/repositories/klaemo/couchdb",
    "tags_url": "https://hub.docker.com/v2/repositories/klaemo/couchdb/tags",
    "dockerfile_url": "https://hub.docker.com/v2/repositories/klaemo/couchdb/dockerfile",
    "autobuild_url": "https://hub.docker.com/v2/repositories/klaemo/couchdb/autobuild",
    "user": "klaemo",
    "name": "couchdb",
    "namespace": "klaemo",
    "status": 1,
    "is_private": false,
    "is_automated": true,
    "star_count": 79,
    "pull_count": 1978229,
    "last_updated": "2016-10-08T15:51:02.042530Z",
    "permissions": {
      "read": true,
      "write": false,
      "admin": false
    },
    "tags": [
      {
        "name": "2.0.0",
        "full_size": 171399938,
        "id": 4952793,
        "repository": 5615,
        "creator": 8812,
        "last_updater": 8812,
        "last_updated": "2016-10-08T15:51:00.976758Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "latest",
        "full_size": 171401085,
        "id": 8548,
        "repository": 5615,
        "creator": 8812,
        "last_updater": 8812,
        "last_updated": "2016-10-08T15:45:48.504007Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "2.0-dev",
        "full_size": 226894443,
        "id": 8543,
        "repository": 5615,
        "creator": 8812,
        "last_updater": 8812,
        "last_updated": "2016-10-08T15:38:53.042964Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "2.0.0-rc1-vote",
        "full_size": 170690975,
        "id": 4876398,
        "repository": 5615,
        "creator": 8812,
        "last_updater": 8812,
        "last_updated": "2016-09-23T20:55:28.844482Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "2.0-dev-docs",
        "full_size": 242102971,
        "id": 1587826,
        "repository": 5615,
        "creator": 8812,
        "last_updater": 8812,
        "last_updated": "2016-09-23T19:55:23.799931Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "master",
        "full_size": 170692350,
        "id": 4952649,
        "repository": 5615,
        "creator": 8812,
        "last_updater": 8812,
        "last_updated": "2016-09-20T16:28:31.360319Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "2.0-rc4",
        "full_size": 171482199,
        "id": 4372689,
        "repository": 5615,
        "creator": 8812,
        "last_updater": 8812,
        "last_updated": "2016-08-31T07:11:13.669307Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "2.0-rc3",
        "full_size": 170355865,
        "id": 4159939,
        "repository": 5615,
        "creator": 8812,
        "last_updater": 8812,
        "last_updated": "2016-08-04T14:33:53.605635Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "1.6.1",
        "full_size": 103796915,
        "id": 8542,
        "repository": 5615,
        "creator": 8812,
        "last_updater": 8812,
        "last_updated": "2016-08-04T14:19:24.073836Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "1.6",
        "full_size": 103796817,
        "id": 8523,
        "repository": 5615,
        "creator": 8812,
        "last_updater": 8812,
        "last_updated": "2016-08-04T14:15:07.202982Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      }
    ],
    "build_name": "klaemo/docker-couchdb"
  },
  "name": "klaemo/couchdb Docker container",
  "description": "Official Apache CouchDB Docker image",
  "readme": "YADC [![Build Status](https://travis-ci.org/klaemo/docker-couchdb.svg?branch=master)](https://travis-ci.org/klaemo/docker-couchdb)\n===\n\nYet Another Dockerized CouchDB.\nPut the couch in a docker container and ship it anywhere.\n\nIf you're looking for a CouchDB with SSL support you can check out [klaemo/couchdb-ssl](https://index.docker.io/u/klaemo/couchdb-ssl/)\n\n- Version (stable): `CouchDB 1.6.1`, `Erlang 17.3`\n- Version (stable): `CouchDB 2.0.0`, `Erlang 17.3`\n\n## Available tags\n\n- `1`, `1.6`, `1.6.1`, `latest`: CouchDB 1.6.1\n- `1-couchperuser`, `1.6-couchperuser`, `1.6.1-couchperuser`: CouchDB 1.6.1 with couchperuser plugin\n- `2.0-dev`: CouchDB 2.0 RC.1 (release vote) with preconfigured dev cluster\n- `latest`, `2.0.0`: CouchDB 2.0 single node\n- `2.0-dev-docs`: CouchDB 2.0 master (development version) with preconfigured dev cluster and documentation\n\n## Features\n\n* built on top of the solid and small `debian:jessie` base image\n* exposes CouchDB on port `5984` of the container\n* runs everything as user `couchdb` (security ftw!)\n* docker volume for data\n\n## Run (stable)\n\nAvailable as an official image on Docker Hub as [couchdb](https://hub.docker.com/_/couchdb/)\n\n```bash\n[sudo] docker pull klaemo/couchdb:latest\n\n# expose it to the world on port 5984\n[sudo] docker run -d -p 5984:5984 --name couchdb couchdb\n\ncurl http://localhost:5984\n```\n\n...or with mounted volume for the data\n\n```bash\n# expose it to the world on port 5984 and use your current directory as the CouchDB Database directory\n[sudo] docker run -d -p 5984:5984 -v $(pwd):/usr/local/var/lib/couchdb --name couchdb couchdb\n```\n\nIf you want to provide your own config, you can either mount a directory at `/usr/local/etc/couchdb`\nor extend the image and `COPY` your `config.ini` (see [Build you own](#build-your-own)).\n\n### with couchperuser plugin\n\nThis build includes the `couchperuser` plugin.\n`couchperuser` is a CouchDB plugin daemon that creates per-user databases [github.com/etrepum/couchperuser](https://github.com/etrepum/couchperuser).\n\n```\n[sudo] docker run -d -p 5984:5984 --name couchdb couchdb:1.6.1-couchperuser\n```\n\n## Run (dev)\n\nAvailable on the docker registry as [klaemo/couchdb:latest](https://index.docker.io/u/klaemo/couchdb/).\nThis is a developer preview of the upcoming CouchDB 2.0 release. A data volume\nis exposed on `/opt/couchdb/data`, and the node's port is exposed on `5984`.\n\nPlease note that CouchDB no longer autocreates system tables for you, so you will\nhave to create `_global_changes`, `_metadata`, `_replicator` and `_users` manually.\nThe node will also start in [admin party mode](http://guide.couchdb.org/draft/security.html#party)!\n\n```bash\n# expose it to the world on port 5984 and use your current directory as the CouchDB Database directory\n[sudo] docker run -p 5984:5984 -v $(pwd):/opt/couchdb/data klaemo/couchdb:2.0-single\n18:54:48.780 [info] Application lager started on node nonode@nohost\n18:54:48.780 [info] Application couch_log_lager started on node nonode@nohost\n18:54:48.780 [info] Application couch_mrview started on node nonode@nohost\n18:54:48.780 [info] Application couch_plugins started on node nonode@nohost\n[...]\n```\n\nOnce running, you can visit the new admin interface at `http://dockerhost:5984/_utils/`\n\n### In a developer cluster\n\nAvailable on the docker registry as [klaemo/couchdb:2.0-dev](https://index.docker.io/u/klaemo/couchdb/).\nThis build demonstrates the CouchDB clustering features by creating a local\ncluster of a default three nodes inside the container, with a proxy in front.\nThis is great for testing clustering in your local environment.\n\n```bash\n# expose the cluster to the world\n[sudo] docker run -it -p 5984:5984 klaemo/couchdb:2.0-dev\n\n[ * ] Setup environment ... ok\n[ * ] Ensure CouchDB is built ... ok\n[ * ] Prepare configuration files ... ok\n[ * ] Start node node1 ... ok\n[ * ] Start node node2 ... ok\n[ * ] Start node node3 ... ok\n[ * ] Check node at http://127.0.0.1:15984/ ... failed: [Errno socket error] [Errno 111] Connection refused\n[ * ] Check node at http://127.0.0.1:25984/ ... ok\n[ * ] Check node at http://127.0.0.1:35984/ ... ok\n[ * ] Check node at http://127.0.0.1:15984/ ... ok\n[ * ] Running cluster setup ... ok\n[ * ] Developers cluster is set up at http://127.0.0.1:15984.\nAdmin username: root\nPassword: 37l7YDQJ\nTime to hack! ...\n```\n**Note:** By default the cluster will be exposed on port `5984`, because it uses haproxy\n(passes `--with-haproxy` to `dev/run`) internally.\n\n...but you can pass arguments to the binary\n\n```bash\ndocker run -it klaemo/couchdb:2.0-dev --admin=foo:bar\n```\n**Note:** This will overwrite the default `--with-haproxy` flag. The cluster **won't** be exposed on\nport `5984` anymore. The individual nodes listen on `15984`, `25984`, ...`x5984`. If you wish to expose\nthe cluster on `5984`, pass `--with-haproxy` explicitly.\n\nExamples:\n```bash\n# display the available options of the couchdb startup script\ndocker run --rm klaemo/couchdb:2.0-dev --help\n\n# Enable admin party ðŸŽ‰ and expose the cluster on port 5984\ndocker run -it -p 5984:5984 klaemo/couchdb:2.0-dev --with-admin-party-please --with-haproxy\n\n# Start two nodes (without proxy) exposed on port 15984 and 25984\ndocker run -it -p 15984:15984 -p 25984:25984 klaemo/couchdb:2.0-dev -n 2\n```\n\n## Build your own\n\nYou can use `klaemo/couchdb` as the base image for your own couchdb instance.\nYou might want to provide your own version of the following files:\n\n* `local.ini` for your custom CouchDB config\n\nExample Dockerfile:\n\n```\nFROM klaemo/couchdb:latest\n\nCOPY local.ini /usr/local/etc/couchdb/\n```\n\nand then build and run\n\n```\n[sudo] docker build -t you/awesome-couchdb .\n[sudo] docker run -d -p 5984:5984 -v ~/couchdb:/usr/local/var/lib/couchdb you/awesome-couchdb\n```\n\nFor the `2.0-single` image, configuration is stored at `/opt/couchdb/etc/`.\n\n## Feedback, Issues, Contributing\n\n**Please use Github issues for any questions, bugs, feature requests. :)**\nI don't get notified about comments on Docker Hub, so I might respond really late...or not at all.\n\n## Contributors\n\n- [@joeybaker](https://github.com/joeybaker)\n",
  "dockerfile": "# Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n# use this file except in compliance with the License. You may obtain a copy of\n# the License at\n#\n#   http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n# License for the specific language governing permissions and limitations under\n# the License.\n\nFROM debian:jessie\n\nMAINTAINER Clemens Stolle klaemo@apache.org\n\n# Add CouchDB user account\nRUN groupadd -r couchdb && useradd -d /opt/couchdb -g couchdb couchdb\n\nRUN apt-get update -y && apt-get install -y --no-install-recommends \\\n    ca-certificates \\\n    curl \\\n    haproxy \\\n    erlang-nox \\\n    erlang-reltool \\\n    libicu52 \\\n    libmozjs185-1.0 \\\n    openssl \\\n  && rm -rf /var/lib/apt/lists/*\n\n# grab gosu for easy step-down from root and tini for signal handling\nRUN gpg --keyserver ha.pool.sks-keyservers.net --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4 \\\n  && curl -o /usr/local/bin/gosu -fSL \"https://github.com/tianon/gosu/releases/download/1.7/gosu-$(dpkg --print-architecture)\" \\\n  && curl -o /usr/local/bin/gosu.asc -fSL \"https://github.com/tianon/gosu/releases/download/1.7/gosu-$(dpkg --print-architecture).asc\" \\\n  && gpg --verify /usr/local/bin/gosu.asc \\\n  && rm /usr/local/bin/gosu.asc \\\n  && chmod +x /usr/local/bin/gosu \\\n  && gpg --keyserver ha.pool.sks-keyservers.net --recv-keys 6380DC428747F6C393FEACA59A84159D7001A4E5 \\\n  && curl -o /usr/local/bin/tini -fSL \"https://github.com/krallin/tini/releases/download/v0.9.0/tini\" \\\n  && curl -o /usr/local/bin/tini.asc -fSL \"https://github.com/krallin/tini/releases/download/v0.9.0/tini.asc\" \\\n  && gpg --verify /usr/local/bin/tini.asc \\\n  && rm /usr/local/bin/tini.asc \\\n  && chmod +x /usr/local/bin/tini\n\nENV COUCHDB_VERSION 2.0.0\n\n# Download dev dependencies\nRUN apt-get update -y -qq && apt-get install -y --no-install-recommends \\\n    apt-transport-https \\\n    build-essential \\\n    erlang-dev \\\n    libcurl4-openssl-dev \\\n    libicu-dev \\\n    libmozjs185-dev \\\n && curl -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | apt-key add - \\\n && echo 'deb https://deb.nodesource.com/node_4.x jessie main' > /etc/apt/sources.list.d/nodesource.list \\\n && echo 'deb-src https://deb.nodesource.com/node_4.x jessie main' >> /etc/apt/sources.list.d/nodesource.list \\\n && apt-get update -y -qq \\\n && apt-get install -y nodejs \\\n && npm install -g grunt-cli \\\n # Acquire CouchDB source code\n && cd /usr/src && mkdir couchdb \\\n && curl -fSL https://dist.apache.org/repos/dist/release/couchdb/source/2.0.0/apache-couchdb-$COUCHDB_VERSION.tar.gz -o couchdb.tar.gz \\\n && tar -xzf couchdb.tar.gz -C couchdb --strip-components=1 \\\n && cd couchdb \\\n # Build the release and install into /opt\n && ./configure --disable-docs \\\n && make release \\\n && mv /usr/src/couchdb/rel/couchdb /opt/ \\\n # Cleanup build detritus\n && apt-get purge -y \\\n    binutils \\\n    build-essential \\\n    cpp \\\n    erlang-dev \\\n    git \\\n    libicu-dev \\\n    make \\\n    nodejs \\\n    perl \\\n && apt-get autoremove -y && apt-get clean \\\n && apt-get install -y libicu52 --no-install-recommends \\\n && rm -rf /var/lib/apt/lists/* /usr/lib/node_modules /usr/src/couchdb*\n\n# Add configuration\nCOPY local.ini /opt/couchdb/etc/\nCOPY vm.args /opt/couchdb/etc/\n\nCOPY ./docker-entrypoint.sh /\n\n# Setup directories and permissions\nRUN chmod +x /docker-entrypoint.sh \\\n && mkdir /opt/couchdb/data /opt/couchdb/etc/local.d /opt/couchdb/etc/default.d \\\n && chown -R couchdb:couchdb /opt/couchdb/\n\nWORKDIR /opt/couchdb\nEXPOSE 5984 4369 9100\nVOLUME [\"/opt/couchdb/data\"]\n\nENTRYPOINT [\"tini\", \"--\", \"/docker-entrypoint.sh\"]\nCMD [\"/opt/couchdb/bin/couchdb\"]\n",
  "dockerfile_json": {
    "add": [],
    "expose": [
      5984
    ],
    "volume": [
      "[\"/opt/couchdb/data\"]"
    ],
    "run": [
      "groupadd -r couchdb && useradd -d /opt/couchdb -g couchdb couchdb",
      "apt-get update -y && apt-get install -y --no-install-recommends     ca-certificates     curl     haproxy     erlang-nox     erlang-reltool     libicu52     libmozjs185-1.0     openssl   && rm -rf /var/lib/apt/lists/*",
      "gpg --keyserver ha.pool.sks-keyservers.net --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4   && curl -o /usr/local/bin/gosu -fSL \"https://github.com/tianon/gosu/releases/download/1.7/gosu-$(dpkg --print-architecture)\"   && curl -o /usr/local/bin/gosu.asc -fSL \"https://github.com/tianon/gosu/releases/download/1.7/gosu-$(dpkg --print-architecture).asc\"   && gpg --verify /usr/local/bin/gosu.asc   && rm /usr/local/bin/gosu.asc   && chmod +x /usr/local/bin/gosu   && gpg --keyserver ha.pool.sks-keyservers.net --recv-keys 6380DC428747F6C393FEACA59A84159D7001A4E5   && curl -o /usr/local/bin/tini -fSL \"https://github.com/krallin/tini/releases/download/v0.9.0/tini\"   && curl -o /usr/local/bin/tini.asc -fSL \"https://github.com/krallin/tini/releases/download/v0.9.0/tini.asc\"   && gpg --verify /usr/local/bin/tini.asc   && rm /usr/local/bin/tini.asc   && chmod +x /usr/local/bin/tini",
      "apt-get update -y -qq && apt-get install -y --no-install-recommends     apt-transport-https     build-essential     erlang-dev     libcurl4-openssl-dev     libicu-dev     libmozjs185-dev  && curl -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | apt-key add -  && echo 'deb https://deb.nodesource.com/node_4.x jessie main' > /etc/apt/sources.list.d/nodesource.list  && echo 'deb-src https://deb.nodesource.com/node_4.x jessie main' >> /etc/apt/sources.list.d/nodesource.list  && apt-get update -y -qq  && apt-get install -y nodejs  && npm install -g grunt-cli  # Acquire CouchDB source code",
      "chmod +x /docker-entrypoint.sh  && mkdir /opt/couchdb/data /opt/couchdb/etc/local.d /opt/couchdb/etc/default.d  && chown -R couchdb:couchdb /opt/couchdb/"
    ],
    "workdir": [
      "/opt/couchdb"
    ],
    "from": "debian:jessie",
    "maintainer": "Clemens Stolle klaemo@apache.org",
    "env": {
      "COUCHDB_VERSION": "2.0.0"
    },
    "copy": "./docker-entrypoint.sh /",
    "entrypoint": "[\"tini\", \"--\", \"/docker-entrypoint.sh\"]",
    "cmd": "[\"/opt/couchdb/bin/couchdb\"]"
  },
  "source_repository_url": "git://github.com/klaemo/docker-couchdb.git",
  "source_repository_type": "git",
  "source_repository_provider": "github",
  "source_repository_web_url": "https://github.com/klaemo/docker-couchdb",
  "docker_repository": "klaemo/couchdb",
  "docker_image": "klaemo/couchdb",
  "parameters_schema": {
    "COUCHDB_VERSION": {
      "default": "2.0.0",
      "type": "string",
      "mapping": "environment_variable"
    },
    "exposed_ports": {
      "default": [
        5984
      ],
      "type": "json_array"
    }
  },
  "type": "docker",
  "docker_name": "klaemo/couchdb",
  "revision": "2.0.0",
  "uris": [
    "https://hub.docker.com/r/klaemo/couchdb",
    "https://hub.docker.com/v2/repositories/klaemo/couchdb",
    "git://github.com/klaemo/docker-couchdb.git"
  ],
  "labels": [
    "Docker",
    "Mode/Executable/Image/Container Image/Docker Image",
    "Type/Middleware/Web Server/Apache HTTP Server",
    "Type/Middleware/Data Store/Document-oriented/CouchDB"
  ],
  "info_url": "https://hub.docker.com/r/klaemo/couchdb",
  "requires": [
    {
      "kind": "host",
      "label": "Docker Engine"
    }
  ],
  "latest": true,
  "gatherbase_origin": "docker-hub"
}