{
  "dockerhub": {
    "web_url": "https://hub.docker.com/r/whatwedo/owncloud",
    "repository_url": "https://hub.docker.com/v2/repositories/whatwedo/owncloud",
    "tags_url": "https://hub.docker.com/v2/repositories/whatwedo/owncloud/tags",
    "dockerfile_url": "https://hub.docker.com/v2/repositories/whatwedo/owncloud/dockerfile",
    "autobuild_url": "https://hub.docker.com/v2/repositories/whatwedo/owncloud/autobuild",
    "user": "whatwedo",
    "name": "owncloud",
    "namespace": "whatwedo",
    "status": 1,
    "is_private": false,
    "is_automated": true,
    "star_count": 0,
    "pull_count": 34,
    "last_updated": "2016-09-16T18:16:50.123551Z",
    "permissions": {
      "read": true,
      "write": false,
      "admin": false
    },
    "tags": [
      {
        "name": "latest",
        "full_size": 515075852,
        "id": 3861941,
        "repository": 801325,
        "creator": 245350,
        "last_updater": 245350,
        "last_updated": "2016-09-16T18:16:49.776618Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      },
      {
        "name": "develop",
        "full_size": 515075098,
        "id": 3863457,
        "repository": 801325,
        "creator": 245350,
        "last_updater": 245350,
        "last_updated": "2016-09-16T18:05:09.052949Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      }
    ],
    "build_name": "whatwedo/docker-base-images"
  },
  "name": "whatwedo/owncloud Docker container",
  "description": "ownCloud powered by Apache 2 and PHP 7",
  "readme": "# whatwedo base image - ownCloud\n\n## Usage\n\n```\ndocker run \\\n    -p 80:80 \\\n    whatwedo/owncloud\n```\n\n## docker-compose\n\n```\nowncloud:\n  restart: always\n  image: whatwedo/owncloud\n  links:\n    - \"db:db\"\n  ports:\n    - \"80:80\"\ndb:\n  restart: always\n  image: whatwedo/mariadb:latest\n  ports:\n    - \"3306:3306\"\n  environment:\n    - MYSQL_ROOT_PASSWORD=mysecretpassword\n    - MYSQL_DATABASE=owncloud\n  volumes:\n    - /var/lib/mysql\n```\n\n## Environment Variables\n\n* `CONTAINER_TIMEZONE` - timezone which should be used, default: `Europe/Zurich` ([see Wikipedia](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones))\n\n## Volumes\n\n* /var/www/html\n* /etc/firstboot\n\n## Exposed Ports\n\n* 80\n\n## Built\n\nBecause we are using several base images with recurring tasks in the Dockerfile, we are using a script to include commands. This script is available under [https://github.com/whatwedo/docker-base-images/blob/master/docker-builder.sh](https://github.com/whatwedo/docker-base-images/blob/master/docker-builder.sh)\n\n## Bugs and Issues\n\n### known limitations\n\n* we're encrypting the traffic via a reverse proxy on the docker hosts, so there is no SSL configuration in this container\n* there is only the backup directory as a volume available - otherwise we can't restore backups because of a bug\n* we're using MariaDB only, so there is no option to configure PostgreSQL at the moment\n\nIf you have any problems with this image, feel free to open a new issue in our issue tracker [https://github.com/whatwedo/docker-base-images/issues](https://github.com/whatwedo/docker-base-images/issues)\n\n## License\n\nThis image is licensed under the MIT License. The full license text is available under [https://github.com/whatwedo/docker-base-images/blob/master/LICENSE](https://github.com/whatwedo/docker-base-images/blob/master/LICENSE).\n\n## Further information\n\nThere are a number of images we are using at [https://whatwedo.ch/](whatwedo). Feel free to use them. More information about the other images are available in [our Github repo](https://github.com/whatwedo/docker-base-images).\n",
  "dockerfile": "\n##################################################\n#                                                #\n# DO NOT EDIT THIS FILE MANUALLY                 #\n# AUTOMATICALLY CREATED WITH docker-builder.sh   #\n#                                                #\n##################################################\n  \n\nFROM whatwedo/base:latest\nRUN apt-get update -y && \\\napt-get install -y apache2\nENV APACHE_RUN_USER www-data\nENV APACHE_RUN_GROUP www-data\nENV APACHE_LOG_DIR /var/log/apache2\nENV APACHE_PID_FILE /var/run/apache2.pid\nENV APACHE_RUN_DIR /var/run/apache2\nENV APACHE_LOCK_DIR /var/lock/apache2\nRUN mkdir -p $APACHE_RUN_DIR $APACHE_LOCK_DIR $APACHE_LOG_DIR && \\\nrm -rf /var/www/html/* && \\\nchown -R www-data /var/www/ && \\\nchmod -R 755 /var/www/ && \\\nsed -i '/<Directory \\/var\\/www\\/>/,/<\\/Directory>/ s/AllowOverride None/AllowOverride all/' /etc/apache2/apache2.conf && \\\necho \"#\\0041/bin/bash\" > /bin/start-apache && \\\necho \"rm -rf /run/httpd/*\" >> /bin/start-apache && \\\necho \"apache2 -D FOREGROUND\" >> /bin/start-apache && \\\nchmod 755 /bin/start-apache && \\\ntouch /var/log/apache2/access.log && chown www-data /var/log/apache2/access.log && \\\ntouch /var/log/apache2/error.log && chown www-data /var/log/apache2/error.log\nCOPY files/supervisord/apache.conf /etc/supervisor/conf.d/apache.conf\nRUN add-apt-repository -y ppa:ondrej/php && \\\napt-get update && \\\napt-get install php7.0 php7.0-cli php7.0-common php7.0-cgi php7.0-curl php7.0-imap php7.0-pgsql php7.0-sqlite3 php7.0-mysql php7.0-fpm php7.0-intl php7.0-gd php7.0-json php7.0-ldap php-memcached php-memcache php-imagick php7.0-xml php7.0-mbstring -y && \\\nsed -i s/^upload_max_filesize.*/upload_max_filesize\\ =\\ 32M/g /etc/php/7.0/fpm/php.ini && \\\nsed -i s/^upload_max_filesize.*/upload_max_filesize\\ =\\ 32M/g /etc/php/7.0/cgi/php.ini && \\\nsed -i s/^upload_max_filesize.*/upload_max_filesize\\ =\\ 32M/g /etc/php/7.0/cli/php.ini && \\\nsed -i s/^post_max_size.*/post_max_size\\ =\\ 32M/g /etc/php/7.0/fpm/php.ini && \\\nsed -i s/^post_max_size.*/post_max_size\\ =\\ 32M/g /etc/php/7.0/cgi/php.ini && \\\nsed -i s/^post_max_size.*/post_max_size\\ =\\ 32M/g /etc/php/7.0/cli/php.ini && \\\necho \"php_admin_value[upload_max_filesize] = 32M\" >> /etc/php/7.0/fpm/pool.d/www.conf && \\\necho \"php_admin_value[post_max_size] = 32M\" >> /etc/php/7.0/fpm/pool.d/www.conf && \\\necho \"php_flag[display_errors] = off\" >> /etc/php/7.0/fpm/pool.d/www.conf && \\\necho \"php_admin_flag[log_errors] = on\" >> /etc/php/7.0/fpm/pool.d/www.conf && \\\necho \"php_flag[expose_php] = Off\" >> /etc/php/7.0/fpm/pool.d/www.conf && \\\nmkdir -p /run/php && \\\napt-get install -y libapache2-mod-php7.0 && \\\na2enmod rewrite && \\\napt-get install -qq zziplib-bin smbclient php7.0-zip libreoffice && \\\n{ \\\necho 'opcache.enable=1'; \\\necho 'opcache.memory_consumption=128'; \\\necho 'opcache.interned_strings_buffer=8'; \\\necho 'opcache.max_accelerated_files=4000'; \\\necho 'opcache.revalidate_freq=60'; \\\necho 'opcache.fast_shutdown=1'; \\\necho 'opcache.enable_cli=1'; \\\n} > /etc/php/7.0/apache2/conf.d/20-opcache-recommended.ini\nRUN echo \"extension=zip.so;\" > /etc/php/7.0/apache2/conf.d/20-zip.ini && \\\na2enmod rewrite\nENV OWNCLOUD_VERSION 9.0.1\nRUN curl -fsSL -o owncloud.tar.bz2 \\\n\"https://download.owncloud.org/community/owncloud-${OWNCLOUD_VERSION}.tar.bz2\" \\\n&& curl -fsSL -o owncloud.tar.bz2.asc \\\n\"https://download.owncloud.org/community/owncloud-${OWNCLOUD_VERSION}.tar.bz2.asc\" \\\n&& export GNUPGHOME=\"$(mktemp -d)\" \\\n&& gpg --keyserver ha.pool.sks-keyservers.net --recv-keys E3036906AD9F30807351FAC32D5D5E97F6978A26 \\\n&& gpg --batch --verify owncloud.tar.bz2.asc owncloud.tar.bz2 \\\n&& rm -r \"$GNUPGHOME\" owncloud.tar.bz2.asc \\\n&& tar -xjf owncloud.tar.bz2 -C /usr/src/ \\\n&& rm owncloud.tar.bz2\nRUN mkdir -p /var/www/html && \\\necho 'if [ ! -e '/var/www/html/version.php' ]; then' >> /bin/everyboot && \\\necho '    cd /var/www/html' >> /bin/everyboot && \\\necho '    tar cf - --one-file-system -C /usr/src/owncloud . | tar xf -' >> /bin/everyboot && \\\necho '    chown -R www-data /var/www' >> /bin/everyboot && \\\necho 'fi' >> /bin/everyboot && \\\necho 'echo \"Installing ownCloud cronjob\"' >> /bin/firstboot && \\\necho 'crontab -u www-data -l > /tmp/cron' >> /bin/firstboot && \\\necho 'echo \"*/15  *  *  *  * php -f /var/www/owncloud/cron.php\" >> /tmp/cron' >> /bin/firstboot && \\\necho 'crontab -u www-data /tmp/cron' >> /bin/firstboot && \\\necho 'rm /tmp/cron' >> /bin/firstboot && \\\napt-get autoremove -y && \\\napt-get clean -y && \\\nrm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\nEXPOSE 80\nEXPOSE 443\nVOLUME /var/www/html\nLABEL ch.whatwedo.image.base=\"whatwedo/owncloud\"\n",
  "dockerfile_json": {
    "add": [],
    "expose": [
      80,
      443
    ],
    "volume": [
      "/var/www/html"
    ],
    "run": [
      "apt-get update -y && apt-get install -y apache2",
      "mkdir -p $APACHE_RUN_DIR $APACHE_LOCK_DIR $APACHE_LOG_DIR && rm -rf /var/www/html/* && chown -R www-data /var/www/ && chmod -R 755 /var/www/ && sed -i '/<Directory \\/var\\/www\\/>/,/<\\/Directory>/ s/AllowOverride None/AllowOverride all/' /etc/apache2/apache2.conf && echo \"#\\0041/bin/bash\" > /bin/start-apache && echo \"rm -rf /run/httpd/*\" >> /bin/start-apache && echo \"apache2 -D FOREGROUND\" >> /bin/start-apache && chmod 755 /bin/start-apache && touch /var/log/apache2/access.log && chown www-data /var/log/apache2/access.log && touch /var/log/apache2/error.log && chown www-data /var/log/apache2/error.log",
      "add-apt-repository -y ppa:ondrej/php && apt-get update && apt-get install php7.0 php7.0-cli php7.0-common php7.0-cgi php7.0-curl php7.0-imap php7.0-pgsql php7.0-sqlite3 php7.0-mysql php7.0-fpm php7.0-intl php7.0-gd php7.0-json php7.0-ldap php-memcached php-memcache php-imagick php7.0-xml php7.0-mbstring -y && sed -i s/^upload_max_filesize.*/upload_max_filesize\\ =\\ 32M/g /etc/php/7.0/fpm/php.ini && sed -i s/^upload_max_filesize.*/upload_max_filesize\\ =\\ 32M/g /etc/php/7.0/cgi/php.ini && sed -i s/^upload_max_filesize.*/upload_max_filesize\\ =\\ 32M/g /etc/php/7.0/cli/php.ini && sed -i s/^post_max_size.*/post_max_size\\ =\\ 32M/g /etc/php/7.0/fpm/php.ini && sed -i s/^post_max_size.*/post_max_size\\ =\\ 32M/g /etc/php/7.0/cgi/php.ini && sed -i s/^post_max_size.*/post_max_size\\ =\\ 32M/g /etc/php/7.0/cli/php.ini && echo \"php_admin_value[upload_max_filesize] = 32M\" >> /etc/php/7.0/fpm/pool.d/www.conf && echo \"php_admin_value[post_max_size] = 32M\" >> /etc/php/7.0/fpm/pool.d/www.conf && echo \"php_flag[display_errors] = off\" >> /etc/php/7.0/fpm/pool.d/www.conf && echo \"php_admin_flag[log_errors] = on\" >> /etc/php/7.0/fpm/pool.d/www.conf && echo \"php_flag[expose_php] = Off\" >> /etc/php/7.0/fpm/pool.d/www.conf && mkdir -p /run/php && apt-get install -y libapache2-mod-php7.0 && a2enmod rewrite && apt-get install -qq zziplib-bin smbclient php7.0-zip libreoffice && { echo 'opcache.enable=1'; echo 'opcache.memory_consumption=128'; echo 'opcache.interned_strings_buffer=8'; echo 'opcache.max_accelerated_files=4000'; echo 'opcache.revalidate_freq=60'; echo 'opcache.fast_shutdown=1'; echo 'opcache.enable_cli=1'; } > /etc/php/7.0/apache2/conf.d/20-opcache-recommended.ini",
      "echo \"extension=zip.so;\" > /etc/php/7.0/apache2/conf.d/20-zip.ini && a2enmod rewrite",
      "curl -fsSL -o owncloud.tar.bz2 \"https://download.owncloud.org/community/owncloud-${OWNCLOUD_VERSION}.tar.bz2\" && curl -fsSL -o owncloud.tar.bz2.asc \"https://download.owncloud.org/community/owncloud-${OWNCLOUD_VERSION}.tar.bz2.asc\" && export GNUPGHOME=\"$(mktemp -d)\" && gpg --keyserver ha.pool.sks-keyservers.net --recv-keys E3036906AD9F30807351FAC32D5D5E97F6978A26 && gpg --batch --verify owncloud.tar.bz2.asc owncloud.tar.bz2 && rm -r \"$GNUPGHOME\" owncloud.tar.bz2.asc && tar -xjf owncloud.tar.bz2 -C /usr/src/ && rm owncloud.tar.bz2",
      "mkdir -p /var/www/html && echo 'if [ ! -e '/var/www/html/version.php' ]; then' >> /bin/everyboot && echo '    cd /var/www/html' >> /bin/everyboot && echo '    tar cf - --one-file-system -C /usr/src/owncloud . | tar xf -' >> /bin/everyboot && echo '    chown -R www-data /var/www' >> /bin/everyboot && echo 'fi' >> /bin/everyboot && echo 'echo \"Installing ownCloud cronjob\"' >> /bin/firstboot && echo 'crontab -u www-data -l > /tmp/cron' >> /bin/firstboot && echo 'echo \"*/15  *  *  *  * php -f /var/www/owncloud/cron.php\" >> /tmp/cron' >> /bin/firstboot && echo 'crontab -u www-data /tmp/cron' >> /bin/firstboot && echo 'rm /tmp/cron' >> /bin/firstboot && apt-get autoremove -y && apt-get clean -y && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*"
    ],
    "workdir": [],
    "from": "whatwedo/base:latest",
    "env": {
      "APACHE_RUN_USER": "www-data",
      "APACHE_RUN_GROUP": "www-data",
      "APACHE_LOG_DIR": "/var/log/apache2",
      "APACHE_PID_FILE": "/var/run/apache2.pid",
      "APACHE_RUN_DIR": "/var/run/apache2",
      "APACHE_LOCK_DIR": "/var/lock/apache2",
      "OWNCLOUD_VERSION": "9.0.1"
    },
    "copy": "files/supervisord/apache.conf /etc/supervisor/conf.d/apache.conf",
    "label": "ch.whatwedo.image.base=\"whatwedo/owncloud\""
  },
  "source_repository_url": "https://github.com/whatwedo/docker-base-images.git",
  "source_repository_type": "git",
  "source_repository_provider": "github",
  "source_repository_web_url": "https://github.com/whatwedo/docker-base-images",
  "docker_repository": "whatwedo/owncloud",
  "docker_image": "whatwedo/owncloud",
  "parameters_schema": {
    "APACHE_RUN_USER": {
      "default": "www-data",
      "type": "string",
      "mapping": "environment_variable"
    },
    "APACHE_RUN_GROUP": {
      "default": "www-data",
      "type": "string",
      "mapping": "environment_variable"
    },
    "APACHE_LOG_DIR": {
      "default": "/var/log/apache2",
      "type": "string",
      "mapping": "environment_variable"
    },
    "APACHE_PID_FILE": {
      "default": "/var/run/apache2.pid",
      "type": "string",
      "mapping": "environment_variable"
    },
    "APACHE_RUN_DIR": {
      "default": "/var/run/apache2",
      "type": "string",
      "mapping": "environment_variable"
    },
    "APACHE_LOCK_DIR": {
      "default": "/var/lock/apache2",
      "type": "string",
      "mapping": "environment_variable"
    },
    "OWNCLOUD_VERSION": {
      "default": "9.0.1",
      "type": "string",
      "mapping": "environment_variable"
    },
    "exposed_ports": {
      "default": [
        80,
        443
      ],
      "type": "json_array"
    }
  },
  "type": "docker",
  "docker_name": "whatwedo/owncloud",
  "revision": "latest",
  "uris": [
    "https://hub.docker.com/r/whatwedo/owncloud",
    "https://hub.docker.com/v2/repositories/whatwedo/owncloud",
    "https://github.com/whatwedo/docker-base-images.git"
  ],
  "labels": [
    "Docker",
    "Binding/Provider/HP",
    "Type/Middleware/Runtime/PHP",
    "Type/Middleware/Web Server/Apache HTTP Server"
  ],
  "info_url": "https://hub.docker.com/r/whatwedo/owncloud",
  "requires": [
    {
      "kind": "host",
      "label": "Docker Engine"
    }
  ],
  "latest": true,
  "gatherbase_origin": "docker-hub"
}