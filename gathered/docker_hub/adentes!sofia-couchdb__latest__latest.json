{
  "dockerhub": {
    "web_url": "https://hub.docker.com/r/adentes/sofia-couchdb",
    "repository_url": "https://hub.docker.com/v2/repositories/adentes/sofia-couchdb",
    "tags_url": "https://hub.docker.com/v2/repositories/adentes/sofia-couchdb/tags",
    "dockerfile_url": "https://hub.docker.com/v2/repositories/adentes/sofia-couchdb/dockerfile",
    "autobuild_url": "https://hub.docker.com/v2/repositories/adentes/sofia-couchdb/autobuild",
    "user": "adentes",
    "name": "sofia-couchdb",
    "namespace": "adentes",
    "status": 1,
    "is_private": false,
    "is_automated": true,
    "star_count": 0,
    "pull_count": 60,
    "last_updated": "2016-10-17T08:30:46.979796Z",
    "permissions": {
      "read": true,
      "write": false,
      "admin": false
    },
    "tags": [
      {
        "name": "latest",
        "full_size": 124748406,
        "id": 3342383,
        "repository": 732631,
        "creator": 556503,
        "last_updater": 556503,
        "last_updated": "2016-10-17T08:30:46.672912Z",
        "image_id": null,
        "v2": true,
        "platforms": [
          5
        ]
      }
    ],
    "build_name": "adentes-org/sofia-db"
  },
  "name": "adentes/sofia-couchdb Docker container",
  "description": " Docker container for starting a pre-configured couchdb for sofia",
  "readme": "#SOFIA Database :\n\nUse docker-compose to fired up the DB\n\n## Setup\n```\ngit clone https://github.com/adentes-org/sofia-db.git && cd sofia-db\n#Edit docker-compose.yml to reflect your settings (For exemple your hostname)\n```\n## Start (with caddy for SSL termination)\n\n```\ndocker-compose up -d\n#The first run can take time since it \"compile\" the sofia app to make it avaible in the db\n#Be aware that your ssl certificate auto-generated by caddy/letsencryt is located under caddy/data so be sure to keep it safe and backup \n```\n\n## Start only db\n```\ndocker-compose up -d couchdb\n``` \n \n## Update admin app on running DB \n(to be executed in the updated couchdb folder)\n```\nexport HOST=https://username:userpass@my.db.host\n./scripts/install-admin-app.sh $HOST sofia-admin\n``` \nNB: docker-compose install  https://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&uact=8&ved=0ahUKEwiSwazumdLLAhXD0hoKHU8NCJAQFggsMAE&url=https%3A%2F%2Fdocs.docker.com%2Fcompose%2Finstall%2F&usg=AFQjCNHYRp2Dlli1ZbdYel8gXaVdYwgwUw\n\nIf you need any dns name : http://nip.io/\n",
  "dockerfile": "FROM klaemo/couchdb:1.6\nMAINTAINER Antoine GIRARD <antoine.girard@sapk.fr>\n\nADD scripts /scripts\n\n#RUN apt-get update -y -qq && apt-get install -y --no-install-recommends netcat pwgen git nodejs \\\n# && npm install -g gulp bower-installer && ln -s /usr/bin/nodejs /usr/bin/node \\\n# && apt-get clean && rm -rf /var/lib/apt/lists/*\nRUN apt-get update -y -qq && apt-get install -y --no-install-recommends netcat pwgen git \\\n && apt-get clean && rm -rf /var/lib/apt/lists/*\n\nRUN sed -e 's/^database_dir = .*$/database_dir = \\/data/' -i /usr/local/etc/couchdb/default.ini && \\\n    sed -e 's/^view_index_dir = .*$/view_index_dir = \\/data/' -i /usr/local/etc/couchdb/default.ini && \\\n    echo '_default = [{db_fragmentation, \"70%\"}, {view_fragmentation, \"60%\"}]' >> /usr/local/etc/couchdb/default.ini && \\\n    chmod +x /scripts/*.sh && touch /.firstrun\n#[compactions] is at the end of file so simply append\n\n# Command to run\nENTRYPOINT [\"/scripts/run.sh\"]\n#CMD [\"\"]\n\n# Expose listen port\nEXPOSE 5984\n\n# Expose our data, logs and configuration volumes\nVOLUME [\"/data\"]\n",
  "dockerfile_json": {
    "add": [
      {
        "source": "scripts",
        "dest": "/scripts"
      }
    ],
    "expose": [
      5984
    ],
    "volume": [
      "[\"/data\"]"
    ],
    "run": [
      "apt-get update -y -qq && apt-get install -y --no-install-recommends netcat pwgen git  && apt-get clean && rm -rf /var/lib/apt/lists/*",
      "sed -e 's/^database_dir = .*$/database_dir = \\/data/' -i /usr/local/etc/couchdb/default.ini &&     sed -e 's/^view_index_dir = .*$/view_index_dir = \\/data/' -i /usr/local/etc/couchdb/default.ini &&     echo '_default = [{db_fragmentation, \"70%\"}, {view_fragmentation, \"60%\"}]' >> /usr/local/etc/couchdb/default.ini &&     chmod +x /scripts/*.sh && touch /.firstrun"
    ],
    "workdir": [],
    "from": "klaemo/couchdb:1.6",
    "maintainer": "Antoine GIRARD <antoine.girard@sapk.fr>",
    "entrypoint": "[\"/scripts/run.sh\"]"
  },
  "source_repository_url": "https://github.com/adentes-org/sofia-db.git",
  "source_repository_type": "git",
  "source_repository_provider": "github",
  "source_repository_web_url": "https://github.com/adentes-org/sofia-db",
  "docker_repository": "adentes/sofia-couchdb",
  "docker_image": "adentes/sofia-couchdb",
  "parameters_schema": {
    "exposed_ports": {
      "default": [
        5984
      ],
      "type": "json_array"
    }
  },
  "type": "docker",
  "docker_name": "adentes/sofia-couchdb",
  "revision": "latest",
  "uris": [
    "https://hub.docker.com/r/adentes/sofia-couchdb",
    "https://hub.docker.com/v2/repositories/adentes/sofia-couchdb",
    "https://github.com/adentes-org/sofia-db.git"
  ],
  "labels": [
    "Docker",
    "Type/Middleware/Data Store/Document-oriented/CouchDB"
  ],
  "info_url": "https://hub.docker.com/r/adentes/sofia-couchdb",
  "requires": [
    {
      "kind": "host",
      "label": "Docker Engine"
    }
  ],
  "latest": true,
  "gatherbase_origin": "docker-hub"
}