{
  "name": "nexus Chef cookbook",
  "chef_cookbook_name": "nexus",
  "revision": "1.0.0",
  "uris": [
    "https://supermarket.chef.io/cookbooks/nexus",
    "https://supermarket.chef.io/cookbooks/nexus/download",
    "https://supermarket.chef.io/cookbooks/nexus/versions/1.0.0",
    "https://supermarket.chef.io/cookbooks/nexus/versions/1.0.0/download",
    "https://supermarket.chef.io/api/v1/cookbooks/nexus/versions/1.0.0",
    "https://supermarket.chef.io/api/v1/cookbooks/nexus",
    "https://supermarket.chef.io/api/v1/cookbooks/nexus/versions/1.0.0/download"
  ],
  "labels": [
    "Chef cookbook",
    "Utilities",
    "Executable/Script/Chef Cookbook",
    "Binding/Region/North America/US",
    "Mode/Executable/Script/Chef Cookbook"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/nexus",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/nexus/versions/1.0.0/download",
  "deprecated": false,
  "created": "2012-08-29T01:32:29.000Z",
  "updated": "2014-06-05T16:55:29.000Z",
  "description": "Installs/Configures nexus",
  "maintainer": {
    "name": "reset",
    "email": "kallan@riotgames.com"
  },
  "license": "Apache 2.0",
  "chef_foodcritic_failure": null,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 17,
  "downloads_count": 31417101,
  "downloads_count_revision": 1253632,
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "Description\n===========\n\nInstalls and configures Sonatype Nexus. Can optionally configure and install an nginx installation or provide\nSSL access to the Jetty server that runs Nexus.\n\nRequirements\n============\n\nPlatform: \n\n* Ubuntu\n* CentOS\n\nThe following cookbooks are dependencies:\n\n* java\n* ark\n* nginx\n* artifact\n* build-essential\n\nRecipes\n=======\n\n* default - installs and configures a Nexus installation. Will use either `nexus::nginx` or `nexus::jetty` when corresponding `nexus::ssl::nginx` or \n`nexus::ssl:jetty` flags are set.\n* nginx - installs and configures an nginx server that will proxy the Nexus server with SSL\n* jetty - creates a directory and writes a keystore file to the node. The default recipe will call this when the `nexus::ssl::jetty` is true,\nwhich will add more customization to the jetty.xml file for Nexus.\n* cli - installs packages at compilation time and uses `chef_gem` to instal the nexus_cli gem. Primarily used by the LWRPs of this cookbook.\n* group, hosted, proxy - recipe abstractions that get the appropriate entry from the nexus data bag and create repositories on the Nexus server.\n\nUsage\n=====\n\nSimply add the `nexus::default` recipe to the node where you want Sonatype Nexus installed.\n\nData Bags\n=========\n\nAs of version 1.0.0, this cookbook now uses fewer, more standardized Encrypted Data Bags. Following the style used \nat Riot, Data bags are created per Chef Environment and default to a data bag item named \"_wildcard\" if there is no environmental\ndata bag item. \n\nThe biggest changes to v1.0.0 are the combination of the Nexus credentials, license, and *_repositories data bags into one.\n\nBelow is how you should create your data bags for using this cookbook:\n    \n    knife data bag create nexus _wildcard -c your/chef/config --secret-file your/encrypted_data_bag_key\n\n    {\n      \"id\": \"_wildcard\",\n      \"credentials\": {\n        \"default_admin\": {\n          \"username\": \"admin\",\n          \"password\": \"admin123\"\n        },\n        \"updated_admin\": {\n          \"username\": \"admin\",\n          \"password\": \"new_password\"\n        },\n        \"keystore\": {\n          \"password\": \"some_password\",\n          \"key_password\": \"some_password\",\n          \"trust_password\": \"some_password\"\n        }\n      },\n      \"license\": {\n        \"file\": \"base64d license file\"\n      },\n      \"group_repositories\": {\n        \"repositories\": [\n          {\n            \"name\": \"My Group\",\n            \"add\": [\n              \"Releases\",\n              \"Snapshots\"\n            ]\n          }\n        ]\n      },\n      \"hosted_repositories\": {\n        \"repositories\": [\n          {\n            \"name\": \"Hosted Files\"\n          },\n          {\n            \"name\": \"More Hosted Files\",\n            \"publisher\": true\n          }\n        ]\n      },\n      \"proxy_repositories\": {\n        \"repositories\": [\n          {\n            \"name\": \"Proxy Repo\",\n            \"url\": \"http://some-remote-repository\"\n          },\n          {\n            \"name\": \"Another Proxy Repo\",\n            \"url\": \"http://some-other-remote-repository\",\n            \"subscriber\": true,\n            \"publisher\": true\n          }\n        ]\n      }\n    }\n\nThe `nexus_ssl_files` data bag replaces the old `ssl_certificate` data bag item. The cookbook is also set up to look for\nChef environment named items inside this data bag. This data bag should contain entries for either a certificate and key combo\n(for nginx) or a keystore (Jetty).\n\nOnce the data bag item is loaded for the environment, the attribute [:nexus][:ssl_certificate][:key] is used to find an entry. The\ndefault value for the cookbook is the node's fqdn. Using this format, you can have a Chef environment with multiple Nexus servers that\nmay need to use different SSL certificates.\n\nYour data bag items should look like the following:\n\n    knife data bag create nexus_ssl_files _wildcard -c your/chef/config --secret-file your/encrypted_data_bag_key\n\n    {\n      \"id\": \"_wildcard\",\n      \"fully-qualified-domain-name\": {\n        \"crt\": \"base64-encoded-ssl-certificate\",\n        \"key\": \"base64-encoded-private-key\"\n      },\n      \"another-fully-qualified-domain-name\": {\n        \"keystore\": \"base64-encoded-keystore-file\"\n      }\n    }\n\nThe `certificates` data bag item has been removed.\n\nResources/Providers\n===================\n\n## nexus\\_plugin\n\nInstalls a Nexus plugin by creating a symlink of a named plugin from the Nexus' `optional-plugins` directory into the\nNexus' `plugin-repositroy` directory.\n\n### Actions\nAction  | Description         | Default\n------- |-------------        |---------\ninstall | Installs the plugin | Yes\n\n### Attributes\nAttribute  | Description                   | Type    | Default\n---------  |-------------                  |-----    |--------\nname       | Name of the plugin to install | String  | name\n\n## nexus\\_repository\n\nResource provider for creating and deleting Neuxs repositories.\n\n### Actions\nAction  | Description              | Default\n------- |-------------             |---------\ncreate  | Creates a new repository | Yes\ndelete  | Deletes a repository     |\nupdate  | Updates a repository     | \n\n### Attributes\nAttribute        | Description                                                         | Type                  | Default\n---------        |-------------                                                        |-----                  |--------\nname             | Name of the repository to create/delete                             | String                | name\ntype             | The type of repository - either \"hosted\" or \"proxy\".                | String                |\nurl              | The url used for a proxy repository.                                | String                |\npublisher        | Whether this repository is a publisher of artifacts.                | TrueClass, FalseClass |\nsubscriber       | Whether this repository is a subscriber to artifacts.               | TrueClass, FalseClass |\npreemptive_fetch | Whether this (proxy) repository should preemptively fetch artifacts | TrueClass, FalseClass |\n\n## nexus\\_settings\n\nResource provider for modifying the global Nexus settings.\n\n### Actions\nAction  | Description                          | Default\n------- |-------------                         |---------\nupdate  | Updates a global Nexus setting to a new value. | Yes\n\n### Attributes\nAttribute  | Description                                  | Type                          | Default\n---------  |-------------                                 |-----                          |--------\npath       | The element of the settings that is going to be changed. | String                        | name\nvalue      | The new value to update the path to.                     | String, TrueClass, FalseClass |\n\n## nexus\\_user\n\nResource provider for creating, deleting, and modifying Nexus user accounts.\n\n### Actions\nAction          | Description                                    | Default\n-------         |-------------                                   |---------\ncreate          | Creates a new Nexus user.                      | Yes\ndelete          | Deletes a Nexus user.                          | \nupdate          | Updates a Nexus user with updated information  |\nchange_password | Changes a Nexus user's password                |\n\n### Attributes\nAttribute    | Description                                              | Type                  | Default\n---------    |-------------                                             |-----                  |--------\nusername     | The element of the settings that is going to be changed. | String                | name\nfirst_name   | The first name of the user.                              | String                |\nlast_name    | The last name of the user.                               | String                |\nemail        | The email address of the user.                           | String                |\nenabled      | Whether or not this user is enabled or disabled.         | TrueClass, FalseClass |\npassword     | The current (or new) password of the user.               | String                |\nold_password | The old password of the user, used in change_password.   | String                |\nroles        | A list of roles (permissions) to apply to the user.      | Array                 |\n\n## nexus\\_license\n\nResource provider for installing a license file into Nexus. \n\n### Actions\nAction   | Description                                       | Default\n-------  |-------------                                      |---------\ninstall  | Installs a license file into the server.          | Yes\n\n### Attributes\nAttribute  | Description                                                       | Type                          | Default\n---------  |-------------                                                      |-----                          |--------\nname       | Some useful information about the license. Similar to ruby_block. | String                        | name\n\n## nexus\\_proxy\n\nResource provider for manipulating the Nexus' settings for Smart Proxy.\n\n### Actions\nAction              | Description                                    | Default\n-------             |-------------                                   |---------\nenable              | Enables the Smart Proxy functionality.         | Yes\ndisable             | Disables the Smart Proxy functionality.        | \nadd_trusted_key     | Adds a trusted key to the server.              | \ndelete_trusted_key  | Removes a trusted key from the server.         | \n\n\n### Attributes\nAttribute    | Description                                                                    | Type                  | Default\n---------    |-------------                                                                   |-----                  |--------\nname         | Some useful information about the proxy. Similar to ruby_block.                | String                | name\nid           | Used for delete_trusted_key. The id of the key to delete.                      | String                |\nhost         | The host to use for Smart Proxy. Used for enable.                              | String                |\nport         | The port to use for Smart Proxy. Used for enable.                              | Fixnum                |\ncertificate  | The certificate of another Nexus to add. Used for add_trusted_key.             | String                |\ndescription  | The description of the other Nexus. Used for add_trusted_key.                  | String                |\n\n\nAttributes\n==========\n\nThe following attributes are set under the `nexus` namespace:\n\n* version - sets the version to install\n* user - sets the user to install nexus under\n* group - sets the group to install nexus under\n* url - sets the URL where the nexus package is located\n* checksum - The SHA256 checksum of the Nexus installation package\n* port - the port to run nexus on\n* host - the hostname to use for nexus\n* context_path - the context path under which Nexus is running under. ie. \"/nexus\" #=> \"http://localhost:8081/nexus\"\n* name - the name of the Nexus\n* bundle_name - the name of the internal folder of the Nexus tar. Usually nexus-{professional or nothing}-{VERSION}\n* home - the installation directory for nexus. Uses name.\n* current_path - the above home/current/bundle_name. The artifact_deploy resource uses the `current` symlink to denote the currently installed version.\n* pid_dir - the pid directory defined in the nexus.erb template. Saves a pid in the `pids` directory created by the artifact_deploy resource.\n* conf_dir - the above home/conf\n* bin_dir - the above home/bin\n* work_dir - the above path/sonatype-work/nexus\n* plugins - an Array of Nexus plugins that will be installed by the default recipe.\n\nThe following attribute is set under the `nexus::jetty` namespace:\n\n* loopback - if true, the jetty.xml.erb will be written to disable access to anything but localhost. Useful for enabling access to Nexus via Jetty's HTTP connection.\n\nThe following attributes are set under the `nexus::ssl` namespace and are related to the SSL settings of Nexus:\n\n* jetty - if true, the default recipe will configure Nexus to use Jetty's SSL connection.\n* nginx - if true, the default recipe will include the `nexus::nginx` recipe, installing and configuring an nginx SSL proxy server.\n* jetty_keystore_path - used for configuring where on the machine the keystore file will be that Jetty will use for its SSL configuration.\n* verify - if true, the calls in the chef_nexus.rb library will verify SSL connections. This is useful to disable when working with a self-signed certificate.\n* port - the default port for either Jetty or nginx SSL connections.\n\n* ssl\\_certificate::key - the key to look for in the `nexus::ssl_certificate` encrypted data bag.\n\nThe following attributes are set under `nexus::nginx` namespace:\n\n* server\\_name - the name of the nginx server.\n* server::options - used to generate options in the `server` section of the nginx conf file.\n* proxy::options - used to generate proxy options in the `location` section of the nginx conf file.\n\nThe following attributes are set under the `nexus::cli` namespace:\n\n* url - The url that the nexus_cli gem will connect to. The default recipe uses this to configure itself, so localhost.\n* repository - The repository that nexus_cli gem will use for push / pull operations. A requirement of nexus_cli, not used by this cookbook.\n* packages - required packages to install for using the `chef_gem \"nexus_cli\"`\n\nThe following attributes are not fully supported but are under the `nexus::mount` namespace:\n\n* nfs::enable - enables an NFS mount.\n* nfs::mount\\_point - the local path to mount an NFS drive to.\n* nfs::device\\_path - the remote server where the NFS drive is located.\n\nLicense and Author\n==================\n\nAuthor:: Kyle Allan (<kallan@riotgames.com>)\nBased on work by Joseph Holsten (<joseph@josephholsten.com>), Charles Scott (<connaryscott@gmail.com>),\nGreg Schueler (<greg.schueler@gmail.com>), and Seth Chisamore (<schisamo@opscode.com>)\n\nCopyright 2013, Riot Games\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.",
  "requires": [
    {
      "kind": "host",
      "label": "ubuntu",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "centos",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/java",
      "revision": "~> 1.9.0",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/nginx",
      "revision": "~> 1.2.0",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/artifact",
      "revision": "~> 1.2.0",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/build-essential",
      "revision": ">= 0.0.0",
      "self_resolve": true
    }
  ]
}