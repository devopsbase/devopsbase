{
  "name": "peopletools Chef cookbook",
  "chef_cookbook_name": "peopletools",
  "revision": "2.1.1",
  "uris": [
    "https://supermarket.chef.io/cookbooks/peopletools",
    "https://supermarket.chef.io/cookbooks/peopletools/download",
    "https://supermarket.chef.io/cookbooks/peopletools/versions/2.1.1",
    "https://supermarket.chef.io/cookbooks/peopletools/versions/2.1.1/download",
    "https://supermarket.chef.io/api/v1/cookbooks/peopletools/versions/2.1.1",
    "https://supermarket.chef.io/api/v1/cookbooks/peopletools",
    "https://supermarket.chef.io/api/v1/cookbooks/peopletools/versions/2.1.1/download"
  ],
  "labels": [
    "Chef cookbook",
    "Other",
    "Executable/Script/Chef Cookbook",
    "Mode/Executable/Script/Chef Cookbook"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/peopletools",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/peopletools/versions/2.1.1/download",
  "deprecated": false,
  "created": "2016-02-29T14:40:30.087Z",
  "updated": "2016-10-14T10:06:35.666Z",
  "description": "Provides resources to install and configure an Oracle PeopleTools stack",
  "maintainer": {
    "name": "universityofderby",
    "email": "serverteam@derby.ac.uk"
  },
  "license": "Apache 2.0",
  "chef_foodcritic_failure": false,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 0,
  "downloads_count": 2907,
  "downloads_count_revision": 41,
  "repository_url": "https://github.com/universityofderby/chef-peopletools",
  "issues_url": "https://github.com/universityofderby/chef-peopletools/issues",
  "chef_source_url": "https://github.com/universityofderby/chef-peopletools",
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "peopletools Chef cookbook\n=========================\nThe peopletools cookbook provides resources and recipes to install and configure an Oracle PeopleTools stack.  This is based on the Puppet code and archive files in the Oracle DPK bundle (starting with 8.55.01).\n\nRequirements\n------------\n- Chef 12.5 or higher\n- Ruby 2.0 or higher (preferably from the Chef full-stack installer)\n- Network accessible package repositories\n\nPlatform Support\n----------------\nThe following platforms have been tested with Test Kitchen:\n- CentOS\n- Red Hat\n\nDependencies\n------------\nThis cookbook depends on the following cookbooks.\n- `ark`\n\nUsage\n-----\n#### metadata.rb\nInclude `peopletools` as a dependency in your cookbook's `metadata.rb`.\n\n```\ndepends 'peopletools', '~> 2.1.1'\n```\n\nCopy the tgz archive files for Oracle Inventory, JDK, PS Home, Tuxedo, WebLogic, etc from the Oracle delivered DPK to a repository such as Artifactory.  Configure the `['peopletools']['archive_repo']` attribute to point to the repository location.  Use the resources to deploy and configure PeopleTools.\n\nResources\n---------\n#### Config:\n\n#### `peopletools_tnsnames`\nResource to configure tnsnames.ora.\n\n##### properties\n- `db_host`: Database host. Required.\n- `db_name`: Database name. Required.\n- `db_port`: Database port. Default: '1521'.\n- `db_protocol`: Database protocol (SDP | TCP | TCPS). Default: 'TCP'.\n- `db_service_name` Database service name. Default: db_name.\n- `group`: tnsnames.ora group. Default: 'oinstall'.\n- `mode`: tnsnames.ora mode. Default: '0644'.\n- `oracle_client_version`: Oracle Client version. Name Property.\n- `owner`: tnsnames.ora owner. Default: 'oracle'.\n- `path`: tnsnames.ora path. Default: \"/opt/oracle/psft/pt/oracle-client/#{oracle_client_version}/network/admin\".\n- `server`: Server type (DEDICATED | SHARED). Default: 'DEDICATED'.\n\n##### actions\n- `create`\n\n#### `peopletools_appserver_domain`\nResource to configure appserver domain.\n\n##### properties\n- `config_settings`: Config settings. Default: {}.\n- `domain_name`: Domain name. Name Property.\n- `domain_user`: Domain user. Default: 'psadm2'.\n- `env_settings`: Environment settings. Default: [].\n- `feature_settings`: Feature settings. Default: [].\n- `psadmin_path`: Path to psadmin. Default: ::File.join(ps_home, 'appserv/psadmin').\n- `port_settings`: Port settings %w(WSL_PORT JSL_PORT JRAD_PORT). Default: [].\n- `ps_home`: PS Home. Required.\n- `ps_cfg_home`: PS Config Home. Required.\n- `startup_settings`: Startup settings. Required.\n- `template_type`: Template type (small | medium | large | developer). Default: 'small'.\n\n##### actions\n- `create` (Default)\n- `boot`\n- `shutdown`\n\n#### Deployment:\n\n#### `peopletools_inventory`\nResource to deploy Oracle Inventory.\n\n##### properties\n- `inventory_location`: Inventory location. Default: '/opt/oracle/psft/db/oraInventory'.\n- `inventory_user`: Inventory user. Default: 'oracle'.\n- `inventory_group`: Inventory group. Default: 'oinstall'.\n- `inventory_minimum_ver`: Inventory minimum version. Default: '2.1.0.6.0'.\n- `inventory_saved_with`: Inventory saved with version. Default: '13.2.0.0.0'.\n\n##### actions\n- `create`\n\n#### `peopletools_jdk`\nResource to deploy Oracle JDK.\n\n##### properties\n- `archive_url`: JDK archive file URL. Required.\n- `deploy_location`: Deploy location. Default: \"/opt/oracle/psft/pt/jdk#{version}\".\n- `deploy_user`: Deploy user. Default: 'psadm1'.\n- `deploy_group`: Deploy group. Default: 'oinstall'.\n- `version`: JDK version. Name Property.\n\n##### actions\n- `deploy`\n\n#### `peopletools_oracle_client`\nResource to deploy Oracle Client.\n\n##### properties\n- `archive_url`: Oracle Client archive file URL. Required.\n- `deploy_location`: Deploy location. Default: \"/opt/oracle/psft/pt/oracle-client/#{version}\".\n- `deploy_user`: Deploy user. Default: 'oracle'.\n- `deploy_group`: Deploy group. Default: 'oinstall'.\n- `home_name`: Oracle Client inventory home name. Default: 'OraClient12cHome'.\n- `inventory_location`: Inventory location. Default: '/opt/oracle/psft/db/oraInventory'.\n- `inventory_user`: Inventory user. Default: 'oracle'.\n- `inventory_group`: Inventory group. Default: 'oinstall'.\n- `tmp_dir`: Temporary directory for extracting archive. Default: \"/opt/oracle/psft/pt/oracle-client/#{version}/oc_tmp\".\n- `version`: Oracle Client version. Name Property.\n\n##### actions\n- `deploy`\n\n#### `peopletools_ps_app_home`\nResource to deploy Oracle PS App Home.\n\n##### properties\n- `archive_url`: PS App Home archive file URL. Required.\n- `db_platform`: Database platform (ORACLE | DB2ODBC | DB2UNIX). Default: 'ORACLE'.\n- `deploy_location`: Deploy location. Default: '/opt/oracle/psft/pt/ps_app_home'.\n- `deploy_user`: Deploy user. Default: 'psadm3'.\n- `deploy_group`: Deploy group. Default: 'appinst'.\n- `extract_only`: Extract archive only (true | false). Default: false.\n- `version`: PS App Home version. Name Property.\n\n##### actions\n- `deploy`\n\n#### `peopletools_ps_home`\nResource to deploy Oracle PS Home.\n\n##### properties\n- `archive_url`: PS Home archive file URL. Required.\n- `db_platform`: Database platform (ORACLE | DB2ODBC | DB2UNIX). Default: 'ORACLE'.\n- `deploy_location`: Deploy location. Default: \"/opt/oracle/psft/pt/ps_home#{version}\".\n- `deploy_user`: Deploy user. Default: 'psadm1'.\n- `deploy_group`: Deploy group. Default: 'oinstall'.\n- `extract_only`: Extract archive only (true | false). Default: false.\n- `unicode_db`: Unicode database (true | false). Default: true.\n- `version`: PS Home version. Name Property.\n\n##### actions\n- `deploy`\n\n#### `peopletools_tuxedo`\nResource to deploy Oracle Tuxedo.\n\n##### properties\n- `archive_url`: Tuxedo archive file URL. Required.\n- `deploy_location`: Deploy location. Default: '/opt/oracle/psft/pt/bea/tuxedo'.\n- `deploy_user`: Deploy user. Default: 'psadm1'.\n- `deploy_group`: Deploy group. Default: 'oinstall'.\n- `home_name`: Oracle Client inventory home name. Default: 'OraTux1213Home'.\n- `inventory_location`: Inventory location. Default: '/opt/oracle/psft/db/oraInventory'.\n- `inventory_user`: Inventory user. Default: 'oracle'.\n- `inventory_group`: Inventory group. Default: 'oinstall'.\n- `tlisten_password`: Tuxedo listener password. Required.\n- `version`: Tuxedo version. Name Property.\n\n##### actions\n- `deploy`\n\n#### `peopletools_weblogic`\nResource to deploy Oracle WebLogic.\n\n##### properties\n- `archive_url`: WebLogic archive file URL. Required.\n- `deploy_location`: Deploy location. Default: '/opt/oracle/psft/pt/bea'.\n- `deploy_user`: Deploy user. Default: 'psadm1'.\n- `deploy_group`: Deploy group. Default: 'oinstall'.\n- `home_name`: Oracle Client inventory home name. Default: 'OraWL1213Home'.\n- `inventory_location`: Inventory location. Default: '/opt/oracle/psft/db/oraInventory'.\n- `inventory_user`: Inventory user. Default: 'oracle'.\n- `inventory_group`: Inventory group. Default: 'oinstall'.\n- `jdk_location`: JDK location. Default: \"/opt/oracle/psft/pt/jdk#{jdk_version}\".\n- `jdk_version`: JDK version. Required.\n- `tmp_dir`: Temporary directory for extracting archive. Default: '/opt/oracle/psft/pt/wl_tmp'.\n- `version`: WebLogic version. Name Property.\n\n##### actions\n- `deploy`\n\n#### Setup:\n\n#### `peopletools_bashrc`\nResource to configure .bashrc.\n\n##### properties\n- `cobol_dir`: COBOL directory. Default: '/opt/microfocus/cobol'.\n- `custom_commands`: Custom commands for .bashrc file. Default: [].\n- `db2_instance_user`: DB2 instance user. Optional.\n- `group`: .bashrc group. Default: 'oinstall'.\n- `mode`: .bashrc mode. Default: '0644'.\n- `oracle_client_version`: Oracle Client version. Required.\n- `oracle_home_dir`: Oracle home directory. Default: \"/opt/oracle/psft/pt/oracle-client/#{oracle_client_version}\".\n- `owner`: .bashrc owner. Name Property.\n- `path`: .bashrc path. Default: \"/home/#{owner}\".\n- `ps_app_home_dir`: PS App Home directory. Default: '/opt/oracle/psft/pt/ps_app_home'.\n- `ps_cfg_home_dir`: PS Config Home directory. Default: path.\n- `ps_cust_home_dir`: PS Custom Home directory. Default: \"#{path}/custom\".\n- `ps_home_dir`: PS Home directory. Default: \"/opt/oracle/psft/pt/ps_home#{ps_home_version}\".\n- `ps_home_version`: PS Home version. Required.\n- `tns_admin_dir`: TNS admin directory. Optional.\n- `tuxedo_dir`: Tuxedo directory. Default: \"/opt/oracle/psft/pt/bea/tuxedo/tuxedo#{tuxedo_version}\".\n- `tuxedo_version`: Tuxedo version. Required.\n\n##### actions\n- `create`\n\nExamples\n--------\n#### Application server\n```\n# users/groups and system settings\ninclude_recipe \"#{cookbook_name}::system\"\n\n# oracle_client\npeopletools_oracle_client '12.1.0.2' do\n  archive_url \"#{node['peopletools']['archive_repo']}/pt-oracleclient-12.1.0.2.tgz\"\nend\n\n# tnsnames\npeopletools_tnsnames '12.1.0.2' do\n  db_host 'localhost'\n  db_name 'KITCHEN'\nend\n\n# ps_home\npeopletools_ps_home '8.55.05' do\n  archive_url \"#{node['peopletools']['archive_repo']}/pt-pshome8.55.05.tgz\"\nend\n\n# tuxedo\npeopletools_tuxedo '12.1.3.0.0' do\n  archive_url \"#{node['peopletools']['archive_repo']}/pt-tuxedo12.1.3.0.0.tgz\"\n  tlisten_password 'password'\nend\n\n# .bashrc\npeopletools_bashrc 'psadm2' do\n  oracle_client_version '12.1.0.2'\n  ps_home_version '8.55.05'\n  tuxedo_version '12.1.3.0.0'\nend\n\n# appserver domain\npeopletools_appserver_domain 'KIT' do\n  config_settings(\n    '[Domain Settings]' => ['Allow Dynamic Changes=Y', 'Domain ID=KIT'],\n    '[SMTP Settings]' => ['SMTPServer=localhost']\n  )\n  feature_settings [\n    '{PUBSUB}=No', # Pub/Sub Servers\n    '{QUICKSRV}=No', # Quick Server\n    '{QUERYSRV}=Yes', # Query Servers\n    '{JOLT}=Yes', # Jolt\n    '{JRAD}=No', # Jolt Relay\n    '{WSL}=Yes', # WSL\n    '{DBGSRV}=No', # PC Debugger\n    '{RENSRV}=No', # Event Notification\n    '{MCF}=No', # MCF Servers\n    '{PPM}=No', # Perf Collator\n    '{ANALYTICSRV}=No', # Analytic Servers\n    '{DOMAIN_GW}=No', # Domains Gateway\n    '{SERVER_EVENTS}=No' # Push Notifications\n  ]\n  ps_home '/opt/oracle/psft/pt/ps_home8.55.05'\n  ps_cfg_home '/home/psadm2'\n  startup_settings [\n    node['peopletools']['db_name'], # Database name\n    'ORACLE', # Database type\n    'opr_user_id', # OPR user ID\n    'opr_user_password', # OPR user password\n    'KIT', # Domain ID\n    '_____', # Add to path\n    'connect_id', # Connect ID\n    'connect_password', # Connect password\n    '_____', # Server name\n    'domain_connection_password', # Domain connection password\n    'ENCRYPT' # Encrypt|Noencrypt passwords\n  ]\nend\n```\n\n#### Web server\n```\n# users/groups and system settings\ninclude_recipe \"#{cookbook_name}::system\"\n\n# ps_home\npeopletools_ps_home '8.55.05' do\n  archive_url \"#{node['peopletools']['archive_repo']}/pt-pshome8.55.05.tgz\"\nend\n\n# jdk\npeopletools_jdk '1.7.0_95' do\n  archive_url \"#{node['peopletools']['archive_repo']}/pt-jdk1.7.0_95.tgz\"\nend\n\n# weblogic\npeopletools_weblogic '12.1.3' do\n  archive_url \"#{node['peopletools']['archive_repo']}/pt-weblogic12.1.3.tgz\"\n  jdk_version '1.7.0_95'\nend\n\n# .bashrc\npeopletools_bashrc 'psadm2' do\n  oracle_client_version '12.1.0.2'\n  ps_home_version '8.55.05'\n  tuxedo_version '12.1.3.0.0'\nend\n```\n\n#### System recipe\n```\n# groups\nnode.default['peopletools']['group']['psft_runtime']['name'] = 'psft'\nnode.default['peopletools']['group']['psft_app_install']['name'] = 'appinst'\nnode.default['peopletools']['group']['oracle_install']['name'] = 'oinstall'\nnode.default['peopletools']['group']['oracle_runtime']['name'] = 'dba'\n\n# user defaults\nnode.default['peopletools']['user']['home_dir'] = '/home'\nnode.default['peopletools']['user']['shell'] = '/bin/bash'\n\n# users\nnode.default['peopletools']['user']['psft_install']['name'] = 'psadm1'\nnode.default['peopletools']['user']['psft_runtime']['name'] = 'psadm2'\nnode.default['peopletools']['user']['psft_app_install']['name'] = 'psadm3'\nnode.default['peopletools']['user']['oracle']['name'] = 'oracle'\n\n# limits\nnode.default['peopletools']['limits']['group']['hard']['nofile'] = 65_536\nnode.default['peopletools']['limits']['group']['soft']['nofile'] = 65_536\nnode.default['peopletools']['limits']['group']['hard']['nproc'] = 65_536\nnode.default['peopletools']['limits']['group']['soft']['nproc'] = 65_536\nnode.default['peopletools']['limits']['group']['hard']['core'] = 'unlimited'\nnode.default['peopletools']['limits']['group']['soft']['core'] = 'unlimited'\nnode.default['peopletools']['limits']['group']['hard']['memlock'] = 500_000\nnode.default['peopletools']['limits']['group']['soft']['memlock'] = 500_000\nnode.default['peopletools']['limits']['group']['hard']['stack'] = 102_400\nnode.default['peopletools']['limits']['group']['soft']['stack'] = 102_400\nnode.default['peopletools']['limits']['user']['hard']['nofile'] = 131_072\nnode.default['peopletools']['limits']['user']['soft']['nofile'] = 131_072\nnode.default['peopletools']['limits']['user']['hard']['nproc'] = 131_072\nnode.default['peopletools']['limits']['user']['soft']['nproc'] = 131_072\nnode.default['peopletools']['limits']['user']['hard']['core'] = 'unlimited'\nnode.default['peopletools']['limits']['user']['soft']['core'] = 'unlimited'\nnode.default['peopletools']['limits']['user']['hard']['memlock'] = 500_000\nnode.default['peopletools']['limits']['user']['soft']['memlock'] = 500_000\n\n# sysctl parameters\nnode.default['sysctl']['params']['kernel']['core_uses_pid'] = 1\nnode.default['sysctl']['params']['kernel']['msgmnb'] = 65_538\nnode.default['sysctl']['params']['kernel']['msgmni'] = 1024\nnode.default['sysctl']['params']['kernel']['msgmax'] = 65_536\nnode.default['sysctl']['params']['kernel']['shmmax'] = 68_719_476_736\nnode.default['sysctl']['params']['kernel']['shmall'] = 4_294_967_296\nnode.default['sysctl']['params']['kernel']['shmmni'] = 4096\nnode.default['sysctl']['params']['net']['ipv4']['ip_local_port_range'] = '10000 65500'\nnode.default['sysctl']['params']['net']['ipv4']['tcp_keepalive_time'] = 90\nnode.default['sysctl']['params']['net']['ipv4']['tcp_timestamps'] = 1\nnode.default['sysctl']['params']['net']['ipv4']['tcp_window_scaling'] = 1\ninclude_recipe 'sysctl::apply'\n\n# groups\n[node['peopletools']['group']['psft_runtime']['name'],\n node['peopletools']['group']['psft_app_install']['name'],\n node['peopletools']['group']['oracle_install']['name'],\n node['peopletools']['group']['oracle_runtime']['name']\n].each do |g|\n  group g do\n    append true\n    action :create\n  end\nend\n\n# users\n{ node['peopletools']['user']['psft_install']['name'] => node['peopletools']['group']['oracle_install']['name'],\n  node['peopletools']['user']['psft_runtime']['name'] => node['peopletools']['group']['oracle_install']['name'],\n  node['peopletools']['user']['psft_app_install']['name'] => node['peopletools']['group']['psft_app_install']['name'],\n  node['peopletools']['user']['oracle']['name'] => node['peopletools']['group']['oracle_install']['name']\n}.each do |n, g|\n  user n do\n    gid g\n    home ::File.join(node['peopletools']['user']['home_dir'], n)\n    shell node['peopletools']['user']['shell']\n    supports manage_home: true\n  end\nend\n\n# psft_runtime group membership\ngroup node['peopletools']['group']['psft_runtime']['name'] do\n  append true\n  members [node['peopletools']['user']['psft_install']['name'],\n           node['peopletools']['user']['psft_runtime']['name'],\n           node['peopletools']['user']['psft_app_install']['name']\n          ]\n  action :create\nend\n\n# oracle_runtime group membership\ngroup node['peopletools']['group']['oracle_runtime']['name'] do\n  append true\n  members node['peopletools']['user']['oracle']['name']\n  action :create\nend\n\n# limits\n[node['peopletools']['group']['psft_runtime']['name'],\n node['peopletools']['group']['psft_app_install']['name']\n].each do |g|\n  limits_config g do\n    limits_array = []\n    node['peopletools']['limits']['group'].each do |t, a|\n      a.each do |i, v|\n        limits_array.push(domain: g, type: t, item: i, value: v)\n      end\n    end\n    limits limits_array\n    only_if { node['peopletools']['limits']['group'].respond_to?('each') }\n  end\nend\n\n# pt directory\ndirectory '/opt/oracle/psft/pt' do\n  owner node['peopletools']['user']['psft_install']['name']\n  group node['peopletools']['group']['oracle_install']['name']\n  mode 0755\n  recursive true\nend\n```\n\nTesting\n-------\n.kitchen.yml is configured to use vagrant with centos-7.2.  Two environment variables must be configured to set the `['peopletools']['archive_repo']` and `['peopletools']['ps_app_home']['archive_repo']` attribute values.  These should be set to the location of the repositories which hold the archive files for PeopleTools and ps_app_home.  They can be different locations if required, and should not contain a trailing forward slash.  E.g.\n\n```\nPEOPLETOOLS_ARCHIVE_REPO=http://artifacts.local.org/artifactory/software/oracle/peoplesoft/peopletools/8.55.05\nPEOPLETOOLS_PS_APP_HOME_ARCHIVE_REPO=http://artifacts.local.org/artifactory/software/oracle/peoplesoft/finance/9.2.017\n```\n\nContributing\n------------\n1. Fork the repository on GitHub.\n2. Create a named feature branch (like `add_component_x`).\n3. Write your change.\n4. Write tests for your change (this cookbook currently uses InSpec with Test Kitchen).\n5. Run the tests, ensuring they all pass.\n6. Submit a Pull Request using GitHub.\n\nLicense and Authors\n-------------------\nAuthor: Richard Lock\n\nCopyright 2016 University of Derby\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n<http://www.apache.org/licenses/LICENSE-2.0>\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n",
  "requires": [
    {
      "kind": "host",
      "label": "centos",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "redhat",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/ark",
      "revision": "~> 2.0",
      "self_resolve": true
    }
  ]
}