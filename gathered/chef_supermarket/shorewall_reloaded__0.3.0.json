{
  "name": "shorewall_reloaded Chef cookbook",
  "chef_cookbook_name": "shorewall_reloaded",
  "revision": "0.3.0",
  "uris": [
    "https://supermarket.chef.io/cookbooks/shorewall_reloaded",
    "https://supermarket.chef.io/cookbooks/shorewall_reloaded/download",
    "https://supermarket.chef.io/cookbooks/shorewall_reloaded/versions/0.3.0",
    "https://supermarket.chef.io/cookbooks/shorewall_reloaded/versions/0.3.0/download",
    "https://supermarket.chef.io/api/v1/cookbooks/shorewall_reloaded/versions/0.3.0",
    "https://supermarket.chef.io/api/v1/cookbooks/shorewall_reloaded",
    "https://supermarket.chef.io/api/v1/cookbooks/shorewall_reloaded/versions/0.3.0/download"
  ],
  "labels": [
    "Chef cookbook",
    "Other",
    "Executable/Script/Chef Cookbook",
    "Mode/Executable/Script/Chef Cookbook"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/shorewall_reloaded",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/shorewall_reloaded/versions/0.3.0/download",
  "deprecated": false,
  "created": "2015-02-10T20:09:17.818Z",
  "updated": "2015-02-10T21:21:56.184Z",
  "description": "Configures and install Shorewall",
  "maintainer": {
    "name": "demonccc",
    "email": "demonccc@gmail.com"
  },
  "license": "Apache 2.0",
  "chef_foodcritic_failure": false,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 1,
  "downloads_count": 1180156,
  "downloads_count_revision": 393409,
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "shorewall_reloaded Cookbook\n===========================\n\nDescription\n-----------\n\nThis cookbook is based on the original in the Chef Supermarket by [charles-dyfis-net](https://supermarket.chef.io/users/charles-dyfis-net) for CentOS.\n\n[Shorewall](http://shorewall.net/) is a rather comprehensive and easy-to-use abstraction layer on top of iptables.\n\nThis cookbook installs, configures and manages Shorewall.\n\nRequirements\n------------\n\n#### Chef\nTested on 11.12.8 but newer and older version should work just fine.\n\n#### Platform\nThe following platforms have been tested with this cookbook, meaning that the recipes run on these platforms without error:\n- `Ubuntu`\n- `Debian`\n\nCapabilities\n------------\n\nCreates pretty Shorewall configuration files intended to be aesthetically\ncomparable to hand-written ones.\n\nThe following is a typical example of output (in this case, for a rules file):\n\n    #\n    # Shorewall version 4 - Rules File\n    #\n    # For information on the settings in this file, type \"man shorewall-rules\"\n    #\n    # The manpage is also online at\n    # http://www.shorewall.net/manpages/shorewall-rules.html\n    #\n    ############################################################################################################################\n    #ACTION         SOURCE          DEST            PROTO   DEST    SOURCE          ORIGINAL        RATE            USER/   MARK\n    #                                                       PORT    PORT(S)         DEST            LIMIT           GROUP\n    #SECTION ESTABLISHED\n    #SECTION RELATED\n    SECTION NEW\n\n    # Allow all from VM host\n    ACCEPT          net:10.0.2.2    fw              -       -       -               -               -               -       -\n\n    # Incoming SSH to firewall\n    ACCEPT          all             fw              tcp     22      -               -               -               -       -\n\n    # Allow database load-balancer db1.vguest access to repmgr monitor\n    ACCEPT          lan:192.168.123.10 \\\n                                    fw              tcp     5480    -               -               -               -       -\n\nNote how line continuations are added as necessary to keep column alignment in place.\n\nAttributes\n----------\n\n#### shorewall_reloaded::default\n<table>\n  <tr>\n    <th>Key</th>\n    <th>Type</th>\n    <th>Description</th>\n    <th>Default</th>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['enabled']</tt></td>\n    <td>Boolean</td>\n    <td>Enable o disable Shorewall</td>\n    <td><tt>false</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['default']['options']</tt></td>\n    <td>String</td>\n    <td>Global start/restart/stop options</td>\n    <td><tt></tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['default']['wait_interface']</tt></td>\n    <td>String</td>\n    <td>If your Shorewall configuration requires detection of the ip address of a ppp interface, you must list such interfaces in this attribute to get Shorewall to wait until the interface is configured</td>\n    <td><tt>false</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['default']['startoptions']</tt></td>\n    <td>String</td>\n    <td>Start options</td>\n    <td><tt></tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['default']['restartoptions']</tt></td>\n    <td>String</td>\n    <td>Restart options</td>\n    <td><tt></tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['default']['initlog']</tt></td>\n    <td>String</td>\n    <td>Init Log. If it is /dev/null, will be used the STARTUP_LOG value defined in shorewall.conf</td>\n    <td><tt>/dev/null</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['default']['safestop']</tt></td>\n    <td>Numeric</td>\n    <td>Set this to 1 to cause '/etc/init.d/shorewall stop' to place the firewall in a safe state rather than to open it</td>\n    <td><tt>0</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['zones']</tt></td>\n    <td>Array</td>\n    <td>Zone settings</td>\n    <td><tt>[]</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['policy']</tt></td>\n    <td>Array</td>\n    <td>Policy settings</td>\n    <td><tt>[]</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['interfaces']</tt></td>\n    <td>Array</td>\n    <td>Interfaces settings</td>\n    <td><tt>[]</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['hosts']</tt></td>\n    <td>Array</td>\n    <td>Hosts settings</td>\n    <td><tt>[]</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['rules']</tt></td>\n    <td>Array</td>\n    <td>Rules settings</td>\n    <td><tt>[]</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['zones']</tt></td>\n    <td>Array</td>\n    <td>Zones settings</td>\n    <td><tt>[]</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['shorewall']['tunnels']</tt></td>\n    <td>Array</td>\n    <td>Tunnels settings</td>\n    <td><tt>[]</tt></td>\n  </tr>\n</table>\n\nFor more details, see the `attributes/default.rb` file.\n\nRecipes\n-------\n\n### shorewall_reloaded::default\nThis cookbook installs and configures Shorewall in the node.\n\nUsage\n-----\n\nJust include `shorewall_reloaded` in your node's `run_list`:\n\n```json\n{\n  \"name\":\"my_node\",\n  \"run_list\": [\n    \"recipe[shorewall_reloaded]\"\n  ]\n}\n```\n\nYou need to set the zones, policies, rules, zones, interfaces in order to manage Shorewall by using this cookbook.\n\nExamples:\n\n- Setting zones:\n```json\n\"shorewall\": {\n  \"zones\": [\n    { \"zone\": \"fw\", \"type\": \"firewall\" },\n    { \"zone\": \"lan\", \"type\": \"ipv4\" },\n    { \"zone\": \"net\", \"type\": \"ipv4\" }\n  ]\n}\n```\n- Setting policies:\n```json\n\"shorewall\": {\n  \"policy\": [\n    { \"source\": \"fw\", \"dest\": \"all\", \"policy\": \"ACCEPT\" },\n    { \"source\": \"lan\", \"dest\": \"fw\", \"policy\": \"REJECT\", \"log\": \"DEBUG\" },\n    { \"source\": \"all\", \"dest\": \"all\", \"policy\": \"REJECT\" }\n  ]\n}\n```\n- Setting interfaces\n```json\n\"shorewall\": {\n  \"interfaces\": [\n    { \"zone\": \"net\", \"interface\": \"eth0\", \"broadcast\": \"detect\", \"options\": \"tcpflags,nosmurfs,routefilter,logmartians\" },\n    { \"zone\": \"lan\", \"interface\": \"eth1\", \"broadcast\": \"detect\", \"options\": \"tcpflags,nosmurfs,routefilter,logmartians\" }\n  ]\n}\n```\n- Setting rules\n```json\n\"shorewall\": {\n  \"rules\": [\n    {\n      \"description\": \"Don't allow connection pickup from the net\",\n      \"action\": \"Invalid(DROP)\", \"source\": \"net\", \"dest\": \"all\"\n    },\n    {\n      \"description\": \"Accept DNS connections from the firewall to the network\",\n      \"action\": \"DNS(ACCEPT)\", \"source\": \"fw\", \"dest\": \"net\"\n    },\n    {\n      \"description\": \"Accept NTP connections from the firewall to the network\",\n      \"action\": \"NTP(ACCEPT)\", \"source\": \"fw\", \"dest\": \"net\"\n    },\n    { \n      \"description\": \"Incoming SSH to firewall\", \n      \"source\": \"all\", \"dest\": \"fw\", \"proto\": \"tcp\", \"dest_port\": 22, \"action\": \"ACCEPT\" \n    },\n    {\n      \"description\": \"Accept HTTP/HTTPS connections to internet\",\n      \"action\": \"Web(ACCEPT)\", \"source\": \"fw\", \"dest\": \"net\"\n    },\n    {\n      \"description\": \"Allow Ping from the local network\",\n      \"action\": \"Ping(ACCEPT)\", \"source\": \"loc\", \"dest\": \"fw\"\n    },\n    {\n      \"description\": \"Drop Ping from the \\\"bad\\\" net zone.. and prevent your log from being flooded..\",\n      \"action\": \"Ping(DROP)\", \"source\": \"net\", \"dest\": \"fw\"\n    },\n    {\n      \"description\": \"Drop Ping from the \\\"bad\\\" net zone.. and prevent your log from being flooded..\",\n      \"action\": \"ACCEPT\", \"source\": \"fw\", \"dest\": \"loc\", \"proto\": \"icmp\"\n    },\n    {\n      \"description\": \"Drop Ping from the \\\"bad\\\" net zone.. and prevent your log from being flooded..\",\n      \"action\": \"ACCEPT\", \"source\": \"fw\", \"dest\": \"net\", \"proto\": \"icmp\"\n    }\n  ]\n}\n```\n- Setting tunnels:\n```json\n\"shorewall\": {\n  \"tunnels\": [\n    { \"type\": \"ipsec\", \"zone\": \"net\", \"gateway\": \"0.0.0.0/0\", \"gateway_zones\": \"vpn\" }\n  ]\n}  \n```\n\nDevelopment\n-----------\n\n- Source hosted at [GitHub][repo]\n- Report issues/Questions/Feature requests on [GitHub Issues][issues]\n\nContributing\n------------\n\n1. Fork the repository on [Github][repo]\n3. Write your change\n4. Write tests for your change (if applicable)\n5. Run the tests, ensuring they all pass\n6. Submit a Pull Request using Github\n\nLicense and Authors\n-------------------\n\nAuthor:: Claudio Cesar Sanchez Tejeda <demonccc@gmail.com>\n\nCopyright:: 2014, Claudio Cesar Sanchez Tejeda\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n[repo]: https://github.com/demonccc/chef-shorewall_reloaded\n[issues]: https://github.com/demonccc/chef-shorewall_reloaded/issues\n",
  "requires": [
    {
      "kind": "host",
      "label": "debian",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "ubuntu",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    }
  ],
  "chef_recipes": {
    "shorewall_reloaded": "Configures and activates Shorewall firewall"
  }
}