{
  "name": "sumologic-collector Chef cookbook",
  "chef_cookbook_name": "sumologic-collector",
  "revision": "1.2.11",
  "uris": [
    "https://supermarket.chef.io/cookbooks/sumologic-collector",
    "https://supermarket.chef.io/cookbooks/sumologic-collector/download",
    "https://supermarket.chef.io/cookbooks/sumologic-collector/versions/1.2.11",
    "https://supermarket.chef.io/cookbooks/sumologic-collector/versions/1.2.11/download",
    "https://supermarket.chef.io/api/v1/cookbooks/sumologic-collector/versions/1.2.11",
    "https://supermarket.chef.io/api/v1/cookbooks/sumologic-collector",
    "https://supermarket.chef.io/api/v1/cookbooks/sumologic-collector/versions/1.2.11/download"
  ],
  "labels": [
    "Chef cookbook",
    "Other",
    "Executable/Script/Chef Cookbook",
    "Mode/Executable/Script/Chef Cookbook",
    "Type/Devopsware/Logging/Sumo Logic"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/sumologic-collector",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/sumologic-collector/versions/1.2.11/download",
  "deprecated": false,
  "created": "2013-06-24T19:51:08.000Z",
  "updated": "2016-07-19T08:14:26.607Z",
  "description": "Installs/Configures sumologic-collector",
  "maintainer": {
    "name": "ducha",
    "email": "yoway@sumologic.com"
  },
  "license": "Apache v2.0",
  "chef_foodcritic_failure": false,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 12,
  "downloads_count": 8448026,
  "downloads_count_revision": 4656,
  "repository_url": "https://github.com/SumoLogic/sumologic-collector-chef-cookbook",
  "issues_url": "https://github.com/SumoLogic/sumologic-collector-chef-cookbook/issues",
  "chef_source_url": "https://github.com/SumoLogic/sumologic-collector-chef-cookbook",
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "sumologic-collector Cookbook\n============================\nThis cookbook installs the Sumo Logic collector or updates an existing one if it was set to use [Local Configuration Mangement](https://service.sumologic.com/help/Default.htm#Using_Local_Configuration_File_Management.htm). Installation on Linux uses the shell script\ninstaller and on Windows uses the exe installer. Here are the steps it follows:\n\n1. Sets up `sumo.conf` and `sumo.json` (or the json folder). By default the standard Linux logs (system and security) are captured. On Windows the application and system event logs are captured.\n2. Downloads latest installer\n3. Runs installer\n4. Starts collector and registers with the Sumo Logic service\n\nFor collector update, the existing collector must have been switched to use Local Configuration Mangement - see section [Make the switch](https://service.sumologic.com/help/Default.htm#Using_Local_Configuration_File_Management.htm) for more details. The steps the cookbook follows:\n\n1. Verify that the collector folder exists.\n2. (Optional) Recreate `sumo.conf` and `sumo.json` (or the json files under the json folder).\n3. Restart the collector for the changes to take effect.   \n\nThe collector Requires outbound access to https://collectors.sumologic.com.\nEdit `sumo.json` (or the json files under the json folder) to add/edit/remove sources.  After installation you can\n[test connectivity](https://service.sumologic.com/ui/help/Default.htm#Testing_Connectivity.htm).\n\n\nNote\n------\nStarting from 19.107, there are 2 major extensions to SumoLogic collectors:\n* You can configure a collector's parameters from a set of json files under a common folder. Each of the json file will represent a source on that collector. Updates made to a json file will then be reflected on its corresponding source. Note that the format of this kind of file is **slightly different** from that of the traditional single json file (sumo.json) and they are **not** compatible. You also need to use the parameter `syncSources` instead of `sources` inside `sumo.conf`. See more details [here](https://service.sumologic.com/help/Default.htm#Using_sumo.conf.htm).\n* You can change a collector's existing parameters through local configuration json file(s) continuously. Before this, using collector API was the only option. More information about this is [here](https://service.sumologic.com/help/Default.htm#Using_Local_Configuration_File_Management.htm)\n\nInstallation\n------------\n1. Create an [Access Key](http://help.sumologic.com/i19.69v2/Default.htm#Generating_Collector_Installation_API_Keys.htm)\n2. Install the cookbook in your Chef repo (your knife version should be at least 11.10.4 and you should have the [knife github plugin](https://github.com/websterclay/knife-github-cookbooks) installed):\n```\nknife cookbook github install SumoLogic/sumologic-collector-chef-cookbook\n```\n3. Specify data bag and item with your access credentials.  The data item should\ncontain attributes `accessID` and `accessKey`.  Note that attribute names are case sensitive.  If the cases mismatch, the values will not appear when chef-client runs.  The default data bag/item is\n`['sumo-creds']['api-creds']`\n4. (Optional) Decide if you want to use the Local Configuration Management feature by setting the attribute `default['sumologic']['local_management']` properly. By default this feature is on, to leverage the power of Chef.\n5. (Optional) Select the json configuration option (i.e. through a single file or a folder) by setting the attribute `default['sumologic']['use_json_path_dir']` appropriately. By default a single json file is used.\n6. (Optional) Check if the path to the json file or the json folder is set correctly in the attribute `default['sumologic']['sumo_json_path']`. By default this is the path to the json file at `/etc/sumo.json` on Linux or `c:\\sumo\\sumo.json` on Windows.\n7. Upload the cookbook to your Chef Server:\n```\nknife cookbook upload sumologic-collector\n```\n8. Add the `sumologic-collector` receipe to your node run lists.  This step depends\non your node configuration, so specifics will not be described in this README.md.\n\n\nAttributes\n----------\n\n<table>\n  <tr>\n    <td>['sumologic']['ephemeral']</td>\n    <td>Boolean</td>\n    <td>Sumo Logic Ephemeral Setting</td>\n    <td>Required</td>\n  </tr>\n  <tr>\n    <td>['sumologic']['installDir'] </td>\n    <td>String</td>\n    <td>Sumo Logic Install Directory</td>\n    <td>Required</td>\n  </tr>\n  <tr>\n    <td>['sumologic']['credentials']['bag_name']</td>\n    <td>String</td>\n    <td>Name of the data bag.</td>\n    <td>Required</td>\n  </tr>\n  <tr>\n    <td>['sumologic']['credentials']['item_name']</td>\n    <td>String</td>\n    <td>Name of the item within the data bag. </td>\n    <td>Required</td>\n  </tr>\n  <tr>\n    <td>['sumologic']['credentials']['secret_file']</td>\n    <td>String</td>\n    <td>Path to the local file containing the encryption secret key.</td>\n    <td>Optional</td>\n  </tr>\n</table>\n\nResource/Provider\n-----------------\n\nsumologic_collector_installer\n---------\n\nAllows for additional customisation of the Sumo Logic Collector installer\n\n### Actions\n`default` = `:install`\n\n- `:install` - installs the Sumo Logic Collector if it is not already installed\n\n### Attribute Parameters\n\nSee the [Sumo Logic documentation](https://service.sumologic.com/help/Default.htm#Using_Quiet_Mode_to_Install_a_Collector.htm)\nfor more information about these attributes.\n\n- `dir` - Directory where the Collector will be installed\n- `source` - URL where installer will be downloaded from\n- `collector_name`\n- `collector_url`\n- `sumo_email`\n- `sumo_password`\n- `sumo_token_and_url`\n- `sumo_access_id`\n- `sumo_access_key`\n- `proxy_host`\n- `proxy_port`\n- `proxy_user`\n- `proxy_password`\n- `proxy_ntlmdomain`\n- `sources`\n- `sync_sources`\n- `ephemeral`\n- `clobber`\n- `runas_username`\n- `winrunas_password`\n- `skip_registration`\n\n### Examples\n\n```ruby\n# Installs the Collector on Windows and skips registration\nsumologic_collector_installer 'c:\\sumo' do\n  source 'https://collectors.sumologic.com/rest/download/win64'\n  sumo_access_id node['SUMO_ACCESS_ID']\n  sumo_access_key node['SUMO_ACCESS_KEY']\n  skip_registration true\nend\n```\n\nCollector Sources\n---------\n\n### Attribute Parameters\n\nThe following attributes are common to all of the sources listed below.\n\nSee the [Sumo Logic documentation](https://service.sumologic.com/help/#Using_JSON_to_configure_Sources.htm)\nfor more information about these attributes.\n\n- `owner` - owner of the JSON Source configuration file\n- `group` - group of the JSON Source configuration file\n- `mode` - file mode of the JSON Source configuration file\n- `source_name` - name of the source. **required**\n- `source_json_directory` - directory where JSON Source configuration file will be stored. **required**\n- `description`\n- `category`\n- `host_name`\n- `time_zone`\n- `automatic_date_parsing`\n- `multiline_processing_enabled`\n- `use_autoline_matching`\n- `manual_prefix_regexp`\n- `force_time_zone`\n- `default_date_format`\n- `filters`\n- `alive`\n\nsumo_source_docker\n---------\n\n### Actions\n`default` = `:create`\n\n- `:create` - creates a JSON Source configuration\n\n### Attribute Parameters\n\nSee the [Sumo Logic documentation](https://service.sumologic.com/help/#Using_JSON_to_configure_Sources.htm)\nfor more information about these attributes.\n\nThe following attribute parameters are in addition to the generic parameters\nlisted above.\n\n- `uri`\n- `specified_containers`\n- `all_containers`\n- `cert_path`\n- `source_type` - one of `:docker_stats`, `:docker_log`. **required**\n- `collected_events`\n\n### Examples\n\n```ruby\nsumo_source_docker 'docker_stats' do\n  source_json_directory node['sumologic']['sumo_json_path']\n  source_type :docker_stats\n  uri 'https://127.0.0.1:2376'\n  all_containers true\nend\n\nsumo_source_docker 'docker_log' do\n  source_json_directory node['sumologic']['sumo_json_path']\n  source_type :docker_log\n  uri 'https://127.0.0.1:2376'\n  all_containers true\nend\n```\n\nsumo_source_local_file\n---------\n\n### Actions\n`default` = `:create`\n\n- `:create` - creates a JSON Source configuration\n\n### Attribute Parameters\n\nSee the [Sumo Logic documentation](https://service.sumologic.com/help/#Using_JSON_to_configure_Sources.htm)\nfor more information about these attributes.\n\nThe following attribute parameters are in addition to the generic parameters\nlisted above.\n\n- `path_expression` - **required**\n- `blacklist`\n- `encoding`\n\n### Examples\n\n```ruby\nsumo_source_local_file 'local_file' do\n  source_json_directory node['sumologic']['sumo_json_path']\n  path_expression '/tmp/example'\nend\n```\n\nsumo_source_local_windows_event_log\n---------\n\n### Actions\n`default` = `:create`\n\n- `:create` - creates a JSON Source configuration\n\n### Attribute Parameters\n\nSee the [Sumo Logic documentation](https://service.sumologic.com/help/#Using_JSON_to_configure_Sources.htm)\nfor more information about these attributes.\n\nThe following attribute parameters are in addition to the generic parameters\nlisted above.\n\n- `log_names` - **required**\n\n### Examples\n\n```ruby\nsumo_source_local_windows_event_log 'local_win_event_log' do\n  source_json_directory node['sumologic']['sumo_json_path']\n  log_names ['security', 'application']\nend\n```\n\nsumo_source_remote_file\n---------\n\n### Actions\n`default` = `:create`\n\n- `:create` - creates a JSON Source configuration\n\n### Attribute Parameters\n\nSee the [Sumo Logic documentation](https://service.sumologic.com/help/#Using_JSON_to_configure_Sources.htm)\nfor more information about these attributes.\n\nThe following attribute parameters are in addition to the generic parameters\nlisted above.\n\n- `remote_hosts` - **required**\n- `remote_port` - **required**\n- `remote_user` - **required**\n- `remote_password` - **required**\n- `key_path` - **required**\n- `key_password`\n- `path_expression` - **required**\n- `auth_method` - one of `key` or `password`.\n- `blacklist`\n\n### Examples\n\n```ruby\nsumo_source_remote_file 'remote_file' do\n  source_json_directory node['sumologic']['sumo_json_path']\n  remote_hosts ['127.0.0.1']\n  remote_port 22\n  remote_user 'user'\n  remote_password 'password'\n  key_path ''\n  path_expression '/tmp/example'\n  auth_method 'password'\nend\n```\n\nsumo_source_remote_windows_event_log\n---------\n\n### Actions\n`default` = `:create`\n\n- `:create` - creates a JSON Source configuration\n\n### Attribute Parameters\n\nSee the [Sumo Logic documentation](https://service.sumologic.com/help/#Using_JSON_to_configure_Sources.htm)\nfor more information about these attributes.\n\nThe following attribute parameters are in addition to the generic parameters\nlisted above.\n\n- `domain` - **required**\n- `username` - **required**\n- `password` - **required**\n- `hosts` - **required**\n- `log_names` - **required**\n\n### Examples\n\n```ruby\nsumo_source_remote_windows_event_log 'remote_win_event_log' do\n  source_json_directory node['sumologic']['sumo_json_path']\n  domain 'mydomain'\n  username 'user'\n  password 'password'\n  hosts ['myremotehost1']\n  log_names ['security', 'application']\nend\n```\n\nsumo_source_script\n---------\n\n### Actions\n`default` = `:create`\n\n- `:create` - creates a JSON Source configuration\n\n### Attribute Parameters\n\nSee the [Sumo Logic documentation](https://service.sumologic.com/help/#Using_JSON_to_configure_Sources.htm)\nfor more information about these attributes.\n\nThe following attribute parameters are in addition to the generic parameters\nlisted above.\n\n- `commands` - **required**\n- `file`\n- `working_dir`\n- `timeout`\n- `script`\n- `cron_expression`\n\n### Examples\n\n```ruby\nsumo_source_script 'script' do\n  source_json_directory node['sumologic']['sumo_json_path']\n  commands ['/bin/bash']\n  cron_expression '0 * * * *'\nend\n```\n\nsumo_source_syslog\n---------\n\n### Actions\n`default` = `:create`\n\n- `:create` - creates a JSON Source configuration\n\n### Attribute Parameters\n\nSee the [Sumo Logic documentation](https://service.sumologic.com/help/#Using_JSON_to_configure_Sources.htm)\nfor more information about these attributes.\n\nThe following attribute parameters are in addition to the generic parameters\nlisted above.\n\n- `protocol`\n- `port`\n\n### Examples\n\n```ruby\nsumo_source_syslog 'syslog' do\n  source_json_directory node['sumologic']['sumo_json_path']\nend\n```\n\nContributing\n------------\nThis cookbook is meant to help customers use Chef to install Sumo Logic\ncollectors, so please feel to fork this repository, and make whatever changes\nyou need for your environment.\n\n\nLicense and Authors\n-------------------\nAuthors:\n\tBen Newton (ben@sumologic.com), Duc Ha (duc@sumologic.com)\n",
  "requires": [
    {
      "kind": "host",
      "label": "debian",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "ubuntu",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "centos",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "redhat",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "scientific",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "fedora",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "amazon",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "oracle",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "windows",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "suse",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    }
  ],
  "parameters": {
    "sumologic/credentials/bag_name": {
      "display_name": "Credentials bag name",
      "type": "string",
      "required": "required",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "sumologic/credentials/item_name": {
      "display_name": "Credentials item name",
      "type": "string",
      "required": "required",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    }
  }
}