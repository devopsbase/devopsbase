{
  "name": "postfixadmin Chef cookbook",
  "chef_cookbook_name": "postfixadmin",
  "revision": "2.1.0",
  "uris": [
    "https://supermarket.chef.io/cookbooks/postfixadmin",
    "https://supermarket.chef.io/cookbooks/postfixadmin/download",
    "https://supermarket.chef.io/cookbooks/postfixadmin/versions/2.1.0",
    "https://supermarket.chef.io/cookbooks/postfixadmin/versions/2.1.0/download",
    "https://supermarket.chef.io/api/v1/cookbooks/postfixadmin/versions/2.1.0",
    "https://supermarket.chef.io/api/v1/cookbooks/postfixadmin",
    "https://supermarket.chef.io/api/v1/cookbooks/postfixadmin/versions/2.1.0/download"
  ],
  "labels": [
    "Chef cookbook",
    "Applications",
    "Executable/Script/Chef Cookbook",
    "Binding/Region/Europe/EU",
    "Binding/Region/North America/US",
    "Mode/Executable/Script/Chef Cookbook",
    "Type/Devopsware/IDE/Web-based",
    "Type/Infrastructure/Operating System",
    "Type/Middleware/Email/Postfix"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/postfixadmin",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/postfixadmin/versions/2.1.0/download",
  "deprecated": false,
  "created": "2013-06-10T22:52:07.000Z",
  "updated": "2015-08-21T15:30:34.288Z",
  "description": "Installs and configures PostfixAdmin, a web based interface used to manage mailboxes, virtual domains and aliases.",
  "maintainer": {
    "name": "zuazo",
    "email": "xabier@zuazo.org"
  },
  "license": "Apache 2.0",
  "chef_foodcritic_failure": false,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 3,
  "downloads_count": 11095743,
  "downloads_count_revision": 746,
  "repository_url": "https://github.com/zuazo/postfixadmin-cookbook",
  "issues_url": "https://github.com/zuazo/postfixadmin-cookbook/issues",
  "chef_source_url": "https://github.com/zuazo/postfixadmin-cookbook",
  "latest": true,
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "PostfixAdmin Cookbook\n=====================\n[![Cookbook Version](https://img.shields.io/cookbook/v/postfixadmin.svg?style=flat)](https://supermarket.chef.io/cookbooks/postfixadmin)\n[![Dependency Status](http://img.shields.io/gemnasium/zuazo/postfixadmin-cookbook.svg?style=flat)](https://gemnasium.com/zuazo/postfixadmin-cookbook)\n[![Code Climate](http://img.shields.io/codeclimate/github/zuazo/postfixadmin-cookbook.svg?style=flat)](https://codeclimate.com/github/zuazo/postfixadmin-cookbook)\n[![Build Status](http://img.shields.io/travis/zuazo/postfixadmin-cookbook/2.1.0.svg?style=flat)](https://travis-ci.org/zuazo/postfixadmin-cookbook)\n\nInstalls and configures [PostfixAdmin](http://postfixadmin.sourceforge.net/), a web based interface used to manage mailboxes, virtual domains and aliases.\n\nAlso creates the required *MySQL* or *PostgreSQL* database and tables.\n\nTable of Contents\n=================\n\n- [Requirements](#requirements)\n- [Generated Passwords](#generated-passwords)\n- [Attributes](#attributes)\n  - [The HTTPS Certificate](#the-https-certificate)\n  - [Encrypted Attributes](#encrypted-attributes)\n- [Recipes](#recipes)\n  - [postfixadmin::default](#postfixadmindefault)\n  - [postfixadmin::map_files](#postfixadminmap_files)\n  - [postfixadmin::mysql](#postfixadminmysql)\n  - [postfixadmin::postgresql](#postfixadminpostgresql)\n- [Resources](#resources)\n  - [postfixadmin_admin[user]](#postfixadmin_adminuser)\n  - [postfixadmin_domain[domain]](#postfixadmin_domaindomain)\n  - [postfixadmin_mailbox[mailbox]](#postfixadmin_mailboxmailbox)\n  - [postfixadmin_alias[address]](#postfixadmin_aliasaddress)\n  - [postfixadmin_alias_domain[address]](#postfixadmin_alias_domainaddress)\n- [Usage Example](#usage-example)\n  - [Including in a Cookbook Recipe](#including-in-a-cookbook-recipe)\n  - [Including in the Run List](#including-in-the-run-list)\n- [PostgreSQL Support](#postgresql-support)\n  - [PostgreSQL Support on Debian and Ubuntu](#postgresql-support-on-debian-and-ubuntu)\n  - [PostgreSQL Versions < 9.3](#postgresql-versions--93)\n- [Deploy with Docker](#deploy-with-docker)\n- [Testing](#testing)\n  - [ChefSpec Matchers](#chefspec-matchers)\n- [Contributing](#contributing)\n- [TODO](#todo)\n- [License and Author](#license-and-author)\n\nRequirements\n============\n\nPlease, if you want to upgrade the `postfixadmin` cookbook version from the `1.x` branch, see the [CHANGELOG](https://github.com/zuazo/postfixadmin-cookbook/blob/master/CHANGELOG.md#v200-2015-05-09).\n\n## Supported Platforms\n\nThis cookbook has been tested on the following platforms:\n\n* Amazon Linux\n* CentOS\n* Debian\n* Fedora\n* Ubuntu\n\nPlease, [let us know](https://github.com/zuazo/postfixadmin-cookbook/issues/new?title=I%20have%20used%20it%20successfully%20on%20...) if you use it successfully on any other platform.\n\n## Required Cookbooks\n\n* [apache2](https://supermarket.chef.io/cookbooks/apache2)\n* [ark](https://supermarket.chef.io/cookbooks/ark)\n* [database](https://supermarket.chef.io/cookbooks/database)\n* [encrypted_attributes (~> 0.2)](https://supermarket.chef.io/cookbooks/encrypted_attributes)\n* [mysql](https://supermarket.chef.io/cookbooks/mysql)\n* [nginx](https://supermarket.chef.io/cookbooks/nginx)\n* [php](https://supermarket.chef.io/cookbooks/php)\n* [php-fpm](https://supermarket.chef.io/cookbooks/php-fpm)\n* [postgresql (>= 1.0.0)](https://supermarket.chef.io/cookbooks/postgresql)\n* [ssl_certificate](https://supermarket.chef.io/cookbooks/ssl_certificate)\n* [yum-epel](https://supermarket.chef.io/cookbooks/yum-epel)\n\n## Required Applications\n\n* Ruby `1.9.3` or higher.\n\n## Other Requirements\n\nOn RedHat based platforms, you need to disable or configure SELinux correctly to work with `mysql` cookbook. You can use the `selinux::disabled` recipe for that.\n\nGenerated Passwords\n===================\n\nThe first time it runs, automatically generates some passwords if not specified. Generated passwords are:\n\n## From the PostfixAdmin Default Recipe\n\n* `postfixadmin/setup_password`\n* `postfixadmin/setup_password_salt`\n* `postfixadmin/setup_password_encrypted`\n* `postfixadmin/database/password`\n\n## When MySQL Is Used\n\n* `postfixadmin/mysql/server_root_password`\n\n## When PostgreSQL Is Used\n\n* `postgresql/password/postgres`\n\nAttributes\n==========\n\n| Attribute                                             | Default                 | Description                    |\n|:------------------------------------------------------|:------------------------|:-------------------------------|\n| `node['postfixadmin']['version']`                     | `'2.3.7'`               | PostfixAdmin version\n| `node['postfixadmin']['url']`                         | *calculated*            | PostfixAdmin download URL\n| `node['postfixadmin']['checksum']`                    | *calculated*            | PostfixAdmin download file checksum\n| `node['postfixadmin']['port']`                        | *calculated*            | PostfixAdmin listen port\n| `node['postfixadmin']['server_name']`                 | *calculated*            | PostfixAdmin server name\n| `node['postfixadmin']['server_aliases']`              | `[]`                    | PostfixAdmin server aliases\n| `node['postfixadmin']['headers']`                     | `{}`                    | PostfixAdmin HTTP headers to set as hash\n| `node['postfixadmin']['ssl']`                         | `false`                 | enables HTTPS (with SSL)\n| `node['postfixadmin']['encrypt_attributes']`          | `false`                 | Whether to encrypt PostfixAdmin attributes containing credential secrets.\n| `node['postfixadmin']['setup_password']`              | *calculated*            | PostfixAdmin Setup Password (required for chef-solo)\n| `node['postfixadmin']['setup_password_salt']`         | *calculated*            | PostfixAdmin password salt (required for chef-solo)\n| `node['postfixadmin']['web_server']`                  | `'apache'`              | Web server to use: `'apache'`, `'nginx'` or `false`\n| `node['postfixadmin']['setup_password_encrypted']`    | *calculated*            | PostfixAdmin encrypted Password\n| `node['postfixadmin']['database']['manage']`          | *calculated*            | Whether to manage database creation.\n| `node['postfixadmin']['database']['type']`            | `'mysql'`               | PostfixAdmin database type. Possible values are: `'mysql'`, `'postgresql' (Please, see [below](#postgresql-support)<a></a>)`\n| `node['postfixadmin']['database']['name']`            | `'postfix'`             | PostfixAdmin database name\n| `node['postfixadmin']['database']['host']`            | `'127.0.0.1'`           | PostfixAdmin database hostname or IP address\n| `node['postfixadmin']['database']['user']`            | `'postfix'`             | PostfixAdmin database login username\n| `node['postfixadmin']['database']['password']`        | *calculated*            | PostfixAdmin database login password (requried for chef-solo)\n| `node['postfixadmin']['mysql']['instance']`           | `'default'`             | PostfixAdmin MySQL instance name to run by the mysql_service LWRP from the mysql cookbook\n| `node['postfixadmin']['mysql']['data_dir']`           | *calculated*            | PostfixAdmin MySQL data files path\n| `node['postfixadmin']['mysql']['port']`               | `'3306'`                | PostfixAdmin MySQL port\n| `node['postfixadmin']['mysql']['run_group']`          | *calculated*            | PostfixAdmin MySQL system group\n| `node['postfixadmin']['mysql']['run_user']`           | *calculated*            | PostfixAdmin MySQL system user\n| `node['postfixadmin']['mysql']['version']`            | *calculated*            | PostfixAdmin database MySQL version to install\n| `node['postfixadmin']['conf']['encrypt']`             | `'md5crypt'`            | The way do you want the passwords to be crypted\n| `node['postfixadmin']['conf']['domain_path']`         | `'YES'`                 | Whether you want to store the mailboxes per domain\n| `node['postfixadmin']['conf']['domain_in_mailbox']`   | `'NO'`                  | Whether you want to have the domain in your mailbox\n| `node['postfixadmin']['conf']['fetchmail']`           | `'NO'`                  | Whether you want fetchmail tab\n| `node['postfixadmin']['packages']['requirements']`    | *calculated*            | PostfixAdmin required packages array\n| `node['postfixadmin']['packages']['mysql']`           | *calculated*            | PostfixAdmin required packages array for MySQL support\n| `node['postfixadmin']['packages']['postgresql']`      | *calculated*            | PostfixAdmin required packages array for PostgreSQL support\n| `node['boxbilling']['mysql']['server_root_password']` | *calculated*            | PostfixAdmin MySQL *root* password.\n| `node['postfixadmin']['map_files']['path']`           | `'/etc/postfix/tables'` | Path to generate map-files into\n| `node['postfixadmin']['map_files']['mode']`           | `00640`                 | Map-files file-mode bits\n| `node['postfixadmin']['map_files']['owner']`          | `'root'`                | Map-files files owner\n| `node['postfixadmin']['map_files']['group']`          | `'postfix'`             | Map-files files group\n| `node['postfixadmin']['map_files']['list']`           | *calculated*            | An array with map file names to generate\n| `node['postfixadmin']['php-fpm']['pool']`             | `'postfixadmin'`        | PHP-FPM pool name to use with PostfixAdmin.\n\n## The HTTPS Certificate\n\nThis cookbook uses the [`ssl_certificate`](https://supermarket.chef.io/cookbooks/ssl_certificate) cookbook to create the HTTPS certificate. The namespace used is `node['postfixadmin']`. For example:\n\n```ruby\nnode.default['postfixadmin']['common_name'] = 'postfixadmin.example.com'\ninclude_recipe 'postfixadmin'\n```\n\nSee the [`ssl_certificate` namespace documentation](https://supermarket.chef.io/cookbooks/ssl_certificate#namespaces) for more information.\n\n## Encrypted Attributes\n\nThis cookbook can use the [encrypted_attributes](https://supermarket.chef.io/cookbooks/encrypted_attributes) cookbook to encrypt the secrets generated during the *Chef Run*. This feature is disabled by default, but can be enabled setting the `node['postfixadmin']['encrypt_attributes']` attribute to `true`. For example:\n\n```ruby\ninclude_recipe 'encrypted_attributes::users_data_bag'\nnode.default['postfixadmin']['encrypt_attributes'] = true\ninclure_recipe 'postfixadmin'\n```\n\nThis will create the following encrypted attributes:\n\n* `node['postfixadmin']['setup_password']`: PostfixAdmin *setup.php* setup password.\n* `node['postfixadmin']['setup_password_encrypted']`: PostfixAdmin *setup.php* setup password encrypted with a salt.\n* `node['postfixadmin']['mysql']['server_root_password']`: MySQL *root* user password.\n* `node['postfixadmin']['database']['password']`: MySQL PostfixAdmin user password.\n\nRead the [`chef-encrypted-attributes` gem documentation](http://onddo.github.io/chef-encrypted-attributes/) to learn how to read them.\n\n**Warning:** When PostgreSQL is used, the database root password will still remain unencrypted in the `node['postgresql']['password']['postgres']` attribute due to limitations of the [postgresql cookbook](https://supermarket.chef.io/cookbooks/postgresql).\n\nRecipes\n=======\n\n## postfixadmin::default\n\nInstalls and configures PostfixAdmin.\n\n## postfixadmin::map_files\n\nInstalls PostfixAdmin SQL map files to be used by Postfix.\n\n## postfixadmin::mysql\n\nInstalls MySQL server for PostfixAdmin.\n\n## postfixadmin::postgresql\n\nInstalls PostgreSQL server for PostfixAdmin.\n\nResources\n=========\n\n## postfixadmin_admin[user]\n\nCreate or remove a PostfixAdmin admin user. This kind of user is used to create the domains and mailboxes.\n\n### postfixadmin_admin Actions\n\n* `create`: Create a PostfixAdmin admin user (default).\n* `remove`: Remove a PostfixAdmin admin user.\n\n### postfixadmin_admin Parameters\n\n| Parameter      | Default                       | Description                    |\n|:---------------|:------------------------------|:-------------------------------|\n| user           | *name attribute*              | Username\n| password       | `'p@ssw0rd1'`                 | Password\n| setup_password | *calculated*                  | PostfixAdmin Setup Password\n| db_user        | *calculated*                  | Database username\n| db_password    | *calculated*                  | Database password\n| db_name        | *calculated*                  | Database name\n| db_host        | *calculated*                  | Database hostname\n| ssl            | `node['postfixadmin']['ssl']` | Whether to use SSL on HTTP requests\n\n### postfixadmin_admin Example\n\n```ruby\npostfixadmin_admin 'admin@admindomain.com' do\n  password 'sup3r-s3cr3t-p4ss'\n  action :create\nend\n```\n\n## postfixadmin_domain[domain]\n\nCreate domains.\n\n### postfixadmin_domain Actions\n\n* `create`\n\n### postfixadmin_domain Parameters\n\n| Parameter      | Default                       | Description                    |\n|:---------------|:------------------------------|:-------------------------------|\n| domain         | *name attribute*              | Domain name\n| description    | `''`                          | Domain description\n| aliases        | `10`                          | Maximum number of aliases\n| mailboxes      | `10`                          | Maximum number of mailboxes\n| login_username | *required*                    | Admin user to use\n| login_password | *required*                    | Admin password \n| db_user        | *calculated*                  | Database username\n| db_password    | *calculated*                  | Database password\n| db_name        | *calculated*                  | Database name\n| db_host        | *calculated*                  | Database hostname\n| ssl            | `node['postfixadmin']['ssl']` | Whether to use SSL on HTTP requests\n\n### postfixadmin_domain Example\n\n```ruby\n# admin user copied from the previous example\npostfixadmin_domain 'foobar.com' do\n  login_username 'admin@admindomain.com'\n  login_password 'sup3r-s3cr3t-p4ss'\nend\n```\n\n## postfixadmin_mailbox[mailbox]\n\nCreate a mailbox.\n\n### postfixadmin_mailbox Actions\n\n* `create`\n\n### postfixadmin_mailbox Parameters\n\n| Parameter      | Default                       | Description                    |\n|:---------------|:------------------------------|:-------------------------------|\n| mailbox        | *name attribute*              | Mailbox address to create\n| password       | *required*                    | Mailbox password\n| name           | `''`                          | The name of the mailbox owner\n| active         | `true`                        | Active status\n| mail           | `false`                       | Whether to send a welcome email\n| login_username | *required*                    | Admin user to use\n| login_password | *required*                    | Admin password \n| db_user        | *calculated*                  | Database username\n| db_password    | *calculated*                  | Database password\n| db_name        | *calculated*                  | Database name\n| db_host        | *calculated*                  | Database hostname\n| ssl            | `node['postfixadmin']['ssl']` | Whether to use SSL on HTTP requests\n\n### postfixadmin_mailbox Example\n\n```ruby\n# admin user copied from the previous example\npostfixadmin_mailbox 'bob@foobar.com' do\n  password 'alice'\n  login_username 'admin@admindomain.com'\n  login_password 'sup3r-s3cr3t-p4ss'\nend\n```\n\n## postfixadmin_alias[address]\n\nCreate mailbox aliases.\n\n### postfixadmin_alias Actions\n\n* `create`\n\n### postfixadmin_alias Parameters\n\n| Parameter      | Default                       | Description                    |\n|:---------------|:------------------------------|:-------------------------------|\n| address        | *name attribute*              | Alias address\n| goto           | *required*                    | Destination mailbox address\n| active         | `true`                        | Active status\n| login_username | *required*                    | Admin user to use\n| login_password | *required*                    | Admin password \n| db_user        | *calculated*                  | Database username\n| db_password    | *calculated*                  | Database password\n| db_name        | *calculated*                  | Database name\n| db_host        | *calculated*                  | Database hostname\n| ssl            | `node['postfixadmin']['ssl']` | Whether to use SSL on HTTP requests\n\n### postfixadmin_alias Example\n\n```ruby\n# admin user copied from the previous example\npostfixadmin_alias 'billing@foobar.com' do\n  goto 'bob@foobar.com'\n  login_username 'admin@admindomain.com'\n  login_password 'sup3r-s3cr3t-p4ss'\nend\n```\n\n## postfixadmin_alias_domain[address]\n\nCreate domain aliases. The `alias_domain` must already exist.\n\n### postfixadmin_alias_domain Actions\n\n* `create`\n\n### postfixadmin_alias_domain Parameters\n\n| Parameter      | Default                       | Description                    |\n|:---------------|:------------------------------|:-------------------------------|\n| alias_domain   | *name attribute*              | Alias domain\n| target_domain  | *required*                    | Target domain\n| active         | `true`                        | Active status\n| login_username | *required*                    | Admin user to use\n| login_password | *required*                    | Admin password \n| db_user        | *calculated*                  | Database username\n| db_password    | *calculated*                  | Database password\n| db_name        | *calculated*                  | Database name\n| db_host        | *calculated*                  | Database hostname\n| ssl            | `node['postfixadmin']['ssl']` | Whether to use SSL on HTTP requests\n\n### postfixadmin_alias_domain Example\n\n```ruby\n# admin user copied from the previous example\npostfixadmin_alias_domain 'aliasdomain.com' do\n  target_domain 'foobar.com'\n  login_username 'admin@admindomain.com'\n  login_password 'sup3r-s3cr3t-p4ss'\nend\n```\n\nUsage Example\n=============\n\n## Including in a Cookbook Recipe\n\nA complete example:\n\n```ruby\ninclude_recipe 'postfixadmin::default'\ninclude_recipe 'postfixadmin::map_files'\n# or include them in your run-list\n\npostfixadmin_admin 'admin@admindomain.com' do\n  password 'sup3r-s3cr3t-p4ss'\n  action :create\nend\n\npostfixadmin_domain 'foobar.com' do\n  login_username 'admin@admindomain.com'\n  login_password 'sup3r-s3cr3t-p4ss'\nend\n\npostfixadmin_mailbox 'bob@foobar.com' do\n  password 'alice'\n  login_username 'admin@admindomain.com'\n  login_password 'sup3r-s3cr3t-p4ss'\nend\n\npostfixadmin_alias 'billing@foobar.com' do\n  goto 'bob@foobar.com'\n  login_username 'admin@admindomain.com'\n  login_password 'sup3r-s3cr3t-p4ss'\nend\n\npostfixadmin_domain 'aliasdomain.com' do\n  login_username 'admin@admindomain.com'\n  login_password 'sup3r-s3cr3t-p4ss'\nend\n\npostfixadmin_alias_domain 'aliasdomain.com' do\n  target_domain 'foobar.com'\n  login_username 'admin@admindomain.com'\n  login_password 'sup3r-s3cr3t-p4ss'\nend\n```\n\nDon't forget to include the `postfixadmin` cookbook as a dependency in the metadata.\n\n```ruby\n# metadata.rb\n# [...]\n\ndepends 'postfixadmin'\n```\n\n## Including in the Run List\n\nAnother alternative is to include the recipes in your Run List.\n\n```json\n{\n  \"name\": \"mail.example.com\",\n  \"[...]\": \"[...]\"\n  \"run_list\": [\n    \"[...]\": \"[...]\",\n    \"recipe[postfixadmin]\",\n    \"recipe[postfixadmin::map_files]\"\n  ]\n}\n```\n\nPostgreSQL Support\n==================\n\nPostfixAdmin with PostgreSQL may not work properly on some platforms: See for example [`postgresql` cookbook issue #249](https://github.com/hw-cookbooks/postgresql/issues/249). [Any feedback you can provide regarding the PostgreSQL support](https://github.com/zuazo/postfixadmin-cookbook/issues/new?title=PostgreSQL%20Support) will be greatly appreciated.\n\n## PostgreSQL Support on Debian and Ubuntu\n\nDue to [`postgresql` cookbook issue #108](https://github.com/hw-cookbooks/postgresql/issues/108), you should configure your system locale correctly for PostgreSQL to work. You can use the `locale` cookbook to fix this. For example:\n\n```ruby\nENV['LANGUAGE'] = ENV['LANG'] = node['locale']['lang']\nENV['LC_ALL'] = node['locale']['lang']\ninclude_recipe 'locale'\n# ...\nnode.default['postfixadmin']['database']['type'] = 'postgresql'\ninclude_recipe 'postfixadmin'\n```\n\n## PostgreSQL Versions < 9.3\n\nIf you are using PostgreSQL version `< 9.3`, you may need to adjust the `shmmax` and `shmall` kernel parameters to configure the shared memory. You can see [the example used for the integration tests](test/cookbooks/postfixadmin_test/recipes/_postgresql_memory.rb).\n\nDeploy with Docker\n==================\n\nYou can use the *Dockerfile* included in the [cookbook source code](https://github.com/zuazo/postfixadmin-cookbook) to run the cookbook inside a container:\n\n    $ docker build -t chef-postfixadmin .\n    $ docker run -d -p 8080:80 chef-postfixadmin\n\nThe sample *Dockerfile*:\n\n```Dockerfile\nFROM zuazo/chef-local:debian-7\n\nCOPY . /tmp/postfixadmin\nRUN berks vendor -b /tmp/postfixadmin/Berksfile $COOKBOOK_PATH\nRUN chef-client -r \"recipe[apt],recipe[postfixadmin]\"\n\nCMD [\"apache2\", \"-D\", \"FOREGROUND\"]\n```\n\nSee the [chef-local container documentation](https://registry.hub.docker.com/u/zuazo/chef-local/) for more examples.\n\nTesting\n=======\n\nSee [TESTING.md](https://github.com/zuazo/postfixadmin-cookbook/blob/master/TESTING.md).\n\n## ChefSpec Matchers\n\n### postfixadmin_admin(user)\n\nHelper method for locating a `postfixadmin_admin` resource in the collection.\n\n```ruby\nresource = chef_run.postfixadmin_admin(user)\nexpect(resource).to notify('service[apache2]').to(:reload)\n```\n\n### create_postfixadmin_admin(user)\n\nAssert that the *Chef Run* creates a PostfixAdmin admin user.\n\n```ruby\nexpect(chef_run).to create_postfixadmin_admin(user)\n```\n\n### remove_postfixadmin_admin(path)\n\nAssert that the *Chef Run* removes a PostfixAdmin admin user.\n\n```ruby\nexpect(chef_run).to remove_postfixadmin_admin(user)\n```\n\n### postfixadmin_alias(address)\n\nHelper method for locating a `postfixadmin_alias` resource in the collection.\n\n```ruby\nresource = chef_run.postfixadmin_alias(address)\nexpect(resource).to notify('service[apache2]').to(:reload)\n```\n\n### create_postfixadmin_alias(address)\n\nAssert that the *Chef Run* creates a PostfixAdmin alias.\n\n```ruby\nexpect(chef_run).to create_postfixadmin_alias(address)\n```\n\n### postfixadmin_alias_domain(alias_domain)\n\nHelper method for locating a `postfixadmin_alias_domain` resource in the collection.\n\n```ruby\nresource = chef_run.postfixadmin_alias_domain(alias_domain)\nexpect(resource).to notify('service[apache2]').to(:reload)\n```\n\n### create_postfixadmin_alias_domain(alias_domain)\n\nAssert that the *Chef Run* creates a PostfixAdmin alias domain.\n\n```ruby\nexpect(chef_run).to create_postfixadmin_alias_domain(alias_domain)\n```\n\n### postfixadmin_domain(domain)\n\nHelper method for locating a `postfixadmin_domain` resource in the collection.\n\n```ruby\nresource = chef_run.postfixadmin_domain(domain)\nexpect(resource).to notify('service[apache2]').to(:reload)\n```\n\n### create_postfixadmin_domain(domain)\n\nAssert that the *Chef Run* creates a PostfixAdmin domain.\n\n```ruby\nexpect(chef_run).to create_postfixadmin_domain(domain)\n```\n\n### postfixadmin_mailbox(mailbox)\n\nHelper method for locating a `postfixadmin_mailbox` resource in the collection.\n\n```ruby\nresource = chef_run.postfixadmin_domain(mailbox)\nexpect(resource).to notify('service[apache2]').to(:reload)\n```\n\n### create_postfixadmin_mailbox(mailbox)\n\nAssert that the *Chef Run* creates a PostfixAdmin mailbox.\n\n```ruby\nexpect(chef_run).to create_postfixadmin_mailbox(mailbox)\n```\n\nContributing\n============\n\nPlease do not hesitate to [open an issue](https://github.com/zuazo/postfixadmin-cookbook/issues/new) with any questions or problems.\n\nSee [CONTRIBUTING.md](https://github.com/zuazo/postfixadmin-cookbook/blob/master/CONTRIBUTING.md).\n\nTODO\n====\n\nSee [TODO.md](https://github.com/zuazo/postfixadmin-cookbook/blob/master/TODO.md).\n\n\nLicense and Author\n==================\n\n|                      |                                          |\n|:---------------------|:-----------------------------------------|\n| **Author:**          | [Xabier de Zuazo](https://github.com/zuazo) (<xabier@zuazo.org>)\n| **Contributor:**     | [chrludwig](https://github.com/chrludwig)\n| **Contributor:**     | [MATSUI Shinsuke (poppen)](https://github.com/poppen)\n| **Contributor:**     | [Brian Racer](https://github.com/anveo)\n| **Contributor:**     | [Bernhard Weisshuhn (a.k.a. bernhorst)](https://github.com/bkw)\n| **Copyright:**       | Copyright (c) 2015, Xabier de Zuazo\n| **Copyright:**       | Copyright (c) 2014-2015, Onddo Labs, SL.\n| **License:**         | Apache License, Version 2.0\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n    \n        http://www.apache.org/licenses/LICENSE-2.0\n    \n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n",
  "requires": [
    {
      "kind": "host",
      "label": "amazon",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "debian",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "centos",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "fedora",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "ubuntu",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/apache2",
      "revision": "~> 3.0",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/ark",
      "revision": "~> 0.9",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/database",
      "revision": "~> 4.0",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/encrypted_attributes",
      "revision": "~> 0.2",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/mysql",
      "revision": "~> 6.0",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/nginx",
      "revision": "~> 2.7",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/php",
      "revision": "~> 1.5",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/php-fpm",
      "revision": ">= 0.7",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/postgresql",
      "revision": "~> 3.4",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/mysql2_chef_gem",
      "revision": "~> 1.0",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/ssl_certificate",
      "revision": "~> 1.1",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/yum-epel",
      "revision": "~> 0.5",
      "self_resolve": true
    }
  ],
  "chef_recipes": {
    "postfixadmin::default": "Installs and configures PostfixAdmin",
    "postfixadmin::map_files": "Installs PostfixAdmin SQL map files to be used by Postfix",
    "postfixadmin::mysql": "Installs MySQL server for PostfixAdmin",
    "postfixadmin::postgresql": "Installs PostgreSQL server for PostfixAdmin"
  },
  "parameters": {
    "postfixadmin/version": {
      "display_name": "postfixadmin version",
      "description": "PostfixAdmin version",
      "type": "string",
      "required": "optional",
      "default": "2.3.7",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/url": {
      "display_name": "postfixadmin URL",
      "description": "PostfixAdmin download URL",
      "calculated": true,
      "type": "string",
      "required": "optional",
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/checksum": {
      "display_name": "postfixadmin checksum",
      "description": "PostfixAdmin download file checksum",
      "type": "string",
      "required": "optional",
      "default": "761074e711ab618deda425dc013133b9d5968e0859bb883f10164061fd87006e",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/port": {
      "display_name": "postfixadmin port",
      "description": "PostfixAdmin listen port",
      "calculated": true,
      "type": "string",
      "required": "optional",
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/server_name": {
      "display_name": "server name",
      "description": "PostfixAdmin server name",
      "calculated": true,
      "type": "string",
      "required": "recommended",
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/server_aliases": {
      "display_name": "server aliases",
      "description": "PostfixAdmin server aliases",
      "type": "array",
      "required": "optional",
      "default": [],
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/headers": {
      "display_name": "postfixadmin headers",
      "description": "PostfixAdmin HTTP headers to set as hash",
      "type": "hash",
      "default": {},
      "choice": [],
      "calculated": false,
      "required": "optional",
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/ssl": {
      "display_name": "enable ssl",
      "description": "enables HTTPS (with SSL)",
      "choice": [
        "true",
        "false"
      ],
      "type": "string",
      "required": "optional",
      "default": "false",
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/encrypt_attributes": {
      "display_name": "postfixadmin encrypt attributes",
      "description": "Whether to encrypt PostfixAdmin attributes containing credential secrets.",
      "type": "string",
      "choice": [
        "true",
        "false"
      ],
      "default": "false",
      "calculated": false,
      "required": "optional",
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/setup_password": {
      "display_name": "postfixadmin setup_password",
      "description": "PostfixAdmin Setup Password (required for chef-solo)",
      "calculated": true,
      "type": "string",
      "required": "optional",
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/setup_password_salt": {
      "display_name": "postfixadmin password_salt",
      "description": "PostfixAdmin password salt (required for chef-solo)",
      "calculated": true,
      "type": "string",
      "required": "optional",
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/setup_password_encrypted": {
      "display_name": "postfixadmin password_encrypted",
      "description": "PostfixAdmin encrypted Password",
      "calculated": true,
      "type": "string",
      "required": "optional",
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/web_server": {
      "display_name": "Web Server",
      "description": "Web server to use: apache or false",
      "choice": [
        "apache",
        "nginx",
        "false"
      ],
      "type": "string",
      "required": "optional",
      "default": "apache",
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/database/manage": {
      "display_name": "database manage",
      "description": "Whether to manage database creation.",
      "calculated": true,
      "type": "string",
      "required": "optional",
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/database/type": {
      "display_name": "database type",
      "description": "PostfixAdmin database type",
      "choice": [
        "\"mysql\"",
        "\"postgresql\""
      ],
      "type": "string",
      "required": "optional",
      "default": "\"mysql\"",
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/database/name": {
      "display_name": "database name",
      "description": "PostfixAdmin database name",
      "type": "string",
      "required": "optional",
      "default": "\"postfix\"",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/database/host": {
      "display_name": "database host",
      "description": "PostfixAdmin database hostname or IP address",
      "type": "string",
      "required": "optional",
      "default": "\"127.0.0.1\"",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/database/user": {
      "display_name": "database user",
      "description": "PostfixAdmin database login username",
      "type": "string",
      "required": "optional",
      "default": "\"postfix\"",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/database/password": {
      "display_name": "database password",
      "description": "PostfixAdmin database login password (required for chef-solo)",
      "calculated": true,
      "type": "string",
      "required": "optional",
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/mysql/instance": {
      "display_name": "mysql instance",
      "description": "PostfixAdmin MySQL instance name to run by the mysql_service LWRP from the mysql cookbook",
      "type": "string",
      "required": "optional",
      "default": "default",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/mysql/data_dir": {
      "display_name": "mysql data dir",
      "description": "PostfixAdmin MySQL data files path",
      "type": "string",
      "required": "optional",
      "calcualted": true,
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/mysql/port": {
      "display_name": "mysql port",
      "description": "PostfixAdmin MySQL port",
      "type": "string",
      "required": "optional",
      "default": "3306",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/mysql/run_group": {
      "display_name": "mysql run group",
      "description": "PostfixAdmin MySQL system group",
      "type": "string",
      "required": "optional",
      "calculated": true,
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/mysql/run_user": {
      "display_name": "mysql run user",
      "description": "PostfixAdmin MySQL system user",
      "type": "string",
      "required": "optional",
      "calculated": true,
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/mysql/version": {
      "display_name": "mysql version",
      "description": "PostfixAdmin MySQL version to install",
      "type": "string",
      "required": "optional",
      "calculated": true,
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/conf/encrypt": {
      "display_name": "encryption configuration",
      "description": "The way do you want the passwords to be crypted",
      "type": "string",
      "required": "optional",
      "default": "\"md5crypt\"",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/conf/domain_path": {
      "display_name": "domain path configuration",
      "description": "Whether you want to store the mailboxes per domain",
      "choice": [
        "\"YES\"",
        "\"NO\""
      ],
      "type": "string",
      "required": "optional",
      "default": "\"YES\"",
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/conf/domain_in_mailbox": {
      "display_name": "domain in mailbox configuration",
      "description": "Whether you want to have the domain in your mailbox",
      "choice": [
        "\"YES\"",
        "\"NO\""
      ],
      "type": "string",
      "required": "optional",
      "default": "\"NO\"",
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/conf/fetchmail": {
      "display_name": "enable fetchmail",
      "description": "Whether you want fetchmail tab",
      "choice": [
        "\"YES\"",
        "\"NO\""
      ],
      "type": "string",
      "required": "optional",
      "default": "\"NO\"",
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/packages/requirements": {
      "display_name": "postfixadmin packages requirements",
      "description": "PostfixAdmin required packages array",
      "type": "string",
      "required": "optional",
      "calculated": true,
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/packages/mysql": {
      "display_name": "postfixadmin packages mysql",
      "description": "PostfixAdmin required packages array for MySQL support",
      "type": "string",
      "required": "optional",
      "calculated": true,
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/packages/postgresql": {
      "display_name": "postfixadmin packages postgresql",
      "description": "PostfixAdmin required packages array for PostgreSQL support",
      "type": "string",
      "required": "optional",
      "calculated": true,
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/mysql/server_root_password": {
      "display_name": "postfixadmin mysql server root password",
      "description": "PostfixAdmin MySQL root password.",
      "type": "string",
      "calculated": true,
      "choice": [],
      "required": "optional",
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/map_files/path": {
      "display_name": "map files path",
      "description": "Path to generate map-files into",
      "type": "string",
      "required": "optional",
      "default": "\"/etc/postfix/tables\"",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/map_files/mode": {
      "display_name": "map files mode",
      "description": "Map-files file-mode bits",
      "type": "string",
      "required": "optional",
      "default": "00640",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/map_files/owner": {
      "display_name": "map files owner",
      "description": "Map-files files owner",
      "type": "string",
      "required": "optional",
      "default": "\"root\"",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/map_files/group": {
      "display_name": "map files group",
      "description": "Map-files files group",
      "type": "string",
      "required": "optional",
      "default": "\"postfix\"",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/map_files/list": {
      "display_name": "map files list",
      "description": "An array with map file names to generate",
      "type": "array",
      "required": "optional",
      "default": [
        "db_virtual_alias_maps.cf",
        "db_virtual_alias_domain_maps.cf",
        "db_virtual_alias_domain_catchall_maps.cf",
        "db_virtual_domains_maps.cf",
        "db_virtual_mailbox_maps.cf",
        "db_virtual_alias_domain_mailbox_maps.cf",
        "db_virtual_mailbox_limit_maps.cf"
      ],
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "postfixadmin/php-fpm/pool": {
      "display_name": "postfixadmin php-fpm pool",
      "description": "PHP-FPM pool name to use with PostfixAdmin.",
      "type": "string",
      "required": "optional",
      "default": "postfixadmin",
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    }
  }
}