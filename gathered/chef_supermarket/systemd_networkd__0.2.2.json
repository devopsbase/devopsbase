{
  "name": "systemd_networkd Chef cookbook",
  "chef_cookbook_name": "systemd_networkd",
  "revision": "0.2.2",
  "uris": [
    "https://supermarket.chef.io/cookbooks/systemd_networkd",
    "https://supermarket.chef.io/cookbooks/systemd_networkd/download",
    "https://supermarket.chef.io/cookbooks/systemd_networkd/versions/0.2.2",
    "https://supermarket.chef.io/cookbooks/systemd_networkd/versions/0.2.2/download",
    "https://supermarket.chef.io/api/v1/cookbooks/systemd_networkd/versions/0.2.2",
    "https://supermarket.chef.io/api/v1/cookbooks/systemd_networkd",
    "https://supermarket.chef.io/api/v1/cookbooks/systemd_networkd/versions/0.2.2/download"
  ],
  "labels": [
    "Chef cookbook",
    "Networking",
    "Executable/Script/Chef Cookbook",
    "Mode/Executable/Script/Chef Cookbook",
    "Style/Virtualization Level/Hardware/Network"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/systemd_networkd",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/systemd_networkd/versions/0.2.2/download",
  "deprecated": false,
  "created": "2015-05-22T17:11:26.592Z",
  "updated": "2016-02-22T11:35:37.947Z",
  "description": "Configures systemd_networkd",
  "maintainer": {
    "name": "proxykillah",
    "email": "david.m.oneill@intel.com"
  },
  "license": "All rights reserved",
  "chef_foodcritic_failure": true,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 2,
  "downloads_count": 1124911,
  "downloads_count_revision": 141083,
  "repository_url": "https://github.com/Intel-Corp/systemd_networkd",
  "issues_url": "https://github.com/Intel-Corp/systemd_networkd",
  "chef_source_url": "https://github.com/Intel-Corp/systemd_networkd",
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "systemd_networkd Cookbook\n=========================\nThis cookbook is responsible for configuring systemd-networkd.\nA modified version of systemd networkd is required.\n\nThis can be found @ https://github.com/proxykillah/systemd\n\nRequirements\n------------\n- `systemd` - systemd_networkd required systemd > 216\n\nAttributes\n----------\n\nAll keys are case sensitive.  CamelCase is used instead of underscore.\n\nRecipes\n-------\n\ndefault: sets up directories and deletes old configurations\ncpuport: configures attributes specific to cpu port\nlink: configures port state and port speed\nstatic_mac_table: confgures the static MAC table (FDB)\nswitchport: configures port attributes\nteam: configures LAGs and LAG-specific features (e.g. LAG attributes)\nufd: configures uplink failure detection\n\nAttributes\n----------\n\n#### SystemdNetworkd\n<table>             \n  <tr>              \n    <th>Key</th>\n    <th>Type</th>\n    <th>Description</th>\n    <th>Default</th>\n  </tr>\n  <tr>\n    <td><tt>['SystemdNetworkd']['Backup']</tt></td>\n    <td>Boolean</td>\n    <td>whether or not to go into backup mode, typically used with chef solo, requires ohai plugin for inspection</td>\n    <td><tt>true</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['SystemdNetworkd']['Teams']</tt></td>\n    <td>Object</td>\n    <td>Teams configuration</td>\n    <td><tt>{}</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['SystemdNetworkd']['UFD']</tt></td>\n    <td>Object</td>\n    <td>Uplink failure detection configuration</td>\n    <td><tt>{}</tt></td>\n  </tr>\n  <tr>\n    <td><tt>['SystemdNetworkd']['Ports']</tt></td>\n    <td>Object</td>\n    <td>Ports configuration</td>\n    <td><tt>{}</tt></td>\n  </tr>\n</table>\n\nUsage\n-----\n\nJust include `systemd_networkd` in your node's `run_list`:\nBelow is a fully working example of the relevant configuration options.\n\n\n```json\n{                                                                                                        \n  \"name\": \"IES\",                                                                                          \n  \"description\": \"Default role\",                                                                         \n  \"run_list\": [\n    \"recipe[systemd_networkd]\"\n  ],\n  \"default_attributes\": {                         \n    \"SystemdNetworkd\": {\n      \"Backup\": false,\n      \"Teams\": {\n        \"team1\": {\n          \"Enabled\": true,\n          \"Members\": [\n            \"sw0p9\",\n            \"sw0p10\"\n          ],\n          \"Attributes\": {\n            \"DefVlan\": \"1\"\n          },\n          \"Vlans\": {\n            \"lab\": {\n              \"Id\": \"20\",\n              \"EgressUntagged\": \"true\"\n            },\n            \"office\": {\n              \"Id\": \"25\"\n            }\n          }\n        }\n      },\n      \"UFD\": {\n        \"sw0p1\": {\n          \"Enabled\": true,\n          \"BindCarrier\": \"sw0p2 sw0p3\"\n        },\n        \"sw0p5\": {\n          \"Enabled\": true,\n          \"BindCarrier\": \"sw0p6 sw0p7 sw0p8 sw0p9\"\n        }\n      },\n      \"Ports\": {\n        \"sw0p0\": {\n          \"Attributes\": {\n            \"LagMode\": \"1\"\n          },\n          \"L2HashKey\": {\n            \"UseL3Hash\": \"1\"\n          },\n          \"L3HashConfig\": {\n            \"UseTcp\": \"1\"\n          }\n        },\n        \"sw0p4\": {\n          \"Enabled\": true,\n          \"FDB\": [\n            [\n              \"MACAddress\",\n              \"AB:BC:CC:00:01:02\",\n              \"VLANId\",\n              \"2\"\n            ],\n            [\n              \"MACAddress\",\n              \"AB:BC:CC:00:01:02\",\n              \"VLANId\",\n              \"2\"\n            ],\n            [\n              \"MACAddress\",\n              \"AB:BC:CC:00:01:02\",\n              \"VLANId\",\n              \"3\"\n            ]\n          ],\n          \"Attributes\": [\n            [\n              \"Autoneg\",\n              \"1\"\n            ]\n          ]\n        },\n        \"sw0p5\": {\n          \"Enabled\": \"false\",\n          \"FDB\": [\n            [\n              \"MACAddress\",\n              \"AB:BC:CC:00:01:02\",\n              \"VLANId\",\n              \"2\"\n            ],\n            [\n              \"MACAddress\",\n              \"AB:BC:CC:00:01:03\",\n              \"VLANId\",\n              \"2\"\n            ],\n            [\n              \"MACAddress\",\n              \"AB:BC:CC:00:01:03\",\n              \"VLANId\",\n              \"3\"\n            ]\n          ],\n          \"Link\": {\n            \"Link\": [\n              [\n                \"Duplex\",\n                \"full\"\n              ],\n              [\n                \"BitsPerSecond\",\n                \"10240000\"\n              ]\n            ]\n          }\n        },\n        \"sw0p6\": {\n          \"Enabled\": true,\n          \"FDB\": [\n            [\n              \"MACAddress\",\n              \"AB:BC:CC:00:01:01\",\n              \"VLANId\",\n              \"2\"\n            ],\n            [\n              \"MACAddress\",\n              \"AB:BC:CC:00:01:01\",\n              \"VLANId\",\n              \"2\"\n            ],\n            [\n              \"MACAddress\",\n              \"AB:BC:CC:00:01:01\",\n              \"VLANId\",\n              \"3\"\n            ]\n          ],\n          \"Vlans\": {\n            \"lab\": {\n              \"Id\": \"20\",\n              \"EgressUntagged\": \"true\"\n            },\n            \"office\": {\n              \"Id\": \"25\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nExpected Output \n```bash\n[root@onpswitch-rr461 network]# pwd\n/etc/systemd/network\n[root@onpswitch-rr461 network]# tree\n.\n├── backup\n├── cpuport\n│   └── sw0p0.swport\n├── link\n│   ├── sw0p4.link\n│   └── sw0p6.link\n├── network\n│   ├── sw0p4.network\n│   └── sw0p6.network\n├── sw0p0.swport -> /etc/systemd/network/cpuport/sw0p0.swport\n├── sw0p4.link -> /etc/systemd/network/link/sw0p4.link\n├── sw0p4.network -> /etc/systemd/network/network/sw0p4.network\n├── sw0p4.swport -> /etc/systemd/network/switchport/sw0p4.swport\n├── sw0p6.link -> /etc/systemd/network/link/sw0p6.link\n├── sw0p6.network -> /etc/systemd/network/network/sw0p6.network\n├── switchport\n│   └── sw0p4.swport\n├── team\n│   ├── team_team1.netdev\n│   ├── team_team1_sw0p10.network\n│   ├── team_team1_sw0p9.network\n│   └── team_team1.swport\n├── team_team1.netdev -> /etc/systemd/network/team/team_team1.netdev\n├── team_team1_sw0p10.network -> /etc/systemd/network/team/team_team1_sw0p10.network\n├── team_team1_sw0p9.network -> /etc/systemd/network/team/team_team1_sw0p9.network\n├── team_team1.swport -> /etc/systemd/network/team/team_team1.swport\n├── ufd\n│   ├── ufd_sw0p1.network\n│   └── ufd_sw0p5.network\n├── ufd_sw0p1.network -> /etc/systemd/network/ufd/ufd_sw0p1.network\n└── ufd_sw0p5.network -> /etc/systemd/network/ufd/ufd_sw0p5.network\n\n7 directories, 24 files\n\n```\n\nLicense and Authors\n-------------------\nAuthors: David O Neill (david.m.oneill@intel.com)\n         Kim-marie Jones (kim-marie.jones@intel.com)\n"
}