{
  "name": "pm2 Chef cookbook",
  "chef_cookbook_name": "pm2",
  "revision": "0.5.0",
  "uris": [
    "https://supermarket.chef.io/cookbooks/pm2",
    "https://supermarket.chef.io/cookbooks/pm2/download",
    "https://supermarket.chef.io/cookbooks/pm2/versions/0.5.0",
    "https://supermarket.chef.io/cookbooks/pm2/versions/0.5.0/download",
    "https://supermarket.chef.io/api/v1/cookbooks/pm2/versions/0.5.0",
    "https://supermarket.chef.io/api/v1/cookbooks/pm2",
    "https://supermarket.chef.io/api/v1/cookbooks/pm2/versions/0.5.0/download"
  ],
  "labels": [
    "Chef cookbook",
    "Process Management",
    "Executable/Script/Chef Cookbook",
    "Mode/Executable/Script/Chef Cookbook"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/pm2",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/pm2/versions/0.5.0/download",
  "deprecated": false,
  "created": "2015-03-30T15:10:23.997Z",
  "updated": "2016-09-29T22:12:23.691Z",
  "description": "Installs/Configures PM2",
  "maintainer": {
    "name": "mindera",
    "email": "miguel.fonseca@mindera.com"
  },
  "license": "MIT",
  "chef_foodcritic_failure": true,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 5,
  "downloads_count": 2377848,
  "downloads_count_revision": 148477,
  "repository_url": "https://github.com/Mindera/pm2-cookbook/",
  "issues_url": "https://github.com/Mindera/pm2-cookbook/issues",
  "chef_source_url": "https://github.com/Mindera/pm2-cookbook/",
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "# PM2 Cookbook\n\n[![Cookbook](https://img.shields.io/cookbook/v/pm2.svg)](https://supermarket.chef.io/cookbooks/pm2)\n[![Build Status](https://travis-ci.org/Mindera/pm2-cookbook.svg?branch=master)](https://travis-ci.org/Mindera/pm2-cookbook)\n\nChef coookbook to install and manage [PM2](https://github.com/Unitech/pm2).\n\n## Requirements\n\nDepends on the cookbooks:\n\n * [nodejs](https://github.com/redguide/nodejs/)\n\n## Platforms\n\n * Centos 6+\n * Amazon Linux\n * Ubuntu 14+\n * Debian 7+\n\n## Attributes\n\n### default.rb\n\n<table>\n    <tr>\n        <th>Attribute</th>\n        <th>Type</th>\n        <th>Description</th>\n        <th>Options</th>\n        <th>Default</th>\n    </tr>\n    <tr>\n        <td><tt>['pm2']['version']</tt></td>\n        <td>String</td>\n        <td>PM2 node module version to install</td>\n        <td>-</td>\n        <td><tt>latest</tt></td>\n    </tr>\n</table>\n\n### Up the chain\n\nThe `nodejs` cookbook uses the following attributes to define the `nodejs` and `npm` formats to install - override them for the desired behaviour.\n\n<table>\n    <tr>\n        <th>Attribute</th>\n        <th>Description</th>\n    </tr>\n    <tr>\n        <td><tt>['nodejs']['install_method']</tt></td>\n        <td>Nodejs install method</td>\n    </tr>\n    <tr>\n        <td><tt>['nodejs']['npm]['install_method']</tt></td>\n        <td>NPM install method</td>\n    </tr>\n</table>\n\nSee the [nodejs](https://github.com/redguide/nodejs/) cookbook for details.\n\n## Recipes\n\n### default.rb\n\nInstalls PM2 as a global node module using a specific version if specified in the `default` attributes described above.\n\n### nodejs.rb\n\nInstall `nodejs` and `npm` using the [nodejs](https://github.com/redguide/nodejs/) cookbook.\n\n### Example\n\nTo install PM2:\n\nAdd the `pm2` cookbook as a dependency:\n\n```ruby\ndepends 'pm2'\n```\n\nInclude the `pm2::default` recipe:\n\n```ruby\ninclude_recipe 'pm2::default'\n```\n\n## Providers\n\n### pm2_application\n\nThe `pm2_application` provider manages a json configuration file for a node application and controls it with PM2.\n\nIt only start processes from a json configuration (located in `/etc/pm2/conf.d`) and it does not support starting processes by calling the PM2 CLI directly.\n\n#### Actions\n\nThe available actions try to represent some of the PM2 CLI control [actions](https://github.com/Unitech/PM2/blob/master/ADVANCED_README.md#raw-examples).\n\n<table>\n    <tr>\n        <th>Action</th>\n        <th>Description</th>\n        <th>Notes</th>\n    </tr>\n    <tr>\n        <td><tt>:deploy</tt></td>\n        <td>Create a json configuration file for a node application</td>\n        <td>All configuration files are deployed in <tt>/etc/pm2/conf.d</tt></td>\n    </tr>\n    <tr>\n        <td><tt>:start</tt></td>\n        <td>Start an application defined as a json file</td>\n        <td>It does not change the state of a running application - use one of the start_or_restart/start_or_reload methods instead</td>\n    </tr>\n    <tr>\n        <td><tt>:stop</tt></td>\n        <td>Stop an application</td>\n        <td>Invokes the PM2 CLI to stop an application by name</td>\n    </tr>\n    <tr>\n        <td><tt>:stop</tt></td>\n        <td>Restart an application</td>\n        <td>Invokes the PM2 CLI to restart an application by name only if it is running</td>\n    </tr>\n    <tr>\n        <td><tt>:reload</tt></td>\n        <td>Reload an application</td>\n        <td>Invokes the PM2 CLI to reload an application by name only if it is running</td>\n    </tr>\n    <tr>\n        <td><tt>:graceful_reload</tt></td>\n        <td>Gracefully reload an application</td>\n        <td>Invokes the PM2 CLI to gracefully reload an application by name only if it is running</td>\n    </tr>\n    <tr>\n        <td><tt>:start_or_restart</tt></td>\n        <td>Start or restart an application</td>\n        <td>Invokes the PM2 CLI to start or restart an application by name</td>\n    </tr>\n    <tr>\n        <td><tt>:start_or_reload</tt></td>\n        <td>Start or reload an application</td>\n        <td>Invokes the PM2 CLI to start or reload an application by name</td>\n    </tr>\n    <tr>\n        <td><tt>:start_or_graceful_reload</tt></td>\n        <td>Start or gracefully reload an application</td>\n        <td>Invokes the PM2 CLI to start or gracefully reload an application by name</td>\n    </tr>\n    <tr>\n        <td><tt>:delete</tt></td>\n        <td>Stop and delete an application json file</td>\n        <td>Invokes the PM2 CLI to stop an application and deletes the json file from the filesystem</td>\n    </tr>\n    <tr>\n        <td><tt>:startup</tt></td>\n        <td>Configures PM2 to start on boot</td>\n        <td>Invokes the PM2 CLI to configure the startup process for the running platform</td>\n    </tr>\n</table>\n\nIf no action is specified then the default action `[:deploy, :start_or_restart, :startup]` will be used.\n\n#### Attributes\n\nThe available attributes try to represent the PM2 json definition options [schema](https://github.com/Unitech/PM2/blob/master/ADVANCED_README.md#schema).\n\n<table>\n    <tr>\n        <th>Attribute</th>\n        <th>Type</th>\n        <th>Description</th>\n        <th>Required</th>\n    </tr>\n    <tr>\n        <td><tt>name</tt></td>\n        <td>String</td>\n        <td>Name of the application - See PM2 documentation for reference - Note: this is the resource name attribute</td>\n        <td>Yes</td>\n    </tr>\n    <tr>\n        <td><tt>script</tt></td>\n        <td>String</td>\n        <td>Node script to execute - See PM2 documentation for reference</td>\n        <td>Yes</td>\n    </tr>\n    <tr>\n        <td><tt>user</tt></td>\n        <td>String</td>\n        <td>User to execute the node process - defaults to `root`</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>home</tt></td>\n        <td>String</td>\n        <td>Value of the PM2_HOME environmental variable - Note: PM2 does not support PM2_HOME properly at this point - so we always override to the .pm2 dir under the user home</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>args</tt></td>\n        <td>Array</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>node_args</tt></td>\n        <td>Array</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>max_memory_restart</tt></td>\n        <td>String</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>instances</tt></td>\n        <td>Integer</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>log_file</tt></td>\n        <td>String</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>error_file</tt></td>\n        <td>String</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>out_file</tt></td>\n        <td>String</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>pid_file</tt></td>\n        <td>String</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>cron_restart</tt></td>\n        <td>String</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>cwd</tt></td>\n        <td>String</td>\n        <td>Location of the node script to execute - See PM2 documentation for reference</td>\n        <td>Yes</td>\n    </tr>\n    <tr>\n        <td><tt>merge_logs</tt></td>\n        <td>TrueClass/FalseClass</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>ignore_watch</tt></td>\n        <td>Array</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>watch_options</tt></td>\n        <td>Hash</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>env</tt></td>\n        <td>Hash</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>log_data_format</tt></td>\n        <td>String</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>min_uptime</tt></td>\n        <td>String</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>max_restart</tt></td>\n        <td>Integer</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>exec_mode</tt></td>\n        <td>String</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>exec_interpreter</tt></td>\n        <td>String</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>write</tt></td>\n        <td>TrueClass/FalseClass</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n    <tr>\n        <td><tt>force</tt></td>\n        <td>TrueClass/FalseClass</td>\n        <td>See PM2 documentation for reference</td>\n        <td>No</td>\n    </tr>\n</table>\n\n#### Example\n\nTo deploy and start (or restart) a `test.js` application that lives in `/tmp/test.js`:\n\nInstall PM2 as described in the `Recipes` example above.\n\nUse the `pm2_application` provider - most basic example:\n\n```ruby\npm2_application 'test' do\n  script 'test.js'\n  cwd '/tmp'\n  action [:deploy, :start_or_restart]\nend\n```\n\nThis will deploy a `/etc/pm2/conf.d/test.json` configuration file and start/restart the application with PM2.\n\n#### References\n\n * PM2 advanced [documentation](https://github.com/Unitech/PM2/blob/master/ADVANCED_README.md)\n\n## Development / Contributing\n\n### Dependencies\n\n * [Ruby](https://www.ruby-lang.org)\n * [Bundler](http://bundler.io)\n\n### Installation\n\n```bash\n$ git clone git@github.com:Mindera/pm2-cookbook.git\n$ cd pm2-cookbook\n$ bundle install\n```\n\n### Tests\n\nTo run unit tests (chefspec):\n```bash\n$ bundle exec rake unit\n```\n\nTo run lint tests (rubocop, foodcritic):\n```bash\n$ bundle exec rake lint\n```\n\nTo run integration tests (kitchen-ci, serverspec):\n```bash\n$ bundle exec rake integration\n```\n",
  "requires": [
    {
      "kind": "host",
      "label": "centos",
      "revision": "~> 6.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "redhat",
      "revision": "~> 6.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "ubuntu",
      "revision": "~> 14.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "debian",
      "revision": "~> 7.8",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "amazon",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/nodejs",
      "revision": "~> 2.4.0",
      "self_resolve": true
    }
  ]
}