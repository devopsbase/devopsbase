{
  "name": "dse Chef cookbook",
  "chef_cookbook_name": "dse",
  "revision": "3.0.21",
  "uris": [
    "https://supermarket.chef.io/cookbooks/dse",
    "https://supermarket.chef.io/cookbooks/dse/download",
    "https://supermarket.chef.io/cookbooks/dse/versions/3.0.21",
    "https://supermarket.chef.io/cookbooks/dse/versions/3.0.21/download",
    "https://supermarket.chef.io/api/v1/cookbooks/dse/versions/3.0.21",
    "https://supermarket.chef.io/api/v1/cookbooks/dse",
    "https://supermarket.chef.io/api/v1/cookbooks/dse/versions/3.0.21/download"
  ],
  "labels": [
    "Chef cookbook",
    "Other",
    "Executable/Script/Chef Cookbook",
    "Mode/Executable/Script/Chef Cookbook"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/dse",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/dse/versions/3.0.21/download",
  "deprecated": false,
  "created": "2014-09-09T13:48:04.761Z",
  "updated": "2016-06-22T18:32:32.908Z",
  "description": "Installs/Configures Datastax Enterprise.",
  "maintainer": {
    "name": "target-cookbooks",
    "email": "daniel.c.parker@target.com"
  },
  "license": "Apache 2.0",
  "chef_foodcritic_failure": null,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 5,
  "downloads_count": 3106311,
  "downloads_count_revision": 31637,
  "repository_url": "https://github.com/target/dse-cookbook",
  "issues_url": "https://github.com/target/dse-cookbook",
  "chef_source_url": "https://github.com/target/dse-cookbook",
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "[![Build Status](https://travis-ci.org/target/dse-cookbook.svg?branch=master)](https://travis-ci.org/target/dse-cookbook)\n\n# Datastax Enterprise Chef Cookbook (Apache Cassandra)\nThis cookbook installs and configures Datastax Enterprise. More info is here ([DataStax Enterprise](http://www.datastax.com/products/)).\n\nIt uses officially released Datastax packages. It can tweak the Cassandra config files, but has no way of adding data or creating keyspaces in Cassandra (yet).\n\n## Usage\n\nThis cookbook is designed to be used in conjuction with a wrapper cookbook. Used alone, a single node cluster can be created, but in order to create a multiple node cluster a wrapper is recommended.\n\nExample in a wrapper:\n\n```ruby\nnode.default['java']['jdk_version'] = \"7\"\nnode.default['cassandra']['seeds'] = \"192.168.1.1, 192.168.1.2\"\nnode.default['cassandra']['dse_version'] = \"4.0.3-1\"\nnode.default['cassandra']['max_heap_size'] = \"12G\"\nnode.default['cassandra']['heap_newsize'] = \"1200M\"\n\ninclude_recipe \"dse::cassandra\"\n```\n\n##Scope\n\nThis cookbook attempts to manage almost all Apache Cassandra configuration settings. It can also create Hadoop and Solr nodes, with less attribute to manage their config.\n\n### Apache Cassandra\n\nThis cookbook currently provides\n\n * Datastax 4.x.x (Datastax Enterprise Edition) via packages.\n\n## Requirements\n\n* Chef 11 or higher\n\n## Supported OS Distributions\nTested on:\n\n* RHEL 6.3, 6.4\n* Ubuntu 14.04.1 LTS\n* Slight testing done on Ubuntu 12.04 (will require some edits)\n\n## Recipes\n\nThe provided recipes are `dse::cassandra`, `dse::solr`, and `dse::hadoop`\n* `dse::cassandra` will provision DSE as a cassandra node.\n* `dse::solr` will provision DSE with solr enabled.\n* `dse::hadoop` will provision DSE with hadoop enabled.\n\nThere are also recipes that should not be called directly that are used for configuration.\n* `dse::default` sets up the templates\n* `dse::datastax` sets up the datastax repos\n* `dse::datstax-agent` configures the datastax-agent if needed\n* `dse::ssl` (work in progress) sets up SSL keys on all nodes\n\n## Attributes\nThis cookbook will install DSE Cassandra by default. Other attributes you can set are:\n\n### default.rb\n\n#### overall settings\n * `node[\"cassandra\"][\"cluster_name\"]` (default: `Test Cluster`): The name of the cluster to provision\n * `node[\"cassandra\"][\"vnodes\"]` (default: `true`): enable or disable vnodes\n * `node[\"cassandra\"][\"intial_token\"]` (default: `nil`): the initial token to use. leave blank for vnodes\n * `node[\"cassandra\"][\"num_tokens\"]` (default: `256`): set the number of tokens to use\n * `node[\"cassandra\"][\"solr\"]` (default: `false`): enable solr or not\n * `node[\"cassandra\"][\"hadoop\"]` (default: `false`): enable hadoop or not\n\n * `node[\"cassandra\"][\"dse_version\"]` (default: `4.0.3-1`): dse version to install\n * `node[\"cassandra\"][\"user\"]` (default: `cassandra`): the cassandra user\n * `node[\"cassandra\"][\"group\"]` (default: `cassandra`): the cassandra group\n\n#### cassandra.yaml settings\n * `node[\"cassandra\"][\"listen_address\"]` (default: `node['ipaddress']`): the ipaddress to use for listen address\n * `node[\"cassandra\"][\"rpc_address\"]` (default: `node['ipaddress']`): the ipaddress to use for rpc address\n * `node[\"cassandra\"][\"broadcast_address\"]` (default: `nil`): the ipaddress to use for broadcast address\n * `node[\"cassandra\"][\"seeds\"]` (default: `node['ipaddress']`): the ipaddress to use for the seed list\n * `node[\"cassandra\"][\"concurrent_reads\"]` (default: `32`): concurrent reads setting\n * `node[\"cassandra\"][\"concurrent_writes\"]` (default: `32`): concurrent writes setting\n * `node[\"cassandra\"][\"compaction_thruput\"]` (default: `16`): limit the throughput of compactions\n * `node[\"cassandra\"][\"multithreaded_compaction\"]` (default: `false`): enable or disable multithreaded compaction\n * `node[\"cassandra\"][\"in_memory_compaction_limit\"]` (default: `64`): size limit for in-memory compactions\n * `node[\"cassandra\"][\"trickle_fsync\"]` (default: `false`): enable trickle fsync, usually for ssd\n * `node[\"cassandra\"][\"range_request_timeout_in_ms\"]` (default: `10000`): default timeout on range requests\n * `node[\"cassandra\"][\"thrift_framed_transport_size_in_mb\"]` (default: `15`): the max size of a thrift frame\n * `node[\"cassandra\"][\"thrift_max_message_length_in_mb\"]` (default: `nil`): the max message length of a thrift call\n * `node[\"cassandra\"][\"concurrent_compactors\"]` (default: `nil`): the number of concurrent compactors to allow\n\n#### Role based seed selection\n * `node[\"cassandra\"][\"role_based_seeds\"]` (default: `false`): set to true to assign seeds based on members of dse-seed role\n * `node['cassandra']['seed_role']` (default: `role:dse-seed`): set to a diffrent role to select seeds\n\n#### gc settings\n\n * `node[\"cassandra\"][\"CMSInitiatingOccupancyFraction\"]` (default: `65`): cms occupancy fraction to use for gc\n * `node[\"cassandra\"][\"max_heap_size\"]` (default: `8192M`): default max heap size for cassandra\n * `node[\"cassandra\"][\"heap_newsize\"]` (default: `800M`): default new gen size for heap\n\n#### authentication settings\n * `node[\"cassandra\"][\"authentication\"]` (default: `false`): enable or disable authentication\n * `node[\"cassandra\"][\"authorization\"]` (default: `false`): enable or disable authorization\n * `node[\"cassandra\"][\"authenticator\"]` (default: ``): the authenticator to use (eg org.apache.cassandra.auth.AllowAllAuthenticator)\n * `node[\"cassandra\"][\"authorizor\"]` (default: ``): the authorizor to use (eg org.apache.cassandra.auth.AllowAllAuthorizer)\n\n#### audit logs\n * `node[\"cassandra\"][\"log_level\"]` (default: `INFO`): the log level for cassandra (or solr/hadoop)\n * `node[\"cassandra\"][\"audit_logging\"]` (default: `false`): turn on audit logging\n * `node[\"cassandra\"][\"audit_dir\"]` (default: `/var/log/cassandra`): the directory to put audit logs in\n * `node[\"cassandra\"][\"active_categories\"]` (default: `ADMIN,AUTH,DDL,DCL`): the categories to audit on\n\n#### metrics settings\n * `node['cassandra']['metrics_reporter']['enabled']` (default: `false`): enable or disable the metrics reporter jar\n * `node['cassandra']['metrics_reporter']['name']` (default: `metrics-graphite`): the name of the jar to use, graphite is a popular one \n * `node['cassandra']['metrics_reporter']['jar_url']` (default: `http://search.maven.org/remotecontent?filepath=com/yammer/metrics/metrics-graphite/2.2.0/metrics-graphite-2.2.0.jar`): where the jar is\n * `node['cassandra']['metrics_reporter']['sha256sum']` (default: `6b4042aabf532229f8678b8dcd34e2215d94a683270898c162175b1b13d87de4`): checksum of the jar\n * `node['cassandra']['metrics_reporter']['jar_name']` (default: `metrics-graphite-2.2.0.jar`): full name of the jar\n * `node['cassandra']['metrics_reporter']['config']` (default: `{}`): hash of the conf to use, example below:\n\n```\nnode.default['cassandra']['metrics_reporter'] = {\n    'enabled' => true,\n    'name' => 'metrics-graphite',\n    'jar_url' => 'http://search.maven.org/remotecontent?filepath=com/yammer/metrics/metrics-graphite/2.2.0/metrics-graphite-2.2.0.jar',\n    'sha256sum' => '6b4042aabf532229f8678b8dcd34e2215d94a683270898c162175b1b13d87de4',\n    'jar_name' => 'metrics-graphite-2.2.0.jar',\n    'config' => {\n      'graphite' => [{\n        'timeunit' => 'SECONDS',\n        'hosts' => [{\n          'host' => 'graphite.host.com',\n          'port' => 2003\n        }],\n        'prefix' => \"servers.#{node.name}.cassandra\",\n        'period' => 60,\n        'predicate' => {\n          'color' => 'white',\n          'useQualifiedName' => true,\n          'patterns' => [\n            '^org.apache.cassandra.metrics.Cache.+',\n          ]\n        }\n      }]\n    }\n  }\n```\n\n### dse.rb\n * `node[\"cassandra\"][\"dse\"][\"delegated_snitch\"]` (default: `org.apache.cassandra.locator.SimpleSnitch`): the snitch to use for dse\n * `node[\"cassandra\"][\"dse\"][\"snitch\"]` (default: `com.datastax.bdp.snitch.DseDelegateSnitch`): the snitch to use in dse.yaml\n * `node[\"cassandra\"][\"dse\"][\"service_name\"]` (default: `dse`): the name of the service\n * `node[\"cassandra\"][\"dse\"][\"conf_dir\"]` (default: `/etc/dse`): the directory of dse config files\n * `node[\"cassandra\"][\"dse\"][\"repo_user\"]` (default: ``): the datastax username for the repo\n * `node[\"cassandra\"][\"dse\"][\"repo_pass\"]` (default: ``): the datastax password for the repo\n * `node[\"cassandra\"][\"dse\"][\"rhel_repo_url\"]` (default: `http://#{node['cassandra']['dse']['repo_user']}:#{node['cassandra']['dse']['repo_pass']}@rpm.datastax.com/enterprise`): the rhel repo\n * `node[\"cassandra\"][\"dse\"][\"debian_repo_url\"]` (default: `http://#{node['cassandra']['dse']['repo_user']}:#{node['cassandra']['dse']['repo_pass']}@debian.datastax.com/enterprise`): the debian repo\n\n### hadoop.rb\n * `node[\"hadoop\"][\"max_heap_size\"]` (default: `10G`): the heap size for hadoop\n * `node[\"hadoop\"][\"heap_newsize\"]` (default: `800M`): the heap newgen size for hadoop\n * `node[\"hadoop\"][\"map_child_java_opts\"]` (default: `4G`): the size of the map child java heap\n * `node[\"hadoop\"][\"reduce_child_java_opts\"]` (default: `4G`): the size of the reduce child java heap\n * `node[\"hadoop\"][\"map_red_localdir\"]` (default: `/data/mapredlocal`): the directory to use for map/reduce\n * `node[\"hive\"][\"scratch_dir\"]` (default: `/data/hive`): the directory to use for hive\n * `node[\"hadoop\"][\"map_reduce_parallel_copies\"]` (default: `20`): the number of map reduce copies\n * `node[\"hadoop\"][\"mapred_tasktracker_map_tasks_max\"]` (default: `23`): the max number of map tasks\n * `node[\"hadoop\"][\"mapred_tasktracker_reduce_tasks_max\"]` (default: `12`): the max number of reduce tasks\n * `node[\"hadoop\"][\"io_sort_mb\"]` (default: `512M`): the size of iosort\n * `node[\"hadoop\"][\"io_sort_factor\"]` (default: `64`): the iosort factor\n\n### solr.rb\n * `node[\"solr\"][\"max_heap_size\"]` (default: `14G`): the heap size for solr\n * `node[\"solr\"][\"heap_newsize\"]` (default: `2400M`): the newgen heap size\n\n### java.rb\nThese are generic java settings. Datastax recommends oracle java, so override openjdk default and download from a specific location.\n * `node[\"dse\"][\"manage_java\"]` (default: `true`): whether or not to use the java recipe to manage the java install\n * `node[\"java\"][\"install_flavor\"]` (default: `oracle`): the flavor of java to install\n * `node[\"java\"][\"jdk_version\"]` (default: `7`): the version of java to use\n * `node['java']['jdk']['7']['x86_64']['url']` (default: ``): the url to get the java 7 file from\n\n### ssl.rb\nThis portion is under construction. SSL does not currently 100% work.\n * `node[\"cassandra\"][\"dse\"][\"cassandra_ssl_dir\"]` (default: `/etc/cassandra`): the directory to use for pem files\n * `node[\"cassandra\"][\"dse\"][\"password_file\"]` (default: `cassandra_pass.txt`): the file to store the keystore pass in\n * `node[\"cassandra\"][\"dse\"][\"internode_encyption\"]` (default: `none`): the encyption to use (all, dc, rack)\n * `node[\"cassandra\"][\"dse\"][\"keystore\"]` (default: `#{node[\"cassandra\"][\"dse\"][\"cassandra_ssl_dir\"]}/#{node[\"hostname\"]}.keystore`): keystore name\n * `node[\"cassandra\"][\"dse\"][\"truststore\"]` (default: `#{node[\"cassandra\"][\"dse\"][\"cassandra_ssl_dir\"]}/#{node[\"hostname\"]}.truststore`): truststore name\n\n### datastax-agent.rb\nThese attributes are used to conigure the datastax-agent. This is used with Datastax Opscenter.\n\n* `node[\"datastax-agent\"][\"enabled\"]` (default: `false`): whether to install the datastax agent and configure\n* `node[\"datastax-agent\"][\"version\"]` (default: `4.1.1-1`): the version of the datastax agent to install\n* `node[\"datastax-agent\"][\"conf_dir\"]` (default: `/var/lib/datastax-agent/conf`): where the datastax-agent conf file is\n* `node[\"datastax-agent\"][\"opscenter_ip\"]` (default: `192.168.32.3`): the Opscenter IP to connect to\n\n\n## Dependencies\n\n* java\n* yum\n* apt\n\nDatastax recommends to use the Oracle jdk version. You can do this by setting an attribute in your environment or run list.\n\n## Kitchen Testing\nThe integration test environment consists of :\n\n* Chef-DK 0.4.0\n* VirtualBox 4.3.24\n* Vagrant 1.7.2\n * vagrant-omnibus\n * vagrant-berkshelf\n * vagrant-share\n * vagrant-login\n\nEdit the .kitchen.yml file in the root of the cookbook and set your Datastax repository username and password in order to run the tests.  Run 'rake' in the root of the cookbook to test the full automated testing suite.\n\n## Copyright & License\n\n- Author: Daniel Parker (<daniel.c.parker@target.com>)\n- Reviewer: Eric Helgeson (<erichelgeson@gmail.com>)\n\nReleased under the [Apache 2.0 License](http://www.apache.org/licenses/LICENSE-2.0.html).\n",
  "requires": [
    {
      "kind": "host",
      "label": "redhat",
      "revision": ">= 6.4",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "centos",
      "revision": ">= 6.4",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "ubuntu",
      "revision": "= 14.04",
      "one_of_group": "os"
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/java",
      "revision": "~> 1.14",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/yum",
      "revision": "~> 3.5",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/yum-epel",
      "revision": "~> 0.6",
      "self_resolve": true
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/apt",
      "revision": "~> 2.0",
      "self_resolve": true
    }
  ]
}