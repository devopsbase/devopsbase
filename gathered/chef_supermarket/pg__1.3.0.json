{
  "name": "pg Chef cookbook",
  "chef_cookbook_name": "pg",
  "revision": "1.3.0",
  "uris": [
    "https://supermarket.chef.io/cookbooks/pg",
    "https://supermarket.chef.io/cookbooks/pg/download",
    "https://supermarket.chef.io/cookbooks/pg/versions/1.3.0",
    "https://supermarket.chef.io/cookbooks/pg/versions/1.3.0/download",
    "https://supermarket.chef.io/api/v1/cookbooks/pg/versions/1.3.0",
    "https://supermarket.chef.io/api/v1/cookbooks/pg",
    "https://supermarket.chef.io/api/v1/cookbooks/pg/versions/1.3.0/download"
  ],
  "labels": [
    "Chef cookbook",
    "Other",
    "Executable/Script/Chef Cookbook",
    "Mode/Executable/Script/Chef Cookbook",
    "Type/Infrastructure/Operating System",
    "Type/Middleware/Data Store/Relational/PostgreSQL"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/pg",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/pg/versions/1.3.0/download",
  "deprecated": false,
  "created": "2016-03-07T23:35:17.192Z",
  "updated": "2016-05-22T14:57:15.082Z",
  "description": "Installs/Configures PostgreSQL.",
  "maintainer": {
    "name": "kemra102",
    "email": "danny@thefallenphoenix.net"
  },
  "license": "BSD-2-Clause",
  "chef_foodcritic_failure": false,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 1,
  "downloads_count": 1169,
  "downloads_count_revision": 208,
  "repository_url": "https://github.com/kemra102/pg-cookbook",
  "issues_url": "https://github.com/kemra102/pg-cookbook/issues",
  "chef_source_url": "https://github.com/kemra102/pg-cookbook",
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "# pg Cookbook\n[![Build Status](https://travis-ci.org/kemra102/pg-cookbook.svg?branch=master)](https://travis-ci.org/kemra102/pg-cookbook)\n\n#### Table of Contents\n\n1. [Overview](#overview)\n2. [Requirements](#requirements)\n3. [Attributes](#attributes)\n4. [Usage](#usage)\n    * [pg_hba.conf](#pg_hba.conf)\n    * [pool_hba.conf](#pool_hba.conf)\n5. [Contributing](#contributing)\n6. [License & Authors](#license-and-authors)\n\n## Overview\n\nThis module manages the installation and configuration of PostgreSQL.\n\n## Requirements\n\nNone.\n\n## Attributes\n\n### pg::server\n| Key                               | Type      | Description                                   | Default |\n|:---------------------------------:|:---------:|:---------------------------------------------:|:-------:|\n| `['pg']['use_pgdg']` | `Boolean` | Determines if Postgres should be installed from the [PGDG](http://www.postgresql.org/about/). | `false`  |\n| `['pg']['manage_repo']` | `Boolean` | Determines if this cookbook should manage the PGDG repo. Only applies if `['pg']['use_pgdg']` is set to `true`. | `true`  |\n| `['pg']['pgdg']['version']` | `String` | Determines which version of Postgres should be installed/managed. Only applies if `['pg']['use_pgdg']` is set to `true`. | `9.3`  |\n| `['pg']['initdb']` | `Boolean` | Determines if the `intidb` command should be run to do initial population of the database. | `true`  |\n| `['pg']['initdb_locale']` | `String` | Determines the locale to be used by the `initdb` command on systems running versions less than Postgres 9.4. | `UTF-8`  |\n| `['pg']['initdb_cmd']` | `String` | The command to be run in order to initialise database. | Varies based on PG Version, see `recipes/server.rb:11-26` |\n\nThe following attributes are used to populate `postgresql.conf`:\n\n| Key                               | Type      | Description                                   | Default |\n|:---------------------------------:|:---------:|:---------------------------------------------:|:-------:|\n| `['pg']['config']['server']['port']` | `Integer` | Port that Postgres should listen on. | `5432` |\n| `['pg']['config']['server']['max_connections']` | `Integer` | Determines the number of connection \"slots\" that are reserved for connections by PostgreSQL superusers. At most max_connections connections can ever be active simultaneously. Whenever the number of active concurrent connections is at least max_connections minus superuser_reserved_connections, new connections will be accepted only for superusers, and no new replication connections will be accepted. | `100` |\n| `['pg']['config']['server']['shared_buffers']` | `String` | Sets the amount of memory the database server uses for shared memory buffers. | `32MB` |\n| `['pg']['config']['server']['logging_collector']` | `Boolean` | This parameter enables the logging collector, which is a background process that captures log messages sent to stderr and redirects them into log files. | `true` |\n| `['pg']['config']['server']['log_filename']` | `String` | When logging_collector is enabled, this parameter sets the file names of the created log files. The value is treated as a strftime pattern, so %-escapes can be used to specify time-varying file names. (Note that if there are any time-zone-dependent %-escapes, the computation is done in the zone specified by log_timezone.) The supported %-escapes are similar to those listed in the Open Group's strftime specification. Note that the system's strftime is not used directly, so platform-specific (nonstandard) extensions do not work. | `postgresql-%a.log` |\n| `['pg']['config']['server']['log_truncate_on_rotation']` | `Boolean` | When logging_collector is enabled, this parameter will cause PostgreSQL to truncate (overwrite), rather than append to, any existing log file of the same name. | `true` |\n| `['pg']['config']['server']['log_rotation_age']` | `String` | When logging_collector is enabled, this parameter determines the maximum lifetime of an individual log file. After this many minutes have elapsed, a new log file will be created. Set to zero to disable time-based creation of new log files. | `1d` |\n| `['pg']['config']['server']['log_rotation_size']` | `Integer` | When logging_collector is enabled, this parameter determines the maximum size of an individual log file. After this many kilobytes have been emitted into a log file, a new log file will be created. Set to zero to disable size-based creation of new log files. | `0` |\n| `['pg']['config']['server']['log_timezone']` | `String` | Sets the time zone used for timestamps written in the server log. Unlike TimeZone, this value is cluster-wide, so that all sessions will report timestamps consistently. | `UTC` |\n| `['pg']['config']['server']['datestyle']` | `String` | Sets the display format for date and time values, as well as the rules for interpreting ambiguous date input values. | `iso, mdy` |\n| `['pg']['config']['server']['timezone']` | `String` | Sets the time zone for displaying and interpreting time stamps. | `UTC` |\n| `['pg']['config']['server']['lc_messages']` | `String` | Sets the language in which messages are displayed. | `en_US.UTF-8` |\n| `['pg']['config']['server']['lc_monetary']` | `String` | Sets the locale to use for formatting monetary amounts, for example with the to_char family of functions. | `en_US.UTF-8` |\n| `['pg']['config']['server']['lc_numeric']` | `String` | Sets the locale to use for formatting numbers, for example with the to_char family of functions. | `en_US.UTF-8` |\n| `['pg']['config']['server']['lc_time']` | `String` | Sets the locale to use for formatting dates and times, for example with the to_char family of functions. | `en_US.UTF-8` |\n| `['pg']['config']['server']['default_text_search_config']` | `String` | Selects the text search configuration that is used by those variants of the text search functions that do not have an explicit argument specifying the configuration. | `pg_catalog.english` |\n\n> NOTE: Values that read as `on` or `off` in `postgresql.conf` should be set as `true` or `false` respectively.\n\nFinally the following default `pg_hba.conf` entries are:\n\n```ruby\ndefault['pg']['config']['hba']['local'] = {\n  enabled: true,\n  type: 'local',\n  database: 'all',\n  user: 'postgres',\n  address: '',\n  method: 'trust'\n}\ndefault['pg']['config']['hba']['host'] = {\n  enabled: true,\n  type: 'host',\n  database: 'all',\n  user: 'all',\n  address: '127.0.0.1/32',\n  method: 'md5'\n}\ndefault['pg']['config']['hba']['host6'] = {\n  enabled: true,\n  type: 'host',\n  database: 'all',\n  user: 'all',\n  address: '::1/128',\n  method: 'md5'\n}\n```\n\nThe default `pg_hba.conf` entries can be disabled by setting their `enabled` values to `false`, e.g.:\n\n```ruby\ndefault['pg']['config']['hba']['local']['enabled'] = false\n```\n\n### pg::pgpool\n\n| Key                               | Type      | Description                                   | Default |\n|:---------------------------------:|:---------:|:---------------------------------------------:|:-------:|\n| `['pg']['config']['pgpool']['listen_addresses']` | `String` | Specifies the hostname or IP address, on which pgpool-II will accept TCP/IP connections. | `localhost` |\n| `['pg']['config']['pgpool']['port']` | `Integer` | The port number used by pgpool-II to listen for connections. | `9999` |\n| `['pg']['config']['pgpool']['socket_dir']` | `String` | The directory where the UNIX domain socket accepting connections for pgpool-II will be created. | `/tmp` |\n| `['pg']['config']['pgpool']['listen_backlog_multiplier']` | `Integer` | Controls the length of connection queue from frontend to pgpool-II. | `2` |\n| `['pg']['config']['pgpool']['serialize_accept']` | `Boolean` | Whether to serialize accept() call for incoming client connections. | `false` |\n| `['pg']['config']['pgpool']['pcp_listen_addresses']` | `String` | Specifies the hostname or IP address, on which pcp process will accept TCP/IP connections. | `*` |\n| `['pg']['config']['pgpool']['pcp_port']` | `Integer` | The port number where PCP process accepts connections. | `9898` |\n| `['pg']['config']['pgpool']['pcp_socket_dir']` | `String` | The directory path of the UNIX domain socket accepting connections for the PCP process. | `/tmp` |\n| `['pg']['config']['pgpool']['backend_hostname0']` | `String` | Specifies where to connect with the PostgreSQL backend. It is used by pgpool-II to communicate with the server. | `localhost` |\n| `['pg']['config']['pgpool']['backend_port0']` | `Integer` | Specifies the port number of the backends. | `5432` |\n| `['pg']['config']['pgpool']['backend_weight0']` | `Integer` | Specifies the load balance ratio for the backends. | `1` |\n| `['pg']['config']['pgpool']['backend_data_directory0']` | `Integer` | Specifies the database cluster directory of the backends. | `''` |\n| `['pg']['config']['pgpool']['backend_flag0']` | `String` | Controls various backend behavior. | `ALLOW_TO_FAILOVER` |\n| `['pg']['config']['pgpool']['enable_pool_hba']` | `Boolean` | Just like the `pg_hba.conf` file for PostgreSQL. | `false` |\n| `['pg']['config']['pgpool']['authentication_timeout']` | `Integer` | Specify the timeout for pgpool authentication. | `60` |\n| `['pg']['config']['pgpool']['ssl']` | `Boolean` | If `true`, enable SSL support for both the frontend and backend connections. | `false` |\n| `['pg']['config']['pgpool']['num_init_children']` | `Integer` | The number of preforked pgpool-II server processes. | `32` |\n| `['pg']['config']['pgpool']['max_pool']` | `Integer` | The maximum number of cached connections in pgpool-II children processes. | `4` |\n| `['pg']['config']['pgpool']['child_life_time']` | `Integer` | A pgpool-II child process' life time in seconds. | `300` |\n| `['pg']['config']['pgpool']['child_max_connections']` | `Integer` | A pgpool-II child process will be terminated after this many connections from clients. | `0` |\n| `['pg']['config']['pgpool']['connection_life_time']` | `Integer` | Cached connections expiration time in seconds. An expired cached connection will be disconnected. | `0` |\n| `['pg']['config']['pgpool']['client_idle_limit']` | `Integer` | Disconnect a client if it has been idle for client_idle_limit seconds after the last query has completed. | `0` |\n| `['pg']['config']['pgpool']['log_destination']` | `String` | PgPool II supports several methods for logging server messages, including `stderr` and `syslog`. | `stderr` |\n| `['pg']['config']['pgpool']['log_line_prefix']` | `String` | This is a printf-style string that is output at the beginning of each log line. | `%t: pid %p: ` |\n| `['pg']['config']['pgpool']['log_connections']` | `Boolean` | If true, all incoming connections will be printed to the log. | `false` |\n| `['pg']['config']['pgpool']['log_hostname']` | `Boolean` | If true, ps command status will show the client's hostname instead of an IP address. | `false` |\n| `['pg']['config']['pgpool']['log_statement']` | `Boolean` | Produces SQL log messages when true. | `false` |\n| `['pg']['config']['pgpool']['log_per_node_statement']` | `Boolean` | Similar to log_statement, except that it prints logs for each DB node separately. | `false` |\n| `['pg']['config']['pgpool']['log_standby_delay']` | `String` | Specifies how to log the replication delay. | `none` |\n| `['pg']['config']['pgpool']['syslog_facility']` | `String` | When logging to syslog is enabled, this parameter determines the syslog \"facility\" to be used. | `LOCAL0` |\n| `['pg']['config']['pgpool']['syslog_ident']` | `String` | When logging to syslog is enabled, this parameter determines the program name used to identify PgPool messages in syslog logs. | `pgpool` |\n| `['pg']['config']['pgpool']['debug_level']` | `Integer` | Debug message verbosity level. | `0` |\n| `['pg']['config']['pgpool']['connection_cache']` | `Boolean` | Caches connections to backends when set to true. | `true` |\n| `['pg']['config']['pgpool']['reset_query_list']` | `String` | Specifies the SQL commands sent to reset the connection to the backend when exiting a session. | `ABORT; DISCARD ALL` |\n| `['pg']['config']['pgpool']['replication_mode']` | `Boolean` | Setting to true enables replication mode. | `false` |\n| `['pg']['config']['pgpool']['insert_lock']` | `Boolean` | If replicating a table with SERIAL data type, the SERIAL column value may differ between the backends. | `true` |\n| `['pg']['config']['pgpool']['lobj_lock_table']` | `String` | This parameter specifies a table name used for large object replication control. | `''` |\n| `['pg']['config']['pgpool']['replication_stop_on_mismatch']` | `Boolean` | When set to true, if all backends don't return the same packet kind, the backends that differ from most frequent result set are degenerated. | `false` |\n| `['pg']['config']['pgpool']['failover_if_affected_tuples_mismatch']` | `Boolean` | When set to true, if backends don't return the same number of affected tuples during an `INSERT`/`UPDATE`/`DELETE`, the backends that differ from most frequent result set are degenerated.  | `false` |\n| `['pg']['config']['pgpool']['load_balance_mode']` | `Boolean` | When set to true, SELECT queries will be distributed to each backend for load balancing. Default is false. | `false` |\n| `['pg']['config']['pgpool']['ignore_leading_white_space']` | `Boolean` | pgpool-II ignores white spaces at the beginning of SQL queries while in the load balance mode. | `true` |\n| `['pg']['config']['pgpool']['white_function_list']` | `String` | Specify a comma separated list of function names that **do not** update the database. | `''` |\n| `['pg']['config']['pgpool']['black_function_list']` | `String` | Specify a comma separated list of function names that **do** update the database. | `nextval,setval,nextval,setval` |\n| `['pg']['config']['pgpool']['database_redirect_preference_list']` | `String` | You can set \"database name:node id\" pair to specify the node id when connecting to the database. | `''` |\n| `['pg']['config']['pgpool']['app_name_redirect_preference_list']` | `String` | You can set \"application name:node id\" pair to specify the node id when the application is used.  | `''` |\n| `['pg']['config']['pgpool']['allow_sql_comments']` | `Boolean` | If on, ignore SQL comments when judging if load balance or query cache is possible. If off, SQL comments effectively prevent the judgment (pre 3.4 behavior). | `false` |\n| `['pg']['config']['pgpool']['master_slave_mode']` | `Boolean` | This mode is used to couple pgpool-II with another master/slave replication software (like Slony-I and Streaming replication), which is responsible for doing the actual data replication. | `false` |\n| `['pg']['config']['pgpool']['master_slave_sub_mode']` | `String` | The master/slave mode has a `master_slave_sub` mode. The default is `slony` which is suitable for Slony-I. You can also set it to `stream`, which should be set if you want to work with PostgreSQL's built-in replication system (Streaming Replication). | `slony` |\n| `['pg']['config']['pgpool']['sr_check_period']` | `Integer` | This parameter specifies the interval between the streaming replication delay checks in seconds.  | `0` |\n| `['pg']['config']['pgpool']['sr_check_user']` | `String` | The user name to perform streaming replication check. | `nobody` |\n| `['pg']['config']['pgpool']['sr_check_password']` | `String` | The password of the user to perform streaming replication check. | `''` |\n| `['pg']['config']['pgpool']['sr_check_database']` | `String` | The database to perform streaming replication delay check. | `postgres` |\n| `['pg']['config']['pgpool']['delay_threshold']` | `Integer` | Specifies the maximum tolerated replication delay of the standby against the primary server in WAL bytes. | `0` |\n| `['pg']['config']['pgpool']['follow_master_command']` | `String` | This parameter specifies a command to run in master/slave streaming replication mode only after a master failover | `''` |\n| `['pg']['config']['pgpool']['health_check_period']` | `Integer` | This parameter specifies the interval between the health checks in seconds. | `0` |\n| `['pg']['config']['pgpool']['health_check_timeout']` | `Integer` | pgpool-II periodically tries to connect to the backends to detect any error on the servers or networks. | `20` |\n| `['pg']['config']['pgpool']['health_check_user']` | `String` | The user name to perform health check. | `nobody` |\n| `['pg']['config']['pgpool']['health_check_password']` | `String` | The password of the user to perform health check. | `''` |\n| `['pg']['config']['pgpool']['health_check_database']` | `String` | The database name to perform health check. | `''` |\n| `['pg']['config']['pgpool']['health_check_max_retries']` | `Integer` | The maximum number of times to retry a failed health check before giving up and initiating failover. | `0` |\n| `['pg']['config']['pgpool']['health_check_retry_delay']` | `Integer` | The amount of time (in seconds) to sleep between failed health check retries (not used unless `health_check_max_retries` is > 0). | `1` |\n| `['pg']['config']['pgpool']['failover_command']` | `String` | This parameter specifies a command to run when a node is detached. | `''` |\n| `['pg']['config']['pgpool']['failback_command']` | `String` | This parameter specifies a command to run when a node is attached. | `''` |\n| `['pg']['config']['pgpool']['fail_over_on_backend_error']` | `Boolean` | If true, and an error occurs when reading/writing to the backend communication, pgpool-II will trigger the fail over procedure. | `true` |\n| `['pg']['config']['pgpool']['search_primary_node_timeout']` | `Integer` | The parameter specifies the maximum amount of time in seconds to search for a primary node when a failover scenario occurs. | `10` |\n| `['pg']['config']['pgpool']['recovery_user']` | `String` | This parameter specifies a PostgreSQL user name for online recovery. | `nobody` |\n| `['pg']['config']['pgpool']['recovery_password']` | `String` | This parameter specifies a PostgreSQL password for online recovery. | `''` |\n| `['pg']['config']['pgpool']['recovery_1st_stage_command']` | `String` | This parameter specifies a command to be run by master(primary) PostgreSQL server at the first stage of online recovery. | `''` |\n| `['pg']['config']['pgpool']['recovery_2nd_stage_command']` | `String` | This parameter specifies a command to be run by master(primary) PostgreSQL server at the second stage of online recovery. | `''` |\n| `['pg']['config']['pgpool']['recovery_timeout']` | `Integer` | pgpool does not accept new connections during the second stage. If a client connects to pgpool during recovery processing, it will have to wait for the end of the recovery. This parameter specifies recovery timeout in sec. If this timeout is reached, pgpool cancels online recovery and accepts connections. | `90` |\n| `['pg']['config']['pgpool']['client_idle_limit_in_recovery']` | `Integer` | Similar to client_idle_limit but only takes effect in the second stage of recovery. | `0` |\n| `['pg']['config']['pgpool']['use_watchdog']` | `Boolean` | If on, activates watchdog. | `false` |\n| `['pg']['config']['pgpool']['trusted_servers']` | `String` | The list of trusted servers to check the up stream connections. | `''` |\n| `['pg']['config']['pgpool']['ping_path']` | `String` | This parameter specifies a path of ping command for monitoring connection to the upper servers. | `/bin` |\n| `['pg']['config']['pgpool']['wd_hostname']` | `String` | Specifies the hostname or IP address of pgpool-II server. | `''` |\n| `['pg']['config']['pgpool']['wd_port']` | `Integer` | Specifies the port number for watchdog communication. | `9000` |\n| `['pg']['config']['pgpool']['wd_priority']` | `Integer` | This parameter can be used to elevate the local watchdog node priority in the elections to select master watchdog node. | `1` |\n| `['pg']['config']['pgpool']['wd_authkey']` | `String` | This option specifies the authentication key used in watchdog communication. All the pgpool-II must have the same key. | `''` |\n| `['pg']['config']['pgpool']['wd_ipc_socket_dir']` | `String` | The directory where the UNIX domain socket accepting pgpool-II watchdog IPC connections will be created.  | `/tmp` |\n| `['pg']['config']['pgpool']['delegate_IP']` | `String` | Specifies the virtual IP address (VIP) of pgpool-II that is connected from client servers (application servers etc.). | `''` |\n| `['pg']['config']['pgpool']['if_cmd_path']` | `String` | This parameter specifies a path of a command to switch the IP address. | `/sbin` |\n| `['pg']['config']['pgpool']['if_up_cmd']` | `String` | This parameter specifies a command to bring up the virtual IP. | `ip addr add $_IP_$/24 dev #{node['network']['default_interface']} label #{node['network']['default_interface']}:0` |\n| `['pg']['config']['pgpool']['if_down_cmd']` | `String` | This parameter specifies a command to bring down the virtual IP. | `ip addr del $_IP_$/24 dev #{node['network']['default_interface']}` |\n| `['pg']['config']['pgpool']['arping_path']` | `String` | This parameter specifies a path of a command to send an ARP request after the virtual IP is switched. | `/usr/sbin` |\n| `['pg']['config']['pgpool']['arping_cmd']` | `String` | This parameter specifies a command to send an ARP request after the virtual IP is switched. | `arping -U $_IP_$ -w 1` |\n| `['pg']['config']['pgpool']['clear_memqcache_on_escalation']` | `Boolean` | If this is on, watchdog clears all the query cache in the shared memory when pgpool-II escaltes to active.  | `true` |\n| `['pg']['config']['pgpool']['wd_escalation_command']` | `String` | Watchdog executes this command on the node that is escalated to the master watchdog. | `''` |\n| `['pg']['config']['pgpool']['wd_de_escalation_command']` | `String` | Watchdog executes this command on the master pgpool-II watchdog node when that node resigns from the master node responsibilities. | `''` |\n| `['pg']['config']['pgpool']['wd_monitoring_interfaces_list']` | `String` | Specify a comma separated list of network device names, to be monitored by the watchdog process for the network link state. | `''` |\n| `['pg']['config']['pgpool']['wd_lifecheck_method']` | `String` | This parameter specifies the method of life check. This can be either of `heartbeat` (default), `query` or `external`. | `heartbeat` |\n| `['pg']['config']['pgpool']['wd_interval']` | `Integer` | This parameter specifies the interval between life checks of pgpool-II in second. | `10` |\n| `['pg']['config']['pgpool']['wd_heartbeat_port']` | `Integer` | This option specifies the port number to receive heartbeat signals. | `9694` |\n| `['pg']['config']['pgpool']['wd_heartbeat_keepalive']` | `Integer` | This option specifies the interval time (sec.) of sending heartbeat signals. | `2` |\n| `['pg']['config']['pgpool']['wd_heartbeat_deadtime']` | `Integer` | If there are no heartbeat signal for the period specified by this option, watchdog regards it as failure of the remote pgpool-II. | `30` |\n| `['pg']['config']['pgpool']['heartbeat_destination0']` | `String` | This option specifies the destination of heartbeat signals by IP address or hostname. | `host0_ip1` |\n| `['pg']['config']['pgpool']['heartbeat_destination_port0']` | `Integer` | This option specifies the port number of destination of heartbeat signals which is specified by heartbeat_destinationX. | `9694` |\n| `['pg']['config']['pgpool']['heartbeat_device0']` | `String` | This option specifies the network device name for sending heartbeat signals to destination specified by heartbeat_destinationX. | `''` |\n| `['pg']['config']['pgpool']['wd_life_point']` | `Integer` | The times to retry a failed life check of pgpool-II. | `3` |\n| `['pg']['config']['pgpool']['wd_lifecheck_query']` | `String` | Actual query to check pgpool-II. | `SELECT 1` |\n| `['pg']['config']['pgpool']['wd_lifecheck_dbname']` | `String` | The database name connected for checking pgpool-II. | `template1` |\n| `['pg']['config']['pgpool']['wd_lifecheck_user']` | `String` | The user name to check pgpool-II. | `nobody` |\n| `['pg']['config']['pgpool']['wd_lifecheck_password']` | `String` | The password of the user to check pgpool-II. | `''` |\n| `['pg']['config']['pgpool']['relcache_expire']` | `Integer` | Life time of relation cache in seconds. | `0` |\n| `['pg']['config']['pgpool']['relcache_size']` | `Integer` | Number of relcache entries. | `256` |\n| `['pg']['config']['pgpool']['check_temp_table']` | `Boolean` | If on, enable temporary table check in SELECT statements. | `true` |\n| `['pg']['config']['pgpool']['check_unlogged_table']` | `Boolean` | If on, enable unlogged table check in SELECT statements. | `true` |\n| `['pg']['config']['pgpool']['memory_cache_enabled']` | `Boolean` | To enable the memory cache functionality, set this to on. | `false` |\n| `['pg']['config']['pgpool']['memqcache_method']` | `String` | Memory cache behavior can be specified by `memqcache_method` directive. Either `shmem` (shared memory) or `memcached`. | `shmem` |\n| `['pg']['config']['pgpool']['memqcache_memcached_host']` | `String` | Specify the host name or the IP address in which memcached works. | `localhost` |\n| `['pg']['config']['pgpool']['memqcache_memcached_port']` | `Integer` | Specify the port number of memcached. | `11211` |\n| `['pg']['config']['pgpool']['memqcache_total_size']` | `Integer` | Specify the size of shared memory as cache storage in bytes. | `67108864` |\n| `['pg']['config']['pgpool']['memqcache_max_num_cache']` | `Integer` | Specify the number of cache entries. | `1000000` |\n| `['pg']['config']['pgpool']['memqcache_expire']` | `Integer` | Life time of query cache in seconds. | `0` |\n| `['pg']['config']['pgpool']['memqcache_auto_cache_invalidation']` | `Boolean` | If on, automatically deletes cache related to the updated tables. | `true` |\n| `['pg']['config']['pgpool']['memqcache_maxcache']` | `Integer` | If the size of a `SELECT` result is larger than `memqcache_maxcache` bytes, it is not cached and the messages is shown: `2012-05-02 15:08:17 LOG:   pid 13756: pool_add_temp_query_cache: data size exceeds memqcache_maxcache. current:4095 requested:111 memq_maxcache:4096`. To avoid this problem, you have to set `memqcache_maxcache` larger. | `409600` |\n| `['pg']['config']['pgpool']['memqcache_cache_block_size']` | `Integer` | If cache storage is shared memory, pgpool uses the memory divided by memqcache_cache_block_size. | `1048576` |\n| `['pg']['config']['pgpool']['memqcache_oiddir']` | `String` | Full path to the directory where oids of tables used by SELECTs are stored. | `/var/log/pgpool/oiddir` |\n| `['pg']['config']['pgpool']white_memqcache_table_list` | `String` | Specify a comma separated list of table names whose SELECT results are to be cached even if they are VIEWs or unlogged tables. | `''` |\n| `['pg']['config']['pgpool']['black_memqcache_table_list']` | `String` | Specify a comma separated list of table names whose SELECT results are **NOT** to be cached. | `''` |\n| `['pg']['config']['pgpool']['pid_file_name']` | `String` | Full path to a file which contains pgpool's process id. | `/var/run/pgpool-II-#{node['pg']['pgdg']['version'].delete('.')}/pgpool.pid` |\n| `['pg']['config']['pgpool']['logdir']` | `String` | pgpool_status is written into this directory. | `/var/log/pgpool-II-#{node['pg']['pgdg']['version'].delete('.')}` |\n\nThe following default entry is added to `pool_hba.conf`:\n\n```ruby\ndefault['pg']['config']['pool_hba']['md5'] = {\n  enabled: true,\n  type: 'host',\n  database: 'all',\n  user: 'all',\n  address: '0.0.0.0/0',\n  method: 'md5'\n}\n```\n\n## Usage\n\nThis recipe:\n\n* Optionally sets up the PGDG repo.\n* Installs Postgres Client.\n* Installs Postgres Server.\n* Configures Postgres Server.\n* Configures Host-Based Authentication.\n* Manages Postgres service.\n* Installs pgpool-II.\n* Configures pgpool-II (including PCP & HBA).\n* Manages pgpool-II service.\n\nTo install the Postgres client:\n\n```ruby\ninclude_recipe 'pg::client'\n```\n\nTo install the Postgres server:\n\n```ruby\ninclude_recipe 'pg::server'\n```\n\nTo install pgpool-II:\n\n```ruby\ninclude_recipe 'pg::pgpool'\n```\n\n### pg_hba.conf\n\nTo create new entries in `pg_hba.conf` create a new uniquely named hash under `['pg']['config']['hba']`, e.g.:\n\n```ruby\ndefault['pg']['config']['hba']['www'] = {\n  enabled: true,\n  type: 'host',\n  database: 'www',\n  user: 'www',\n  address: '192.168.0.1/32',\n  method: 'md5'\n}\n```\n\n### pool_hba.conf\n\nTo create new entries in `pool_hba.conf` for pgpool-II servers create a new uniquely named hash under `['pg']['config']['pool_hba']`, e.g.:\n\n```ruby\ndefault['pg']['config']['pool_hba']['www'] = {\n  enabled: true,\n  type: 'host',\n  database: 'www',\n  user: 'www',\n  address: '192.168.0.1/32',\n  method: 'trust'\n}\n```\n\n## Contributing\n\nIf you would like to contribute to this cookbook please follow these steps;\n\n1. Fork the repository on Github.\n2. Create a named feature branch (like `add_component_x`).\n3. Write your change.\n4. Write tests for your change (if applicable).\n5. Write documentation for your change (if applicable).\n6. Run the tests, ensuring they all pass.\n7. Submit a Pull Request using GitHub.\n\n## License and Authors\n\nLicense: [BSD 2-Clause](https://tldrlegal.com/license/bsd-2-clause-license-\\(freebsd\\))\n\nAuthors:\n\n  * [Danny Roberts](https://github.com/kemra102)\n  * [All Contributors](https://github.com/kemra102/yumserver-cookbook/graphs/contributors)\n",
  "requires": [
    {
      "kind": "host",
      "label": "centos",
      "revision": ">= 6.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "oracle",
      "revision": ">= 6.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "redhat",
      "revision": ">= 6.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "scientific",
      "revision": ">= 6.0",
      "one_of_group": "os"
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/yum",
      "revision": ">= 3.5.2",
      "self_resolve": true
    }
  ]
}