{
  "name": "ssl_certificate Chef cookbook",
  "chef_cookbook_name": "ssl_certificate",
  "revision": "1.2.0",
  "uris": [
    "https://supermarket.chef.io/cookbooks/ssl_certificate",
    "https://supermarket.chef.io/cookbooks/ssl_certificate/download",
    "https://supermarket.chef.io/cookbooks/ssl_certificate/versions/1.2.0",
    "https://supermarket.chef.io/cookbooks/ssl_certificate/versions/1.2.0/download",
    "https://supermarket.chef.io/api/v1/cookbooks/ssl_certificate/versions/1.2.0",
    "https://supermarket.chef.io/api/v1/cookbooks/ssl_certificate",
    "https://supermarket.chef.io/api/v1/cookbooks/ssl_certificate/versions/1.2.0/download"
  ],
  "labels": [
    "Chef cookbook",
    "Applications",
    "Executable/Script/Chef Cookbook",
    "Mode/Executable/Script/Chef Cookbook",
    "Type/Devopsware/Version Control/Git",
    "Type/Infrastructure/Operating System",
    "Type/Middleware/Runtime/JavaScript/Node.js"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/ssl_certificate",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/ssl_certificate/versions/1.2.0/download",
  "deprecated": false,
  "created": "2014-04-15T10:13:28.000Z",
  "updated": "2016-06-06T04:02:07.831Z",
  "description": "The main purpose of this cookbook is to make it easy for other cookbooks to\nsupport SSL. With the resource included, you will be able to manage certificates\nreading them from attributes, data bags or chef-vaults. Exposing its\nconfiguration through node attributes.\n",
  "maintainer": {
    "name": "zuazo",
    "email": "team@onddo.com"
  },
  "license": "Apache 2.0",
  "chef_foodcritic_failure": false,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 20,
  "downloads_count": 8381610,
  "downloads_count_revision": 506362,
  "repository_url": "https://github.com/zuazo/ssl_certificate-cookbook",
  "issues_url": "https://github.com/zuazo/ssl_certificate-cookbook/issues",
  "chef_source_url": "https://github.com/zuazo/ssl_certificate-cookbook",
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "Description\n===========\n[![Cookbook Version](https://img.shields.io/cookbook/v/ssl_certificate.svg?style=flat)](https://supermarket.getchef.com/cookbooks/ssl_certificate)\n[![Dependency Status](http://img.shields.io/gemnasium/onddo/ssl_certificate-cookbook.svg?style=flat)](https://gemnasium.com/onddo/ssl_certificate-cookbook)\n[![Code Climate](http://img.shields.io/codeclimate/github/onddo/ssl_certificate-cookbook.svg?style=flat)](https://codeclimate.com/github/onddo/ssl_certificate-cookbook)\n[![Build Status](http://img.shields.io/travis/onddo/ssl_certificate-cookbook/1.2.0.svg?style=flat)](https://travis-ci.org/onddo/ssl_certificate-cookbook)\n\nThe main purpose of this cookbook is to make it easy for other cookbooks to support SSL. With the resource included, you will be able to manage certificates reading them from attributes, data bags or chef-vaults. Exposing its configuration through node attributes.\n\nMuch of the code in this cookbook is heavily based on the SSL implementation from the [owncloud](http://community.opscode.com/cookbooks/owncloud) cookbook.\n\nTable of Contents\n=================\n\n* [Requirements](#requirements)\n  * [Supported Platforms](#supported-platforms)\n  * [Required Applications](#required-applications)\n* [Attributes](#attributes)\n  * [Service Attributes](#service-attributes)\n* [Resources](#resources)\n  * [ssl_certificate](#ssl_certificate)\n    * [ssl_certificate Actions](#ssl_certificate-actions)\n    * [ssl_certificate Parameters](#ssl_certificate-parameters)\n* [Templates](#templates)\n  * [Partial Templates](#partial-templates)\n  * [Securing Server Side TLS](#securing-server-side-tls)\n* [Usage](#usage)\n  * [Including the Cookbook](#including-the-cookbook)\n  * [A Short Example](#a-short-example)\n  * [Namespaces](#namespaces)\n  * [Examples](#examples)\n    * [Apache Examples](#apache-examples)\n    * [Nginx Example](#nginx-example)\n    * [Reading the Certificate from Attributes](#reading-the-certificate-from-attributes)\n    * [Reading the Certificate from a Data Bag](#reading-the-certificate-from-a-data-bag)\n    * [Reading the Certificate from Chef Vault](#reading-the-certificate-from-chef-vault)\n    * [Reading the Certificate from Files](#reading-the-certificate-from-files)\n    * [Reading the Certificate from Different Places](#reading-the-certificate-from-different-places)\n    * [Creating a Certificate with Subject Alternate Names](#creating-a-certificate-with-subject-alternate-names)\n    * [Reading Key, Certificate and Intermediary from a Data Bag](#reading-key-certificate-and-intermediary-from-a-data-bag)\n    * [Creating a Certificate from a Certificate Authority](#creating-a-certificate-from-a-certificate-authority)\n    * [Reading the CA Certificate from a Chef Vault Bag](#reading-the-ca-certificate-from-a-chef-vault-bag)\n* [Testing](#testing)\n  * [ChefSpec Matchers](#chefspec-matchers)\n    * [ssl_certificate(name)](#ssl_certificatename)\n    * [create_ssl_certificate(name)](#create_ssl_certificatename)\n* [Contributing](#contributing)\n* [TODO](#todo)\n* [License and Author](#license-and-author)\n\nRequirements\n============\n\n## Supported Platforms\n\nThis cookbook has been tested on the following platforms:\n\n* Amazon Linux\n* CentOS\n* Debian\n* Fedora\n* FreeBSD\n* RedHat\n* Ubuntu\n\nPlease, [let us know](https://github.com/onddo/ssl_certificate-cookbook/issues/new?title=I%20have%20used%20it%20successfully%20on%20...) if you use it successfully on any other platform.\n\n## Required Applications\n\n* Chef `>= 11.14.2`.\n* Ruby `1.9.3` or higher.\n\nAttributes\n==========\n\n| Attribute                                             | Default      | Description                        |\n|:------------------------------------------------------|:-------------|:-----------------------------------|\n| `node['ssl_certificate']['user']`                     | `'root'`     | Default SSL files owner user.\n| `node['ssl_certificate']['group']`                    | *calculated* | Default SSL files owner group.\n| `node['ssl_certificate']['key_dir']`                  | *calculated* | Default SSL key directory.\n| `node['ssl_certificate']['cert_dir']`                 | *calculated* | Default SSL certificate directory.\n\n## Service Attributes\n\nThe following attributes are used to integrate SSL specific configurations with different services (Apache, nginx, ...). They are used internally by [the apache and nginx templates](#templates).\n\n| Attribute                                             | Default      | Description                        |\n|:------------------------------------------------------|:-------------|:-----------------------------------|\n| `node['ssl_certificate']['service']['cipher_suite']`  | `nil`        | Service default SSL cipher suite.\n| `node['ssl_certificate']['service']['protocols']`     | `nil`        | Service default SSL protocols.\n| `node['ssl_certificate']['service']['apache']`        | *calculated* | Apache web service httpd specific SSL attributes.\n| `node['ssl_certificate']['service']['nginx']`         | *calculated* | nginx web service specific SSL attributes.\n| `node['ssl_certificate']['service']['compatibility']` | `nil`        | Service SSL compatibility level (See [below](#securing-server-side-tls)).\n| `node['ssl_certificate']['service']['use_hsts']`      | `true`       | Whether to enable [HSTS](http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security) in the service.\n| `node['ssl_certificate']['service']['use_stapling']`  | *calculated* | Whether to enable [OCSP stapling](http://en.wikipedia.org/wiki/OCSP_stapling) in the service (nginx only, use `node['apache']['mod_ssl']['use_stapling']` for apache).\n\nSee the [`ServiceHelpers` class documentation](http://www.rubydoc.info/github/onddo/ssl_certificate-cookbook/1.2.0/Chef/SslCertificateCookbook/ServiceHelpers) to learn how to integrate them with new services.\n\nResources\n=========\n\n## ssl_certificate\n\nCreates a SSL certificate.\n\nBy default the resource will create a self-signed certificate, but a custom one can also be used. The custom certificate can be read from several sources:\n\n* Attribute\n* Data Bag\n* Encrypted Data Bag\n* Chef Vault\n* File\n\n### ssl_certificate Actions\n\n* `create`: Creates the SSL certificate.\n\n### ssl_certificate Parameters\n\n<table>\n  <tr>\n    <th>Parameter</th>\n    <th>Description</th>\n    <th>Default</th>\n  </tr>\n  <tr>\n    <td>namespace</td>\n    <td>Node namespace to read the default values from, something like <code>node['myapp']</code>. See the documentation below for more information on how to use the namespace.</td>\n    <td><code>{}</code></td>\n  </tr>\n  <tr>\n    <td>common_name</td>\n    <td>Server name or <em>Common Name</em>, used for self-signed certificates.</td>\n    <td><code>namespace['common_name']</code></td>\n  </tr>\n  <tr>\n    <td>domain</td>\n    <td><code>common_name</code> method alias.</td>\n    <td><code>namespace['common_name']</code></td>\n  </tr>\n  <tr>\n    <td>country</td>\n    <td><em>Country</em>, used for self-signed certificates.</td>\n    <td><code>namespace['country']</code></td>\n  </tr>\n  <tr>\n    <td>city</td>\n    <td><em>City</em>, used for self-signed certificates.</td>\n    <td><code>namespace['city']</code></td>\n  </tr>\n  <tr>\n    <td>state</td>\n    <td><em>State</em> or <em>Province</em> name, used for self-signed certificates.</td>\n    <td><code>namespace['state']</code></td>\n  </tr>\n  <tr>\n    <td>organization</td>\n    <td><em>Organization</em> or <em>Company</em> name, used for self-signed certificates.</td>\n    <td><code>namespace['city']</code></td>\n  </tr>\n  <tr>\n    <td>department</td>\n    <td>Department or <em>Organizational Unit</em>, used for self-signed certificates.</td>\n    <td><code>namespace['city']</code></td>\n  </tr>\n  <tr>\n    <td>email</td>\n    <td><em>Email</em> address, used for self-signed certificates.</td>\n    <td><code>namespace['email']</code></td>\n  </tr>\n  <tr>\n    <td>time</td>\n    <td>Attribute for setting self-signed certificate validity time in seconds or <code>Time</code> object instance.</td>\n    <td><code>10 * 365 * 24 * 60 * 60</code></td>\n  </tr>\n  <tr>\n    <td>years</td>\n    <td>Write only attribute for setting self-signed certificate validity period in years.</td>\n    <td><code>10</code></td>\n  </tr>\n  <tr>\n    <td>owner</td>\n    <td>Certificate files owner user.</td>\n    <td><code>node['ssl_certificate']['user']</code></td>\n  </tr>\n  <tr>\n    <td>group</td>\n    <td>Certificate files owner group.</td>\n    <td><code>node['ssl_certificate']['group']</code></td>\n  </tr>\n  <tr>\n    <td>dir</td>\n    <td>Write only attribute for setting certificate path and key path (both) to a directory (<code>key_dir</code> and <code>cert_dir</code>).</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>source</td>\n    <td>Write only attribute for setting certificate source and key source (both) to a value (<code>key_source</code> and <code>cert_source</code>). Can be <code>'self-signed'</code>, <code>'attribute'</code>, <code>'data-bag'</code>, <code>'chef-vault'</code> or <code>'file'</code>.</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>bag</td>\n    <td>Write only attribute for setting certificate bag and key bag (both) to a value (<code>key_bag</code> and <code>cert_bag</code>).</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>item</td>\n    <td>Write only attribute for setting certificate item name and key bag item name (both) to a value (<code>key_item</code> and <code>cert_item</code>).</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>encrypted</td>\n    <td>Write only attribute for setting certificate encryption and key encryption (both) to a value (<code>key_encrypted</code> and <code>cert_encrypted</code>).</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>secret_file</td>\n    <td>Write only attribute for setting certificate chef secret file and key chef secret file (both) to a value (<code>key_secret_file</code> and <code>cert_secret_file</code>).</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>key_path</td>\n    <td>Private key full path.</td>\n    <td><em>calculated</em></td>\n  </tr>\n  <tr>\n    <td>key_name</td>\n    <td>Private key file name.</td>\n    <td><code>\"#{name}.key\"</code></td>\n  </tr>\n  <tr>\n    <td>key_dir</td>\n    <td>Private key directory path.</td>\n    <td><em>calculated</em></td>\n  </tr>\n  <tr>\n    <td>key_source</td>\n    <td>Source type to get the SSL key from. Can be <code>'self-signed'</code>, <code>'attribute'</code>, <code>'data-bag'</code>, <code>'chef-vault'</code> or <code>'file'</code>.</td>\n    <td><code>'self-signed'</code></td>\n  </tr>\n  <tr>\n    <td>key_bag</td>\n    <td>Name of the Data Bag where the SSL key is stored.</td>\n    <td><code>namespace['ssl_key']['bag']</code></td>\n  </tr>\n  <tr>\n    <td>key_item</td>\n    <td>Name of the Data Bag Item where the SSL key is stored.</td>\n    <td><code>namespace['ssl_key']['item']</code></td>\n  </tr>\n  <tr>\n    <td>key_item_key</td>\n    <td>Key of the Data Bag Item where the SSL key is stored.</td>\n    <td><code>namespace['ssl_key']['item_key']</code></td>\n  </tr>\n  <tr>\n    <td>key_encrypted</td>\n    <td>Whether the Data Bag where the SSL key is stored is encrypted.</td>\n    <td><code>false</code></td>\n  </tr>\n  <tr>\n    <td>key_secret_file</td>\n    <td>Secret file used to decrypt the Data Bag where the SSL key is stored.</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>key_content</td>\n    <td>SSL key file content in clear. <strong>Be careful when using it.<strong></td>\n    <td><em>calculated</em></td>\n  </tr>\n  <tr>\n    <td>cert_path</td>\n    <td>Public certificate full path.</td>\n    <td><em>calculated</em></td>\n  </tr>\n  <tr>\n    <td>cert_name</td>\n    <td>Public certiticate file name.</td>\n    <td><code>\"#{name}.pem\"</code></td>\n  </tr>\n  <tr>\n    <td>cert_dir</td>\n    <td>Public certificate directory path.</td>\n    <td><em>calculated</em></td>\n  </tr>\n  <tr>\n    <td>cert_source</td>\n    <td>Source type to get the SSL cert from. Can be <code>'self-signed'</code>,\n    <code>'with_ca'</code>, <code>'attribute'</code>, <code>'data-bag'</code>,\n    <code>'chef-vault'</code> or <code>'file'</code>.</td>\n    <td><code>'self-signed'</code></td>\n  </tr>\n  <tr>\n    <td>cert_bag</td>\n    <td>Name of the Data Bag where the SSL cert is stored.</td>\n    <td><code>namespace['ssl_cert']['bag']</code></td>\n  </tr>\n  <tr>\n    <td>cert_item</td>\n    <td>Name of the Data Bag Item where the SSL cert is stored.</td>\n    <td><code>namespace['ssl_cert']['item']</code></td>\n  </tr>\n  <tr>\n    <td>cert_item_key</td>\n    <td>Cert of the Data Bag Item where the SSL cert is stored.</td>\n    <td><code>namespace['ssl_cert']['item_cert']</code></td>\n  </tr>\n  <tr>\n    <td>cert_encrypted</td>\n    <td>Whether the Data Bag where the SSL cert is stored is encrypted.</td>\n    <td><code>false</code></td>\n  </tr>\n  <tr>\n    <td>cert_secret_file</td>\n    <td>Secret file used to decrypt the Data Bag where the SSL cert is stored.</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>cert_content</td>\n    <td>SSL cert file content in clear.</td>\n    <td><em>calculated</em></td>\n  </tr>\n  <tr>\n    <td>subject_alternate_names</td>\n    <td>Subject Alternate Names for the cert.</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>chain_path</td>\n    <td>Intermediate certificate chain full path.</td>\n    <td><em>calculated</em></td>\n  </tr>\n  <tr>\n    <td>chain_name</td>\n    <td>File name of intermediate certificate chain file.</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>chain_dir</td>\n    <td>Intermediate certificate chain directory path.</td>\n    <td><em>calculated</em></td>\n  </tr>\n  <tr>\n    <td>chain_source</td>\n    <td>Source type to get the intermediate certificate chain from. Can be <code>'attribute'</code>, <code>'data-bag'</code>, <code>'chef-vault'</code> or <code>'file'</code>.</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>chain_bag</td>\n    <td>Name of the Data Bag where the intermediate certificate chain is stored.</td>\n    <td><code>namespace['ssl_chain']['bag']</code></td>\n  </tr>\n  <tr>\n    <td>chain_item</td>\n    <td>Name of the Data Bag Item where the intermediate certificate chain is stored.</td>\n    <td><code>namespace['ssl_chain']['item']</code></td>\n  </tr>\n  <tr>\n    <td>chain_item_cert</td>\n    <td>Cert of the Data Bag Item where the intermediate certificate chain is stored.</td>\n    <td><code>namespace['ssl_chain']['item_cert']</code></td>\n  </tr>\n  <tr>\n    <td>chain_encrypted</td>\n    <td>Whether the Data Bag where the intermediate certificate chain is stored is encrypted.</td>\n    <td><code>false</code></td>\n  </tr>\n  <tr>\n    <td>chain_secret_file</td>\n    <td>Secret file used to decrypt the Data Bag where the intermediate certificate chain is stored.</td>\n    <td><code>nil</code></td>\n  </tr>\n  <tr>\n    <td>chain_content</td>\n    <td>Intermediate certificate chain file content in clear.</td>\n    <td><em>calculated</em></td>\n  </tr>\n  <tr>\n    <td>chain_combined_name</td>\n    <td>File name of intermediate certificate chain combined file (for <strong>nginx</strong>).</td>\n    <td><em>calculated</em></td>\n  </tr>\n  <tr>\n    <td>chain_combined_path</td>\n    <td>Intermediate certificate chain combined file full path (for <strong>nginx</strong>).</td>\n    <td><em>calculated</em></td>\n  </tr>\n  <tr>\n    <td>ca_cert_path</td>\n    <td>Certificate Authority full path.</td>\n    <td><em>nil</em></td>\n  </tr>\n  <tr>\n    <td>ca_key_path</td>\n    <td>Key Authority full path.</td>\n    <td><em>nil</em></td>\n  </tr>\n</table>\n\nTemplates\n=========\n\nThis cookbook includes a simple VirtualHost template which can be used by the `web_app` definition from the [apache2](http://community.opscode.com/cookbooks/apache2) cookbook:\n\n```ruby\ncert = ssl_certificate 'my-webapp' do\n  namespace node['my-webapp']\n  notifies :restart, 'service[apache2]'\nend\n\ninclude_recipe 'apache2'\ninclude_recipe 'apache2::mod_ssl'\nweb_app 'my-webapp' do\n  cookbook 'ssl_certificate'\n  server_name cert.common_name\n  docroot # [...]\n  # [...]\n  ssl_key cert.key_path\n  ssl_cert cert.cert_path\n  ssl_chain cert.chain_path\nend\n```\n\n## Partial Templates\n\nThis cookbook contains [partial templates](http://docs.chef.io/templates.html#partial-templates) that you can include in your virtualhost templates to enable and configure the SSL protocol. These partial templates are available:\n\n* *apache.erb*: For Apache httpd web server.\n* *nginx.erb*: For nginx web server.\n\n### Partial Templates Parameters\n\n| Parameter          | Default          | Description                        |\n|:-------------------|:-----------------|:-----------------------------------|\n| ssl_cert           | `nil`            | Public SSL certificate full path.\n| ssl_key            | `nil`            | Private SSL key full path.\n| ssl_chain          | `nil`            | Intermediate SSL certificate chain full path (**apache** only) *(optional)*.\n| ssl_compatibility  | *node attribute* | SSL compatibility level (See [below](#securing-server-side-tls)).\n\n### Apache Partial Template\n\n#### Using `web_app` Definition\n\nIf you are using the `web_app` definition, you should pass the `@params` variables to the partial template:\n\n```ruby\nweb_app 'my-webapp-ssl'\n  docroot node['apache']['docroot_dir']\n  server_name cert.common_name\n  # [...]\n  ssl_key cert.key_path\n  ssl_cert cert.cert_path\n  ssl_chain cert.chain_path\nend\n```\n\n```erb\n<%# included by web_app definition %>\n<VirtualHost *:443>\n  ServerName <%= @params[:server_name] %>\n  DocumentRoot <%= @params[:docroot] %>\n  <%# [...] %>\n\n  <%= render 'apache.erb', cookbook: 'ssl_certificate', variables: @params.merge(node: node) %>\n</VirtualHost>\n```\n\n#### Using `template` Resource\n\n```ruby\ncert = ssl_certificate 'my-webapp-ssl'\ntemplate File.join(node['apache']['dir'], 'sites-available', 'my-webapp-ssl') do\n  source 'apache_vhost.erb'\n  # [...]\n  variables(\n    # [...]\n    ssl_key: cert.key_path,\n    ssl_cert: cert.chain_combined_path,\n    ssl_chain: cert.chain_path,\n  )\nend\n```\n\nYou can include the partial template as follows:\n\n```erb\n<%# included by template resource %>\n<VirtualHost *:443>\n  ServerName <%= @server_name %>\n  DocumentRoot <%= @docroot %>\n  <%# [...] %>\n\n  <%= render 'apache.erb', cookbook: 'ssl_certificate' %>\n</VirtualHost>\n```\n\n### Nginx Partial Template\n\nIf you are using nginx template, we recommended to use the `SslCertificate#chain_combined_path` path value to set the `ssl_cert` variable instead of `SslCertificate#cert_path`. That's to ensure we [always include the chained certificate](http://nginx.org/en/docs/http/configuring_https_servers.html#chains) if there is one. This will also work when there is no chained certificate.\n\n```ruby\ncert = ssl_certificate 'my-webapp-ssl'\ntemplate File.join(node['nginx']['dir'], 'sites-available', 'my-webapp-ssl') do\n  source 'nginx_vhost.erb'\n  # [...]\n  variables(\n    # [...]\n    ssl_key: cert.key_path,\n    ssl_cert: cert.chain_combined_path\n  )\nend\n```\n\nSee [examples below](#examples).\n\n## Securing Server Side TLS\n\nYou can change the SSL compatibility level based on [the TLS recommendations in the Mozilla wiki](https://wiki.mozilla.org/Security/Server_Side_TLS#Recommended_configurations) using the `ssl_compatibility` template parameter:\n\n```ruby\ncert = ssl_certificate 'my-webapp' do\n  namespace node['my-webapp']\n  notifies :restart, 'service[apache2]'\nend\n\ninclude_recipe 'apache2'\ninclude_recipe 'apache2::mod_ssl'\nweb_app 'my-webapp' do\n  cookbook 'ssl_certificate'\n  server_name cert.common_name\n  docroot # [...]\n  # [...]\n  ssl_key cert.key_path\n  ssl_cert cert.cert_path\n  ssl_chain cert.chain_path\n  ssl_compatibility :modern # :modern | :intermediate | :old\nend\n```\n\nYou can also use the `node['ssl_certificate']['service']['compatibility']` node attribute to change the compatibility level used by default.\n\nUsage\n=====\n\n## Including the Cookbook\n\nYou need to include this recipe in your `run_list` before using the  `ssl_certificate` resource:\n\n```json\n{\n  \"name\": \"onddo.com\",\n  [...]\n  \"run_list\": [\n    [...]\n    \"recipe[ssl_certificate]\"\n  ]\n}\n```\n\nYou can also include the cookbook as a dependency in the metadata of your cookbook:\n\n```ruby\n# metadata.rb\ndepends 'ssl_certificate'\n```\n\nOne of the two is enough. No need to do anything else. Only use the `ssl_certificate` resource to create the certificates you need.\n\n## A Short Example\n\n```ruby\ncert = ssl_certificate 'webapp1' do\n  namespace node['webapp1'] # optional but recommended\nend\n# you can now use the #cert_path and #key_path methods to use in your web/mail/ftp service configurations\nlog \"WebApp1 certificate is here: #{cert.cert_path}\"\nlog \"WebApp1 private key is here: #{cert.key_path}\"\n```\n\n## Namespaces\n\nThe `ssl_certificate` **namespace** attribute is a node attribute path, like for example `node['onddo.com']`, used to configure SSL certificate defaults. This will make easier to *integrate the node attributes* with the certificate creation matters. This means you can configure the certificate creation through node attributes.\n\nWhen a namespace is set in the resource, it will try to read the following attributes below the namespace (all attributes are **optional**):\n\n<table>\n  <tr>\n    <th>Attribute</th>\n    <th>Description</th>\n  </tr>\n  <tr>\n    <td><code>namespace['common_name']</code></td>\n    <td>Server name or *Common Name*, used for self-signed certificates (uses <code>node['fqdn']</code> by default).</td>\n  </tr>\n  <tr>\n    <td><code>namespace['country']</code></td>\n    <td><em>Country</em>, used for self-signed certificates.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['city']</code></td>\n    <td><em>City</em>, used for self-signed certificates.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['state']</code></td>\n    <td><em>State</em> or <em>Province</em> name, used for self-signed certificates.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['organization']</code></td>\n    <td><em>Organization</em> or <em>Company</em> name, used for self-signed certificates.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['department']</code></td>\n    <td>Department or <em>Organizational Unit</em>, used for self-signed certificates.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['email']</code></td>\n    <td><em>Email</em> address, used for self-signed certificates.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['bag']</code></td>\n    <td>Attribute for setting certificate bag and key bag (both) to a value (<code>key_bag</code> and <code>cert_bag</code>).</td>\n  </tr>\n  <tr>\n    <td><code>namespace['item']</code></td>\n    <td>Attribute for setting certificate item name and key bag item name (both) to a value (<code>key_item</code> and <code>cert_item</code>).</td>\n  </tr>\n  <tr>\n    <td><code>namespace['encrypted']</code></td>\n    <td>Attribute for setting certificate encryption and key encryption (both) to a value (<code>key_encryption</code> and <code>cert_encryption</code>).</td>\n  </tr>\n  <tr>\n    <td><code>namespace['secret_file']</code></td>\n    <td>Attribute for setting certificate chef secret file and key chef secret file (both) to a value (<code>key_secret_file</code> and <code>cert_secret_file</code>).</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_key']['source']</code></td>\n    <td>Source type to get the SSL key from. Can be <code>'self-signed'</code>, <code>'attribute'</code>, <code>'data-bag'</code>, <code>'chef-vault'</code> or <code>'file'</code>.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_key']['path']</code></td>\n    <td>File path of the SSL key.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_key']['bag']</code></td>\n    <td>Name of the Data Bag where the SSL key is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_key']['item']</code></td>\n    <td>Name of the Data Bag Item where the SSL key is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_key']['item_key']</code></td>\n    <td>Key of the Data Bag Item where the SSL key is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_key']['encrypted']</code></td>\n    <td>Whether the Data Bag where the SSL key is stored is encrypted.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_key']['secret_file']</code></td>\n    <td>Secret file used to decrypt the Data Bag where the SSL key is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_key']['content']</code></td>\n    <td>SSL key content used when reading from attributes.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_cert']['source']</code></td>\n    <td>Source type to get the SSL cert from. Can be <code>'self-signed'</code>, <code>'attribute'</code>, <code>'data-bag'</code>, <code>'chef-vault'</code> or <code>'file'</code>.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_cert']['path']</code></td>\n    <td>File path of the SSL certificate.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_cert']['bag']</code></td>\n    <td>Name of the Data Bag where the SSL cert is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_cert']['item']</code></td>\n    <td>Name of the Data Bag Item where the SSL cert is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_cert']['item_cert']</code></td>\n    <td>Cert of the Data Bag Item where the SSL cert is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_cert']['encrypted']</code></td>\n    <td>Whether the Data Bag where the SSL cert is stored is encrypted.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_cert']['secret_file']</code></td>\n    <td>Secret file used to decrypt the Data Bag where the SSL cert is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_cert']['content']</code></td>\n    <td>SSL cert content used when reading from attributes.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_cert']['subject_alternate_names']</code></td>\n    <td>An array of Subject Alternate Names for the SSL cert. Needed if your site has multiple domain names on the same cert.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_chain']['name']</code></td>\n    <td>File name to be used for the intermediate certificate chain file. <em>If this is not present, no chain file will be written.</em></td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_chain']['source']</code></td>\n    <td>Source type to get the intermediate certificate chain from. Can be <code>'attribute'</code>, <code>'data-bag'</code>, <code>'chef-vault'</code> or <code>'file'</code>.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_chain']['path']</code></td>\n    <td>File path of the intermediate SSL certificate chain.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_chain']['bag']</code></td>\n    <td>Name of the Data Bag where the intermediate certificate chain is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_chain']['item']</code></td>\n    <td>Name of the Data Bag Item where the intermediate certificate chain is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_chain']['item_cert']</code></td>\n    <td>Cert of the Data Bag Item where the intermediate certificate chain is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_chain']['encrypted']</code></td>\n    <td>Whether the Data Bag where the intermediate certificate chain is stored is encrypted.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_chain']['secret_file']</code></td>\n    <td>Secret file used to decrypt the Data Bag where the intermediate certificate chain is stored.</td>\n  </tr>\n  <tr>\n    <td><code>namespace['ssl_chain']['content']</code></td>\n    <td>Intermediate certificate chain content used when reading from attributes.</td>\n  </tr>\n</table>\n\n## Examples\n\n### Apache Examples\n\nApache `web_app` example using community [apache2](http://community.opscode.com/cookbooks/apache2) cookbook and node attributes:\n\n```ruby\nnode.default['my-webapp']['common_name'] = 'onddo.com'\nnode.default['my-webapp']['ssl_cert']['source'] = 'self-signed'\nnode.default['my-webapp']['ssl_key']['source'] = 'self-signed'\n\n# we need to save the resource variable to get the key and certificate file paths\ncert = ssl_certificate 'my-webapp' do\n  # we want to be able to use node['my-webapp'] to configure the certificate\n  namespace node['my-webapp']\n  notifies :restart, 'service[apache2]'\nend\n\ninclude_recipe 'apache2'\ninclude_recipe 'apache2::mod_ssl'\nweb_app 'my-webapp' do\n  # this cookbook includes a virtualhost template for apache2\n  cookbook 'ssl_certificate'\n  server_name cert.common_name\n  docroot # [...]\n  # [...]\n  ssl_key cert.key_path\n  ssl_cert cert.cert_path\n  ssl_chain cert.chain_path\nend\n```\n\nUsing custom paths:\n\n```ruby\nmy_key_path = '/etc/keys/my-webapp.key'\nmy_cert_path = '/etc/certs/my-webapp.pem'\n\n# there is no need to save the resource in a variable in this case because we know the paths\nssl_certificate 'my-webapp' do\n  key_path my_key_path\n  cert_path my_cert_path\nend\n\n# Configure Apache SSL\ninclude_recipe 'apache2::mod_ssl'\nweb_app 'my-webapp' do\n  cookbook 'ssl_certificate'\n  # [...]\n  ssl_key my_key_path\n  ssl_cert my_cert_path\nend\n```\n\nSee [templates documentation](#templates).\n\n### Nginx Example\n\nMinimal `nginx` example using community [nginx](http://community.opscode.com/cookbooks/nginx) cookbook:\n\n```ruby\ncert = ssl_certificate 'my-webapp' do\n  notifies :restart, 'service[nginx]'\nend\n\n# Create a virtualhost for nginx\ntemplate File.join(node['nginx']['dir'], 'sites-available', 'my-webapp-ssl') do\n  # You need to create a template for nginx to enable SSL support and read the\n  # keys from ssl_key and ssl_chain_combined attributes.\n  # You can use the *nginx.erb* partial template as shown below.\n  source 'nginx_vhost.erb'\n  mode 00644\n  owner 'root'\n  group 'root'\n  variables(\n    name: 'my-webapp-ssl',\n    server_name: 'ssl.onddo.com',\n    docroot: '/var/www',\n    # [...]\n    ssl_key: cert.key_path,\n    ssl_cert: cert.chain_combined_path\n  )\n  notifies :reload, 'service[nginx]'\nend\n\n# Enable the virtualhost\nnginx_site 'my-webapp-ssl' do\n  enable true\nend\n\n# publish the certificate to an attribute, it may be useful\nnode.set['web-app']['ssl_cert']['content'] = cert.cert_content\n```\n\nHere's a nginx template example using the [*nginx.erb* partial template](#partial-templates):\n\n```erb\n<%# nginx_vhost.erb %>\nserver {\n  server_name <%= @server_name %>;\n  listen 443;\n  # Path to the root of your installation\n  root <%= @docroot %>;\n\n  access_log <%= node['nginx']['log_dir'] %>/<%= @name %>-access.log combined;\n  error_log  <%= node['nginx']['log_dir'] %>/<%= @name %>-error.log;\n\n  index index.html;\n  <%# [...] %>\n\n  <%= render 'nginx.erb', cookbook: 'ssl_certificate' %>\n}\n```\n\nSee [templates documentation](#templates).\n\n### Reading the Certificate from Attributes\n\nThe SSL certificate can be read from an attribute directly:\n\n```ruby\n# Setting the attributes\nnode.default['mysite']['ssl_key']['content'] = '-----BEGIN PRIVATE KEY-----[...]'\nnode.default['mysite']['ssl_cert']['content'] = '-----BEGIN CERTIFICATE-----[...]'\n\n# Creating the certificate\nssl_certificate 'mysite' do\n  common_name 'cloud.mysite.com'\n  namespace node['mysite']\n  # this will read the node['mysite']['ssl_key']['content'] and node['mysite']['ssl_cert']['content'] keys\n  source 'attribute'\nend\n```\n\nAlternative example using a namespace and node attributes:\n\n```ruby\n# Setting the attributes\nnode.default['mysite']['common_name'] = 'cloud.mysite.com'\nnode.default['mysite']['ssl_key']['source'] = 'attribute'\nnode.default['mysite']['ssl_key']['content'] = '-----BEGIN PRIVATE KEY-----[...]'\nnode.default['mysite']['ssl_cert']['source'] = 'attribute'\nnode.default['mysite']['ssl_cert']['content'] = '-----BEGIN CERTIFICATE-----[...]'\n\n# Creating the certificate\nssl_certificate 'mysite' do\n  namespace node['mysite']\nend\n```\n\n### Reading the Certificate from a Data Bag\n\n```ruby\nssl_certificate 'mysite' do\n  common_name 'cloud.mysite.com'\n  source 'data-bag'\n  bag 'ssl_data_bag'\n  key_item 'key' # data bag item\n  key_item_key 'content' # data bag item json key\n  cert_item 'cert'\n  cert_item_key 'content'\n  encrypted true\n  secret_file '/path/to/secret/file' # optional\nend\n```\n\nAlternative example using a namespace and node attributes:\n\n```ruby\n# Setting the attributes\nnode.default['mysite']['common_name'] = 'cloud.mysite.com'\n\nnode.default['mysite']['ssl_key']['source'] = 'data-bag'\nnode.default['mysite']['ssl_key']['bag'] = 'ssl_data_bag'\nnode.default['mysite']['ssl_key']['item'] = 'key'\nnode.default['mysite']['ssl_key']['item_key'] = 'content'\nnode.default['mysite']['ssl_key']['encrypted'] = true\nnode.default['mysite']['ssl_key']['secret_file'] = '/path/to/secret/file'\n\nnode.default['mysite']['ssl_cert']['source'] = 'data-bag'\nnode.default['mysite']['ssl_cert']['bag'] = 'ssl_data_bag'\nnode.default['mysite']['ssl_cert']['item'] = 'key'\nnode.default['mysite']['ssl_cert']['item_key'] = 'content'\nnode.default['mysite']['ssl_cert']['encrypted'] = true\nnode.default['mysite']['ssl_cert']['secret_file'] = '/path/to/secret/file'\n\n# Creating the certificate\nssl_certificate 'mysite' do\n  namespace node['mysite']\nend\n```\n\n### Reading the Certificate from Chef Vault\n\n```ruby\nssl_certificate 'mysite' do\n  common_name 'cloud.mysite.com'\n  source 'chef-vault'\n  bag 'ssl_vault_bag'\n  key_item 'key' # data bag item\n  key_item_key 'content' # data bag item json key\n  cert_item 'cert'\n  cert_item_key 'content'\nend\n```\n\nThe same example, using a namespace and node attributes:\n\n```ruby\n# Setting the attributes\nnode.default['mysite']['common_name'] = 'cloud.mysite.com'\n\nnode.default['mysite']['ssl_key']['source'] = 'chef-vault'\nnode.default['mysite']['ssl_key']['bag'] = 'ssl_vault_bag'\nnode.default['mysite']['ssl_key']['item'] = 'key'\nnode.default['mysite']['ssl_key']['item_key'] = 'content'\n\nnode.default['mysite']['ssl_cert']['source'] = 'chef-vault'\nnode.default['mysite']['ssl_cert']['bag'] = 'ssl_vault_bag'\nnode.default['mysite']['ssl_cert']['item'] = 'key'\nnode.default['mysite']['ssl_cert']['item_key'] = 'content'\n\n# Creating the certificate\nssl_certificate 'mysite' do\n  namespace node['mysite']\nend\n```\n\n### Reading the Certificate from Files\n\n```ruby\nssl_certificate 'mysite' do\n  common_name 'cloud.mysite.com'\n  source 'file'\n  key_path '/path/to/ssl/key'\n  cert_path '/path/to/ssl/cert'\nend\n```\n\nThe same example, using a namespace and node attributes:\n\n```ruby\n# Setting the attributes\nnode.default['mysite']['common_name'] = 'cloud.mysite.com'\n\nnode.default['mysite']['ssl_key']['source'] = 'file'\nnode.default['mysite']['ssl_key']['path'] = '/path/to/ssl/key'\n\nnode.default['mysite']['ssl_cert']['source'] = 'file'\nnode.default['mysite']['ssl_cert']['path'] = '/path/to/ssl/cert'\n\n# Creating the certificate\nssl_certificate 'mysite' do\n  namespace node['mysite']\nend\n```\n\n### Reading the Certificate from Different Places\n\nYou can also read the certificate and the private key from different places each:\n\n```ruby\nssl_certificate 'mysite' do\n  common_name 'cloud.mysite.com'\n\n  # Read the private key from chef-vault\n  key_source 'chef-vault'\n  key_bag 'ssl_vault_bag'\n  key_item 'key' # data bag item\n  key_item_key 'content' # data bag item json key\n\n  # Read the public cert from a non-encrypted data bag\n  cert_source 'data-bag'\n  cert_bag 'ssl_data_bag'\n  cert_item 'cert'\n  cert_item_key 'content'\n  cert_encrypted false\nend\n```\n\nThe same example, using a namespace and node attributes:\n\n```ruby\n# Setting the attributes\nnode.default['mysite']['common_name'] = 'cloud.mysite.com'\n\n# Read the private key from chef-vault\nnode.default['mysite']['ssl_key']['source'] = 'chef-vault'\nnode.default['mysite']['ssl_key']['bag'] = 'ssl_vault_bag'\nnode.default['mysite']['ssl_key']['item'] = 'key'\nnode.default['mysite']['ssl_key']['item_key'] = 'content'\n\n# Read the public cert from a non-encrypted data bag\nnode.default['mysite']['ssl_cert']['source'] = 'data-bag'\nnode.default['mysite']['ssl_cert']['bag'] = 'ssl_data_bag'\nnode.default['mysite']['ssl_cert']['item'] = 'key'\nnode.default['mysite']['ssl_cert']['item_key'] = 'content'\nnode.default['mysite']['ssl_cert']['encrypted'] = false\n\n# Creating the certificate\nssl_certificate 'mysite' do\n  namespace node['mysite']\nend\n```\n\n### Creating a Certificate with Subject Alternate Names\n\n```ruby\ndomain = 'mysite.com'\n# SAN for mysite.com, foo.mysite.com, bar.mysite.com, www.mysite.com\nnode.default[ domain ]['ssl_cert']['subject_alternate_names'] = [ domain, 'foo.'+domain, 'bar.'+domain, 'www.' + domain ]\n\nssl_certificate 'mysite.com' do\n  namespace node[ domain ]\n  key_source 'self-signed'\n  cert_source 'self-signed'\nend\n```\n\n### Reading Key, Certificate and Intermediary from a Data Bag\n\n```ruby\ncert_name = 'chain-data-bag'\nnode.default[cert_name]['ssl_key']['source'] = 'data-bag'\nnode.default[cert_name]['ssl_key']['bag'] = 'ssl'\nnode.default[cert_name]['ssl_key']['item'] = 'key'\nnode.default[cert_name]['ssl_key']['item_key'] = 'content'\nnode.default[cert_name]['ssl_key']['encrypted'] = true\nnode.default[cert_name]['ssl_cert']['source'] = 'data-bag'\nnode.default[cert_name]['ssl_cert']['bag'] = 'ssl'\nnode.default[cert_name]['ssl_cert']['item'] = 'cert'\nnode.default[cert_name]['ssl_cert']['item_key'] = 'content'\nnode.default[cert_name]['ssl_chain']['name'] = 'chain-ca-bundle.pem'\nnode.default[cert_name]['ssl_chain']['source'] = 'data-bag'\nnode.default[cert_name]['ssl_chain']['bag'] = 'ssl'\nnode.default[cert_name]['ssl_chain']['item'] = 'chain'\nnode.default[cert_name]['ssl_chain']['item_key'] = 'content'\n\nssl_certificate 'chain-data-bag' do\n  namespace cert_name\nend\n```\n\n### Creating a Certificate from a Certificate Authority\n\n```ruby\nca_cert = '/usr/share/pki/ca-trust-source/anchors/CA.crt'\nca_key = '/usr/share/pki/ca-trust-source/anchors/CA.key'\n\ncert = ssl_certificate 'test' do\n  namespace node['test.com']\n  key_source 'self-signed'\n  cert_source 'with_ca'\n  ca_cert_path ca_cert\n  ca_key_path ca_key\nend\n```\n\n### Reading the CA Certificate from a Chef Vault Bag\n\nIn this example, we read the CA certificate from a Chef Vault and use it to generate the shelf-signed certificates:\n\n```ruby\n# Create the CA from a Chef Vault bag\n\nca_cert = ssl_certificate 'ca.example.org' do\n  common_name 'ca.example.org'\n  source 'chef-vault'\n  bag 'ssl'\n  item 'ca_cert'\n  key_item_key 'key_content'\n  cert_item_key 'cert_content'\nend\n\nssl_certificate 'example.org' do\n  cert_source 'with_ca'\n  ca_cert_path ca_cert.cert_path\n  ca_key_path ca_cert.key_path\nend\n```\n\nThe vault bag content:\n\n```json\n{\n  \"id\": \"ca_cert\",\n  \"key_content\": \"-----BEGIN RSA PRIVATE KEY-----\\nMIIE [...]\",\n  \"cert_content\": \"-----BEGIN CERTIFICATE-----\\nMIIE [...]\"\n}\n```\n\nThe knife command to create the vault bag item:\n\n    $ knife vault create ssl ca_cert [...]\n\nTesting\n=======\n\nSee [TESTING.md](https://github.com/onddo/ssl_certificate-cookbook/blob/master/TESTING.md).\n\n## ChefSpec Matchers\n\n### ssl_certificate(name)\n\nHelper method for locating a `ssl_certificate` resource in the collection.\n\n```ruby\nresource = chef_run.ssl_certificate('postfixadmin')\nexpect(resource).to notify('service[apache2]').to(:restart)\n```\n\n### create_ssl_certificate(name)\n\nAssert that the Chef run creates ssl_certificate.\n\n```ruby\nexpect(chef_run).to create_ssl_certificate('cloud.mysite.com')\n```\n\nContributing\n============\n\nPlease do not hesitate to [open an issue](https://github.com/onddo/ssl_certificate-cookbook/issues/new) with any questions or problems.\n\nSee [CONTRIBUTING.md](https://github.com/onddo/ssl_certificate-cookbook/blob/master/CONTRIBUTING.md).\n\nTODO\n====\n\nSee [TODO.md](https://github.com/onddo/ssl_certificate-cookbook/blob/master/TODO.md).\n\n\nLicense and Author\n==================\n\n|                      |                                          |\n|:---------------------|:-----------------------------------------|\n| **Author:**          | [Raul Rodriguez](https://github.com/raulr) (<raul@onddo.com>)\n| **Author:**          | [Xabier de Zuazo](https://github.com/zuazo) (<xabier@onddo.com>)\n| **Contributor:**     | [Steve Meinel](https://github.com/smeinel)\n| **Contributor:**     | [Djuri Baars](https://github.com/dsbaars)\n| **Contributor:**     | [Elliott Davis](https://github.com/elliott-davis)\n| **Contributor:**     | [Jeremy MAURO](https://github.com/jmauro)\n| **Contributor:**     | [Benjamin Nørgaard](https://github.com/blacksails)\n| **Copyright:**       | Copyright (c) 2014-2015, Onddo Labs, SL. (www.onddo.com)\n| **License:**         | Apache License, Version 2.0\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n    \n        http://www.apache.org/licenses/LICENSE-2.0\n    \n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n",
  "requires": [
    {
      "kind": "host",
      "label": "amazon",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "debian",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "centos",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "fedora",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "freebsd",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "redhat",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "ubuntu",
      "revision": ">= 0.0.0",
      "one_of_group": "os"
    }
  ],
  "parameters": {
    "ssl_certificate/key_dir": {
      "display_name": "ssl_certificate key dir",
      "description": "Default SSL key directory.",
      "type": "string",
      "required": "optional",
      "calculated": true,
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "ssl_certificate/cert_dir": {
      "display_name": "ssl_certificate cert dir",
      "description": "Default SSL certificate directory.",
      "type": "string",
      "required": "optional",
      "calculated": true,
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "ssl_certificate/service/cipher_suite": {
      "display_name": "ssl_certificate service cipher suite",
      "description": "Service default SSL cipher suite.",
      "type": "string",
      "required": "optional",
      "default": null,
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "ssl_certificate/service/protocols/nginx": {
      "display_name": "ssl_certificate service protocol",
      "description": "nginx service default SSL protocols.",
      "type": "string",
      "required": "optional",
      "default": null,
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "ssl_certificate/service/protocols/apache": {
      "display_name": "ssl_certificate web protocol",
      "description": "Apache web service default SSL protocols.",
      "type": "string",
      "required": "optional",
      "default": null,
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "ssl_certificate/service/compatibility": {
      "display_name": "ssl_certificate service compatibility",
      "description": "Service SSL compatibility level.",
      "type": "string",
      "required": "optional",
      "default": null,
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "ssl_certificate/service/use_hsts": {
      "display_name": "ssl_certificate web use hsts",
      "description": "Whether to enable HSTS in the service.",
      "type": "string",
      "required": "optional",
      "default": true,
      "choice": [],
      "calculated": false,
      "recipes": [],
      "mapping": "cookbook_attribute"
    },
    "ssl_certificate/service/use_stapling": {
      "display_name": "ssl_certificate web use stapling",
      "description": "Whether to enable OCSP stapling in the service.",
      "type": "string",
      "required": "optional",
      "calculated": true,
      "choice": [],
      "recipes": [],
      "mapping": "cookbook_attribute"
    }
  }
}