{
  "name": "dcos-grid Chef cookbook",
  "chef_cookbook_name": "dcos-grid",
  "revision": "0.3.3",
  "uris": [
    "https://supermarket.chef.io/cookbooks/dcos-grid",
    "https://supermarket.chef.io/cookbooks/dcos-grid/download",
    "https://supermarket.chef.io/cookbooks/dcos-grid/versions/0.3.3",
    "https://supermarket.chef.io/cookbooks/dcos-grid/versions/0.3.3/download",
    "https://supermarket.chef.io/api/v1/cookbooks/dcos-grid/versions/0.3.3",
    "https://supermarket.chef.io/api/v1/cookbooks/dcos-grid",
    "https://supermarket.chef.io/api/v1/cookbooks/dcos-grid/versions/0.3.3/download"
  ],
  "labels": [
    "Chef cookbook",
    "Operating Systems & Virtualization",
    "Executable/Script/Chef Cookbook",
    "Binding/Region/North America/US",
    "Mode/Executable/Script/Chef Cookbook",
    "Type/Devopsware/Orchestration/Cluster-based",
    "Type/Infrastructure/Operating System",
    "Type/Middleware/Runtime/JavaScript/Node.js"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/dcos-grid",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/dcos-grid/versions/0.3.3/download",
  "deprecated": false,
  "created": "2016-09-03T06:43:05.895Z",
  "updated": "2016-10-15T06:56:48.434Z",
  "description": "Installs/Configures DC/OS Cluster Node.",
  "maintainer": {
    "name": "whitestar-dev"
  },
  "license": "Apache 2.0",
  "chef_foodcritic_failure": false,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 0,
  "downloads_count": 162,
  "downloads_count_revision": 15,
  "repository_url": "http://scm.osdn.jp/gitroot/metasearch/grid-chef-repo.git",
  "issues_url": "https://osdn.jp/projects/metasearch/ticket",
  "chef_source_url": "http://scm.osdn.jp/gitroot/metasearch/grid-chef-repo.git",
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "dcos-grid Cookbook\n==================\n\nThis cookbook sets up your customized DC/OS cluster on bare metal, virtual machines and every cloud. This install method is based on [_Advanced DC/OS Installation Guide_](https://dcos.io/docs/1.8/administration/installing/custom/advanced/).\n\n## Contents\n\n- [Requirements](#requirements)\n  - [platforms](#platforms)\n  - [packages](#packages)\n- [Attributes](#attributes)\n- [Usage](#usage)\n  - [Recipes](#recipes)\n    - [dcos-grid::default](#dcos-griddefault)\n    - [dcos-grid::agent](#dcos-gridagent)\n    - [dcos-grid::bootstrap](#dcos-gridbootstrap)\n    - [dcos-grid::cli (ver. 0.3.0 or later)](#dcos-gridcli-ver-030-or-later)\n    - [dcos-grid::cloud-config (for CoreOS only)](#dcos-gridcloud-config-for-coreos-only)\n    - [dcos-grid::master](#dcos-gridmaster)\n    - [dcos-grid::node](#dcos-gridnode)\n    - [dcos-grid::node-commons](#dcos-gridnode-commons)\n    - [dcos-grid::public-agent](#dcos-gridpublic-agent)\n  - [Role Examples](#role-examples)\n  - [Uninstall DC/OS](#uninstall-dcos)\n- [License and Authors](#license-and-authors)\n\n## Requirements\n\n### platforms\n- CentOS, Red Hat Enterprise Linux >= 7.2\n- CoreOS Latest version.\n- Ubuntu 16.04 (Experimental). DC/OS does not officially support Ubuntu yet. See [_Ubuntu 16.04 Enablement_](https://dcosjira.atlassian.net/browse/DCOS-25).\n  - DC/OS requires systemd, which is only fully supported in Ubuntu 15.04 and later releases. See [_SystemdForUpstartUsers_](https://wiki.ubuntu.com/SystemdForUpstartUsers)\n\n### packages\n- none.\n\n## Attributes\n\n|Key|Type|Description, example|Default|\n|:--|:--|:--|:--|\n|`['dcos-grid']['dcos_release_url']`|String|DC/OS download URL.|`'https://downloads.dcos.io/dcos/EarlyAccess/dcos_generate_config.sh'`|\n|`['dcos-grid']['dcos_cli_release_url']`|String|DC/OS CLI download URL (ver. 0.3.0 or later).|`'https://downloads.dcos.io/binaries/cli/linux/x86-64/0.4.10/dcos'`|\n|`['dcos-grid']['docker']['apt_repo']['url']`|String| (ver. 0.3.1 or later)|`'https://apt.dockerproject.org/repo'`|\n|`['dcos-grid']['docker']['apt_repo']['keyserver']`|String| (ver. 0.3.1 or later)|`'hkp://p80.pool.sks-keyservers.net:80'`|\n|`['dcos-grid']['docker']['apt_repo']['recv-keys']`|String| (ver. 0.3.1 or later)|`'58118E89F3A912897C070ADBF76221572C52609D'`|\n|`['dcos-grid']['docker']['yum_repo']['baseurl']`|String| (ver. 0.3.1 or later)|`'https://yum.dockerproject.org/repo/main/centos/$releasever/'`|\n|`['dcos-grid']['docker']['yum_repo']['gpgcheck']`|String|`'0'`: disabled, `'1'`: enabled (ver. 0.3.1 or later).|`'1'`|\n|`['dcos-grid']['docker']['yum_repo']['gpgkey']`|String| (ver. 0.3.1 or later)|`'https://yum.dockerproject.org/gpg'`|\n|`['dcos-grid']['docker-engine']['setup']`|Boolean|Docker setup by this cookbook. If you will set up Docker by another cookbook, verify that this attribute is false. (ver. 0.3.0 or later)|`true`|\n|`['dcos-grid']['docker-engine']['version_on_centos']`|String|Docker version for CentOS (ver. 0.3.0 or later).|`'1.11.2-1'`|\n|`['dcos-grid']['docker-engine']['version_on_ubuntu']`|String|Docker version for Ubuntu (ver. 0.3.0 or later).|`'1.11.2-0'`|\n|`['dcos-grid']['docker-engine']['version']`|String|Docker 1.9.x - 1.11.x is recommended for stability reasons. Note: this **default** value is overwritten by the `version_on_{centos or ubuntu}` (ver. 0.3.0 or later).|See default.rb|\n|`['dcos-grid']['bootstrap']['ip']`|String|Bootstrap node IP address.|`'127.0.0.1'`|\n|`['dcos-grid']['bootstrap']['port']`|String|Bootstrap node port number.|`'8080'`|\n|`['dcos-grid']['bootstrap']['genconf_dir']`|String|genconf directory path.|`'/opt/dcos-grid/genconf'`|\n|`['dcos-grid']['bootstrap']['config']`|Hash|Install configurations.|see [_Install Configuration Parameters_](https://dcos.io/docs/1.8/administration/installing/custom/configuration-parameters/)|\n|`['dcos-grid']['bootstrap']['config']['bootstrap_url']`|String||`\"http://#{node['dcos-grid']['bootstrap']['ip']}:#{node['dcos-grid']['bootstrap']['port']}\"`|\n|`['dcos-grid']['bootstrap']['config']['cluster_name']`|String||`'dcos0'`|\n|`['dcos-grid']['bootstrap']['config']['exhibitor_storage_backend']`|String||`'static'`|\n|`['dcos-grid']['bootstrap']['config']['ip_detect_filename']`|String||`'/genconf/ip-detect'`|\n|`['dcos-grid']['bootstrap']['config']['master_discovery']`|String|(ver. 0.3.2 or later)|`'static'`|\n|`['dcos-grid']['bootstrap']['config']['master_list']`|Array|e.g. `['192.168.1.101','192.168.1.102','192.168.1.103']`|`nil`|\n|`['dcos-grid']['bootstrap']['config']['oauth_auth_host']`|String|(ver. 0.3.2 or later)|`'https://dcos.auth0.com'`|\n|`['dcos-grid']['bootstrap']['config']['oauth_auth_redirector']`|String|(ver. 0.3.2 or later)|`'https://auth.dcos.io'`|\n|`['dcos-grid']['bootstrap']['config']['oauth_available']`|String|(ver. 0.3.2 or later)|`'true'`|\n|`['dcos-grid']['bootstrap']['config']['oauth_enabled']`|String|(ver. 0.3.2 or later)|`'true'`|\n|`['dcos-grid']['bootstrap']['config']['oauth_issuer_url']`|String|(ver. 0.3.2 or later)|`'https://dcos.auth0.com/'`|\n|`['dcos-grid']['bootstrap']['config']['resolvers']`|Array|e.g. `['8.8.8.8','8.8.4.4']` (Google DNS)|`nil`|\n|`['dcos-grid']['bootstrap']['bootstrap']['ip-detect']['interface']`|String|Network interface on each node for the `ip-detect` script. Note: If you set comma-delimited interface list (e.g. `'eth0,enp0s3'`), the first detected interface's ip is adopted (ver. 0.3.0 or later). |`'eth0'`|\n|`['dcos-grid']['node']['auto_setup']`|Boolean|execute the node setup script automatically or not.|`false`|\n|`['dcos-grid']['cloud-config']['target_platform']`|String|CoreOS only now.|`'coreos'`|\n|`['dcos-grid']['cloud-config']['target_dir']`|String||`'/home/core'`|\n|`['dcos-grid']['cloud-config']['target_owner']`|String||`'core:core'`|\n|`['dcos-grid']['cloud-config']['hostname']`|String||`'<fqdn>'`|\n|`['dcos-grid']['cloud-config']['ssh_authorized_keys']`|Array||`['<your_ssh_pub_key>',]`|\n\n## Usage\n\n### Recipes\n\n#### dcos-grid::default\n\nThis recipe does nothing.\n\n#### dcos-grid::agent\n\nThis recipe sets up a private agent node. Note: If `node['dcos-grid']['node']['auto_setup']` is `false`, you must execute the following manually.\n\n```\n$ /opt/dcos-grid/node_setup.sh slave\n```\n\n#### dcos-grid::bootstrap\n\nThis recipe sets up a bootstrap node. Note: Please execute the following manually.\n\n```\n$ /opt/dcos-grid/bootstrap_setup.sh\n```\n\n#### dcos-grid::cli (ver. 0.3.0 or later)\n\nThis recipe installs DC/OS CLI.\n\n#### dcos-grid::cloud-config (for CoreOS only)\n\nThis recipe generates a `/opt/dcos-grid/cloud-config.yaml` template file on local machine by the following `chef-solo` command.\n\n```\n$ sudo chef-solo -c solo.rb -j nodes/local-dcos0-cloud-config.json\n```\n\n- `nodes/local-dcos0-cloud-config.json`\n\n```json\n{\n  \"run_list\": [\n    \"role[dcos0-cloud-config]\"\n  ]\n}\n```\n\n- `roles/dcos0-cloud-config.rb`\n\n```ruby\nname 'dcos0-cloud-config'\ndescription 'dcos0 cloud-config.yaml file.'\n\nrun_list(\n  'role[dcos0]',  # includes common attributes.\n  'recipe[dcos-grid::cloud-config]',\n)\n```\n\nThen edit this yaml template (hostname, ssh_authorized_keys, IP address and so on) and install CoreOS by the `cloud-config.yaml`.\n\n```\n$ coreos-cloudinit -from-file ~/cloud-config.yaml -validate\n...\n$ sudo coreos-install -d /dev/sda -C stable -c ~/cloud-config.yaml\n```\n\n#### dcos-grid::master\n\nThis recipe sets up a master node. Note: If `node['dcos-grid']['node']['auto_setup']` is `false`, you must execute the following manually.\n\n```\n$ /opt/dcos-grid/node_setup.sh master\n```\n\n#### dcos-grid::node\n\nThis recipe sets up a base node (particular role is not assigned yet). Note: Please execute the following manually.\n\n```\n$ /opt/dcos-grid/node_setup.sh {master|slave|slave_public}\n```\n\n#### dcos-grid::node-commons\n\nThis recipe sets up common environment for DC/OS node.\n\n#### dcos-grid::public-agent\n\nThis recipe sets up a public node. Note: If `node['dcos-grid']['node']['auto_setup']` is `false`, you must execute the following manually.\n\n```\n$ /opt/dcos-grid/node_setup.sh slave_public\n```\n\n### Role Examples\n\n- `roles/dcos0.rb`: Common attributes.\n\n```ruby\nname 'dcos0'\ndescription 'dcos0 cluster'\n\nrun_list(\n)\n\noverride_attributes(\n  'dcos-grid' => {\n    'dcos_release_url' => 'https://downloads.dcos.io/dcos/EarlyAccess/dcos_generate_config.sh',\n    'docker-engine' => {\n      'version_on_centos' => '1.11.2-1',\n      'version_on_ubuntu' => '1.11.2-0',\n      #'version' => '1.11.2-1.el7.centos',\n    },\n    'bootstrap' => {\n      'ip' => '192.168.56.100',\n      'port' => '8080',\n      'config' => {\n        'cluster_name' => 'dcos0',\n        'master_list' => [\n          '192.168.56.101',\n          '192.168.56.102',\n          '192.168.56.103',\n        ],\n        'resolvers' => [\n          '8.8.8.8',\n          '8.8.4.4',\n        ],\n      },\n      'ip-detect' => {\n        'interface' => 'eth1,enp0s8',\n      },\n    },\n    'node' => {\n      'auto_setup' => false,\n    },\n  },\n)\n```\n\n- `roles/dcos0-boot.rb`\n\n```ruby\nname 'dcos0-boot'\ndescription 'dcos0 cluster bootstrap node'\n\nrun_list(\n  'role[dcos0]',\n  'recipe[dcos-grid::bootstrap]',\n)\n```\n\n- `roles/dcos-master.rb`\n\n```ruby\nname 'dcos0-master'\ndescription 'dcos0 cluster master node'\n\nrun_list(\n  'role[dcos0]',\n  'recipe[dcos-grid::master]',\n)\n\noverride_attributes(\n  'dcos-grid' => {\n    'node' => {\n      'auto_setup' => false,\n    },\n  },\n)\n```\n\n- `roles/dcos0-agent.rb`\n\n```ruby\nname 'dcos0-agent'\ndescription 'dcos0 cluster private agent node'\n\nrun_list(\n  'role[dcos0]',\n  'recipe[dcos-grid::agent]',\n)\n\noverride_attributes(\n  'dcos-grid' => {\n    'node' => {\n      'auto_setup' => true,\n    },\n  },\n)\n```\n\n### Uninstall DC/OS\n\nPlease log in each node and execute the following.\n\n```\n$ /opt/dcos-grid/uninstall.sh\n```\n\n## License and Authors\n\n- Author:: whitestar at osdn.jp\n\n```text\nCopyright 2016, whitestar\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n```\n",
  "requires": [
    {
      "kind": "host",
      "label": "centos",
      "revision": ">= 7.2",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "redhat",
      "revision": ">= 7.2",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "ubuntu",
      "revision": ">= 16.04",
      "one_of_group": "os"
    }
  ]
}