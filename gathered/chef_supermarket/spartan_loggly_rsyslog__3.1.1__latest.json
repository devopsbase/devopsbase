{
  "name": "spartan_loggly_rsyslog Chef cookbook",
  "chef_cookbook_name": "spartan_loggly_rsyslog",
  "revision": "3.1.1",
  "uris": [
    "https://supermarket.chef.io/cookbooks/spartan_loggly_rsyslog",
    "https://supermarket.chef.io/cookbooks/spartan_loggly_rsyslog/download",
    "https://supermarket.chef.io/cookbooks/spartan_loggly_rsyslog/versions/3.1.1",
    "https://supermarket.chef.io/cookbooks/spartan_loggly_rsyslog/versions/3.1.1/download",
    "https://supermarket.chef.io/api/v1/cookbooks/spartan_loggly_rsyslog/versions/3.1.1",
    "https://supermarket.chef.io/api/v1/cookbooks/spartan_loggly_rsyslog",
    "https://supermarket.chef.io/api/v1/cookbooks/spartan_loggly_rsyslog/versions/3.1.1/download"
  ],
  "labels": [
    "Chef cookbook",
    "Other",
    "Executable/Script/Chef Cookbook",
    "Mode/Executable/Script/Chef Cookbook",
    "Type/Devopsware/Logging",
    "Type/Infrastructure/Operating System"
  ],
  "info_url": "https://supermarket.chef.io/cookbooks/spartan_loggly_rsyslog",
  "package_url": "https://supermarket.chef.io/api/v1/cookbooks/spartan_loggly_rsyslog/versions/3.1.1/download",
  "deprecated": false,
  "created": "2016-03-03T23:53:20.863Z",
  "updated": "2016-10-06T19:23:21.780Z",
  "description": "Configures rsyslog to send logs to Loggly",
  "maintainer": {
    "name": "spartan",
    "email": "dsearles@joinspartan.com"
  },
  "license": "Apache 2.0",
  "chef_foodcritic_failure": false,
  "chef_up_for_adoption": null,
  "rating": null,
  "followers_count": 2,
  "downloads_count": 752,
  "downloads_count_revision": 11,
  "latest": true,
  "gatherbase_origin": "chef-supermarket",
  "readme_name": "README.md",
  "readme": "Loggly rsyslog Cookbook\n================\n\n[![Circle CI](https://circleci.com/gh/spartansystems/spartan_loggly_rsyslog-cookbook/tree/master.svg?style=svg)](https://circleci.com/gh/spartansystems/spartan_loggly_rsyslog-cookbook/tree/master)\n\nNote: This has been forked from [apetresc/loggly-rsyslog](https://github.com/apetresc/loggly-rsyslog).\n\nInstalls and configures rsyslog for use with [Loggly](http://loggly.com).\n\nSupported Versions\n------------\n- Chef 12\n- Ruby 2.1.6\n- Ruby 2.2.4\n- rsyslog 5.8 through 8.4\n\nPlatform\n--------\nTested against Ubuntu 12.04, 14.04, 15.04, 16.04\nTested against Centos 6.6, 6.7, 6.8, 7.2.\nTested against Debian 7.11\n\nAttributes\n----------\nThis cookbook leverages the\n[rsyslog](https://github.com/chef-cookbooks/rsyslog) to install rsyslog. You\ncan use any of it's attributes to configure rsyslog further than what this\ncookbook exposes.\n\n### `normal['rsyslog']['max_message_size']` (default: '64k')\n\nThis cookbook sets the max message size to 64k per Loggly's recommendation.\n\n### `default['loggly']['tags']` (default: [])\n\nExpects an array of strings that will all be set as global tags for the system.\n\n### `default['loggly']['log_files']` (default: [])\n\nSet up rsyslog to watch files and send contents off to loggly.\n\nExpects an array of Hashes with the following keys:\n\n* `filename`  (required)\n  - an absolute path to the file\n* `tag`       (optional)\n  - a tag to attach to content from the file\n  - Default: basename of filename with periods replaced with dashes (e.g. `/d/f.log` -> `f-log`)\n* `statefile` (optional)\n  - an absolute path to the rsyslog statefile\n  - Default: the filename path with `.rsyslog_state` appended (e.g. `/d/f.log` -> `/d/f.log.rsyslog_state`)\n* `severity`  (optional)\n  - the rsyslog severity for the contents of the file\n  - Default: the severity will be omitted from the config if it isn't set. Rsyslog will default it to `Info`\n\nExample:\n\n```\n  node.default['loggly']['log_files'] = [\n    { 'filename' => '/string/key.file.ext' },\n    { filename: '/just/a/file.log' },\n    { filename: '/every/thing.txt', tag: 'all the options', statefile: '/tmp/state', severity: 'Warning' }\n  ]\n```\n\n### `default['loggly']['apps']` (default: {})\n\nSet up rsyslog to watch a group of related files, and dispatch contents to loggly with a common tag.\n\nThis can be used to implement the pattern shown in the loggly docs for [apache](https://www.loggly.com/docs/sending-apache-logs/) and [nginx](https://www.loggly.com/docs/nginx-server-logs/).\n\nExpects a hash.\n\nEach key is used in naming the config file, and also set the common tag sent to loggly.\n\nThe values should be an array of files in the format used by `default['loggly']['log_files']`.\n\nIn addition to the common application-level tag, each file will have a file-specific tag, which allows differentiating within loggly.\n\nThis example will generate a file /etc/rsyslog.d/21-nginx.conf with contents similar to [the nginx manual configuration example](https://www.loggly.com/docs/nginx-server-logs/):\n```\n  node.default['loggly']['apps'] = {\n    'nginx' => [ { 'filename' => '/var/log/nginx/access.log',\n                   'statefile' => 'stat-nginx-access',\n                   'tag' => 'nginx-access'\n                   'severity' => 'info'},\n                 { 'filename' => '/var/log/nginx/error.log'\n                   'statefile' => 'stat-nginx-error',\n                   'tag' => 'nginx-error',\n                   'severity' => 'error' }\n    ]\n  }\n```\n\n### `default['loggly']['tls']['cert_path']` (default: '/etc/rsyslog.d/keys/ca.d')\n\nThe path to save the loggly cert.\n\n### `default['loggly']['tls']['cert_file']` (default: 'logs-01.loggly.com_sha12.crt')\n\nThe filename for the loggly cert.\n\n### `default['loggly']['tls']['cert_url']` (default: 'https://logdog.loggly.com/media/logs-01.loggly.com_sha12.crt')\n\nThe url from which to fetch the loggly cert.\n\n### `default['loggly']['tls']['cert_checksum']` (default: 'b562ae82b54bcb43923290e78949153c0c64910d40b02d2207010bb119147ffc')\n\nThe SHA256 checksum of the cert.\n\n### `default['loggly']['token']` (default: '')\n\nThe loggly token. It is best to wrap this cookbook with another cookbook that\ngets this secret from a databag or some other secret storage system.\n\n### `default['loggly']['rsyslog']['conf_dir']` (default: '/etc/rsyslog.d')\n\nThe rsyslog configuration directory.\n\n### `default['loggly']['rsyslog']['conf']` (default: \"#{node['loggly']['rsyslog']['conf_dir']}/22-loggly.conf\")\n\nThe filename for the loggly rsyslog configuration file.\n\n### `default['loggly']['rsyslog']['files_conf']` (default: \"#{node['loggly']['rsyslog']['conf_dir']}/99-files.conf\")\n\nThe filename for the rsyslog configuration file that will setup rsyslog to watch files for sending to loggly.\n\n### `default['loggly']['rsyslog']['host']` (default: 'logs-01.loggly.com')\n\nThe host for rsyslog to send logs.\n\n### `default['loggly']['rsyslog']['port']` (default: 6514)\n\nThe port for rsyslog to send logs.\n\n### `default['loggly']['rsyslog']['input_file_poll_interval']` (default: 10)\n\nHow often rsyslog will check files for new content to send to loggly.\n\nRecipes\n-------\nInclude the default recipe in a cookbook. The cookbook includes the rsyslog\ncookbook that will install the rsyslog package and start the service if it does\nnot exist. The rsyslog service will restart after changes to the loggly rsyslog\nor input files configuration file(s) are made.\n\nRunning Tests\n----------------------------\n\n* Ensure that you have the [chefdk](https://downloads.chef.io/chef-dk/) installed.\n* Run: `rake`\n\nYou can see the individual rake commands with `rake -T`\n\nLicense & Authors\n-----------------\n- Author: Matt Veitas <mveitas@gmail.com>\n- Author: Daniel Searles <daniel.paul.searles@gmail.com>\n\n```\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n```\n",
  "requires": [
    {
      "kind": "host",
      "label": "ubuntu",
      "revision": ">= 14.04",
      "one_of_group": "os"
    },
    {
      "kind": "host",
      "label": "centos",
      "revision": ">= 6.6",
      "one_of_group": "os"
    },
    {
      "kind": "env",
      "uri": "https://supermarket.chef.io/cookbooks/rsyslog",
      "revision": "~> 4.0.0",
      "self_resolve": true
    }
  ]
}